import{_ as n,c as s,o as a,a as p}from"./app.f1e974b0.js";const g='{"title":"js \u5904\u7406","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u539F\u751F\u4F7F\u7528 script","slug":"\u539F\u751F\u4F7F\u7528-script"},{"level":2,"title":"\u6253\u5305\u5904\u7406","slug":"\u6253\u5305\u5904\u7406"},{"level":2,"title":"\u52A8\u6001\u5BFC\u5165\u5B9E\u73B0\u61D2\u52A0\u8F7D","slug":"\u52A8\u6001\u5BFC\u5165\u5B9E\u73B0\u61D2\u52A0\u8F7D"},{"level":3,"title":"import() \u5BFC\u5165 CommonJS \u4E0E ESM \u6A21\u5757\u65F6\uFF0C\u53D6\u503C\u7684\u4E0D\u540C","slug":"import-\u5BFC\u5165-commonjs-\u4E0E-esm-\u6A21\u5757\u65F6\uFF0C\u53D6\u503C\u7684\u4E0D\u540C"},{"level":3,"title":"\u9B54\u6CD5\u6CE8\u91CA Magic Comments","slug":"\u9B54\u6CD5\u6CE8\u91CA-magic-comments"},{"level":2,"title":"\u4EE3\u7801\u63D0\u53D6","slug":"\u4EE3\u7801\u63D0\u53D6"},{"level":3,"title":"entry \u5206\u79BB bundle","slug":"entry-\u5206\u79BB-bundle"},{"level":3,"title":"import() \u5206\u79BB\u5F02\u6B65\u5165\u53E3 bundle","slug":"import-\u5206\u79BB\u5F02\u6B65\u5165\u53E3-bundle"},{"level":3,"title":"externals \u5206\u79BB bundle","slug":"externals-\u5206\u79BB-bundle"},{"level":3,"title":"splitChunksPlugin \u5206\u79BB bundle","slug":"splitchunksplugin-\u5206\u79BB-bundle"},{"level":3,"title":"DLL \u52A8\u6001\u94FE\u63A5\u5E93","slug":"dll-\u52A8\u6001\u94FE\u63A5\u5E93"},{"level":3,"title":"runtimeChunk \u8FD0\u884C\u65F6\u4EE3\u7801\u62BD\u79BB","slug":"runtimechunk-\u8FD0\u884C\u65F6\u4EE3\u7801\u62BD\u79BB"},{"level":3,"title":"IgnorePlugin \u63D2\u4EF6","slug":"ignoreplugin-\u63D2\u4EF6"},{"level":2,"title":"\u538B\u7F29","slug":"\u538B\u7F29"}],"relativePath":"FE-Engineering/ci-webpack/js.md"}',t={},e=p(`<h1 id="js-\u5904\u7406" tabindex="-1">js \u5904\u7406 <a class="header-anchor" href="#js-\u5904\u7406" aria-hidden="true">#</a></h1><ul><li>\u57FA\u7840\u4F9D\u8D56\u6253\u5305</li><li>\u5F02\u6B65\u4EE3\u7801\u63D0\u53D6\u5B9E\u73B0\u61D2\u52A0\u8F7D</li><li>\u516C\u5171\u4EE3\u7801\u63D0\u53D6\uFF1A <ul><li>\u7C7B\u578B\uFF1A\u4F9D\u8D56\u4EE3\u7801\u3001\u8FD0\u884C\u65F6\u4EE3\u7801\u3001\u4E1A\u52A1\u516C\u5171\u4EE3\u7801</li><li>\u65B9\u5F0F\uFF1A\u5165\u53E3\u5904\u62C6\u5206\u3001splitChunks \u62C6\u5206</li></ul></li><li>tree-shaking</li><li>\u538B\u7F29</li><li>bable-loader</li></ul><h2 id="\u539F\u751F\u4F7F\u7528-script" tabindex="-1">\u539F\u751F\u4F7F\u7528 script <a class="header-anchor" href="#\u539F\u751F\u4F7F\u7528-script" aria-hidden="true">#</a></h2><p>\u4E00\u4E2A\u7B80\u5355\u70B9\u51FB\u6309\u94AE\u663E\u793A\u968F\u673A\u6570\u7684\u529F\u80FD\uFF0C\u4F7F\u7528\u539F\u59CB\u7684 <code>&lt;script&gt;&lt;/script&gt;</code> \u6807\u7B7E\u63D2\u5165 HTML \u4E2D\u4F7F\u7528\uFF1A</p><div class="language-js"><pre><code><span class="token comment">/**
 * \u751F\u6210\u6307\u5B9A\u4F4D\u6570\u7684\u968F\u673A\u6574\u6570
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">genRandomNumber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;used&#39;</span><span class="token punctuation">,</span> <span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * \u751F\u6210\u6309\u94AE\u5143\u7D20
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">genElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eleBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span>
  eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;Click me to generate random number: 0&#39;</span>
  eleBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Click me to generate random number: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> eleBtn
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">genElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html"><pre><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>javascript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u9075\u5FAA\u6A21\u5757\u5316\u5F00\u53D1\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A\u751F\u6210\u968F\u673A\u6570\u7684\u4EE3\u7801\u62BD\u79BB\u5230\u72EC\u7ACB\u7684\u5DE5\u5177\u65B9\u6CD5\u7684\u6587\u4EF6 <code>utils.js</code>\uFF0C\u6B64\u65F6\u6211\u4EEC\u5C31\u9700\u8981\u5728 html \u4E2D\u5F15\u5165\u4E24\u4E2A <code>script</code> \u6587\u4EF6\u3002</p><div class="language-js"><pre><code><span class="token comment">// utils.js</span>
<span class="token comment">/**
 * \u751F\u6210\u6307\u5B9A\u4F4D\u6570\u7684\u968F\u673A\u6574\u6570
 */</span>
<span class="token keyword">const</span> <span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token parameter">n <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// index.js</span>
<span class="token comment">/**
 * \u751F\u6210\u6309\u94AE\u5143\u7D20
 */</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;used&#39;</span><span class="token punctuation">,</span> <span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">genElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eleBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span>
  eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;Click me to generate random number: 0&#39;</span>
  eleBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Click me to generate random number: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> eleBtn
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">genElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html"><pre><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>javascript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- utils.js \u5FC5\u987B\u5728 index.js \u524D\u9762\u5F15\u5165\uFF0C\u56E0\u4E3A genRandomNumber \u5B9A\u4E49\u4E3A const \u53D8\u91CF\uFF0C\u5B58\u5728\u6682\u65F6\u6027\u6B7B\u533A\u95EE\u9898\uFF0C\u5FC5\u987B\u8981\u5B9A\u4E49\u4E4B\u540E\u624D\u80FD\u5F15\u7528--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utils.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- &lt;script src=&quot;utils.js&quot;&gt;&lt;/script&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u6B64\u65F6\uFF0C\u5728 HTML \u4E2D\u5F15\u5165\u4E24\u4E2A\u6709\u4F9D\u8D56\u5173\u7CFB\u7684 js \u6587\u4EF6\u65F6\u95EE\u9898\uFF1A</p><ul><li>\u9664\u4E86 js \u6587\u4EF6\u5B9A\u4E49\u7684\u53D8\u91CF\u90FD\u53D8\u6210\u5168\u5C40\u51FD\u6570\u5185\uFF0C\uFF08\u867D\u7136\u53EF\u4EE5\u7528 IIFE \u89E3\u51B3\uFF0C\u6216\u8005\u4F7F\u7528 ES Module\uFF09</li><li>\u66F4\u91CD\u8981\u7684\u95EE\u9898\u662F\uFF0C\u8FD8\u9700\u8981\u6CE8\u610F\u6587\u4EF6\u5F15\u5165\u7684\u987A\u5E8F\u95EE\u9898\uFF0C\u4E0D\u7136\u4F1A\u5BFC\u81F4\u67D0\u4E9B\u53D8\u91CF\u4F7F\u7528\u62A5\u9519\u3002</li><li>\u591A\u4E2A\u4F9D\u8D56\u5C31\u9700\u8981\u5199\u5165\u591A\u4E2A <code>script</code> \u6807\u7B7E</li></ul><p>\u6240\u4EE5\uFF0C\u9700\u8981\u4F7F\u7528\u6253\u5305\u5DE5\u5177\u628A\u6709\u4F9D\u8D56\u5173\u7CFB\u7684\u6587\u4EF6\u5408\u5E76\u6210\u4E00\u4E2A\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u7684\u72EC\u7ACB\u6587\u4EF6\uFF0C\u8BA9\u5DE5\u5177\u5728\u6253\u5305\u7684\u8FC7\u7A0B\u4E2D\u81EA\u52A8\u5904\u7406\u4E86\u6A21\u5757\u95F4\u7684\u5F15\u7528\u5173\u7CFB\u3002</p><h2 id="\u6253\u5305\u5904\u7406" tabindex="-1">\u6253\u5305\u5904\u7406 <a class="header-anchor" href="#\u6253\u5305\u5904\u7406" aria-hidden="true">#</a></h2><p>\u8981\u628A\u5355\u72EC\u7684\u6587\u4EF6\u53D8\u6210\u53EF\u7528\u7684\u6A21\u5757\uFF0C\u5C31\u9700\u8981\u7EA6\u5B9A\u4E00\u79CD\u53EF\u7528\u4E8E\u6A21\u5757\u7EC4\u88C5\u7684\u89C4\u8303\uFF0C\u79F0\u4E4B\u4E3A<strong>\u6A21\u5757\u89C4\u8303</strong>\uFF0C\u5C31\u662F\u5728\u5355\u4E2A\u6A21\u5757\u6587\u4EF6\u4E2D\u589E\u52A0\u6837\u677F\u4EE3\u7801\uFF1A\u5BFC\u5165\u548C\u5BFC\u51FA\u7684\u8BED\u53E5\u3002\u5C31\u597D\u6BD4\u62FC\u88C5\u79EF\u6728\u4E0A\u7EDF\u4E00\u7684\u51F9\u51F8\u70B9\u3002\u76EE\u524D web \u6807\u51C6\u6A21\u5757\u89C4\u8303\u662F <strong>ES Module</strong>\uFF0C\u901A\u7528\u4E8E\u6D4F\u89C8\u5668\u7AEF\u548Cnode\u7AEF\u3002</p><p>\u57FA\u672C\u8BED\u6CD5\uFF1A\u5BFC\u51FA <code>export default</code> \u6216\u8005 <code>export</code>\uFF1B\u5BFC\u5165<code>import module from &#39;path/to&#39;</code></p><div class="language-js"><pre><code><span class="token comment">// utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">const</span> <span class="token function-variable function">genRandomNumber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> genRandomNumber <span class="token keyword">from</span> <span class="token string">&#39;./utils.js&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;genRandomNumber&#39;</span><span class="token punctuation">,</span> <span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * \u751F\u6210\u6309\u94AE\u5143\u7D20
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">genElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eleBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span>
  eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;Click me to generate random number: 0&#39;</span>
  eleBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Click me to generate random number: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> eleBtn
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">genElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-js"><pre><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../js-demo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;bundle-base&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u6B64\u65F6\uFF0CHTML \u53EA\u9700\u8981\u5F15\u5165 <code>bundle.js</code> \u5373\u53EF\u3002</p><div class="language-html"><pre><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="\u52A8\u6001\u5BFC\u5165\u5B9E\u73B0\u61D2\u52A0\u8F7D" tabindex="-1">\u52A8\u6001\u5BFC\u5165\u5B9E\u73B0\u61D2\u52A0\u8F7D <a class="header-anchor" href="#\u52A8\u6001\u5BFC\u5165\u5B9E\u73B0\u61D2\u52A0\u8F7D" aria-hidden="true">#</a></h2><p>\u56E0\u4E3A <code>utils.js</code> \u4E2D\u7684\u4EE3\u7801\uFF0C\u53EA\u6709\u5F53\u9875\u9762\u70B9\u51FB\u4E86\u6309\u94AE\u65F6\u624D\u9700\u8981\u7528\u5230\u5176\u5185\u90E8\u51FD\u6570\uFF0C\u6240\u4EE5\u7406\u60F3\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5E0C\u671B\u5728\u9996\u5C4F\u52A0\u8F7D\u65F6\u4E0D\u52A0\u8F7D <code>utils.js</code> \u4EE3\u7801\uFF0C\u5F53\u70B9\u51FB\u6309\u94AE\u65F6\u624D\u53BB\u52A0\u8F7D\u4EE3\u7801\u5B9E\u73B0\u529F\u80FD\u3002</p><p>\u5728 <code>webpack</code> \u4E2D\uFF0C\u8981\u5B9E\u73B0\u8FD9\u6837\u7684\u9700\u6C42\uFF08\u79F0\u4E3A\u61D2\u52A0\u8F7D\uFF09\uFF0C\u9700\u8981\u4F7F\u7528\u52A8\u6001\u5BFC\u5165\u3002</p><p><code>webpack</code> \u63D0\u4F9B\u4E86\u4E24\u4E2A\u65B9\u5F0F\u6765\u5B9E\u73B0\u52A8\u6001\u5BFC\u5165\uFF1A</p><ul><li><code>require.ensure()</code>\uFF1A\u8FD9\u662F <code>webpack</code> \u65E9\u671F\u7684\u5B9E\u73B0\uFF0C\u73B0\u5728\u57FA\u672C\u4E0D\u7528\u4E86\uFF1B</li><li><code>import()</code>\uFF1A \u63A8\u8350\u4F7F\u7528\u7B26\u5408 <code>ECMAScript</code> \u63D0\u6848\u7684 <code>import()</code> \u8BED\u6CD5\u6765\u5B9E\u73B0\u52A8\u6001\u5BFC\u5165\u3002</li></ul><p><code>webpack</code> \u5185\u90E8\u5BF9 <code>import()</code> \u5BFC\u5165\u7684\u6A21\u5757\u7684\u5E94\u7528\u89C4\u5219\u662F\uFF1A</p><ul><li>\u4EE5 <code>import(&#39;path/to/file&#39;)</code> \u5BFC\u5165\u7684\u6A21\u5757\u4E3A\u65B0\u7684\u5165\u53E3\u6587\u4EF6\u6253\u5305\u6210\u4E00\u4E2A\u5355\u72EC\u7684 chunk\uFF0C\u79F0\u4E3A<strong>\u5F02\u6B65 chunk(async chunk) <strong>\u4EE5\u533A\u522B\u4E8E\u5728HTML\u4E0A\u76F4\u63A5\u5F15\u7528\u7684</strong>\u5165\u53E3 chunk(initial chunk)</strong>\u3002</li><li>\u8FD0\u884C\u65F6\uFF0C\u5F53\u4EE3\u7801\u6267\u884C\u5230 <code>import()</code> \u8BED\u53E5\u65F6\u624D\u53BB\u52A0\u8F7D\u5BF9\u5E94\u7684 async chunk\u3002\uFF08\u5B9E\u73B0\u539F\u7406\u7B80\u5355\u7406\u89E3\u662F\u901A\u8FC7\u52A8\u6001\u521B\u5EFA script \u5143\u7D20\u4F7F\u7528 jsonp \u65B9\u5F0F\u52A0\u8F7D chunk\uFF0C\u7136\u540E\u5220\u9664\u4E34\u65F6\u7684 script \u5143\u7D20)</li><li><code>import()</code>\u8FD4\u56DE\u4E00\u4E2A <code>Promise</code> \u5BF9\u8C61\uFF0C\u5F53\u52A0\u8F7D\u6210\u529F\u65F6\u53EF\u4EE5\u5728 <code>then</code> \u65B9\u6CD5\u4E2D\u83B7\u53D6\u5B9E\u9645\u6A21\u5757\u4EE3\u7801\u3002</li></ul><blockquote><p><code>webpack</code> \u4E2D\u4F7F\u7528\u7684 <code>import()</code> \uFF0C\u5E76\u4E0D\u662F\u4F7F\u7528\u6D4F\u89C8\u5668\u6216node\u63D0\u4F9B\u7684\u7B26\u5408ES\u89C4\u8303\u7684\u539F\u751F <code>import()</code>\uFF0C\u56E0\u4E3A\u8981\u517C\u5BB9 <code>ES Module</code> \u89C4\u8303\u548C <code>CommonJS</code> \u89C4\u8303\uFF0C\u6240\u4EE5\u81EA\u5DF1\u6309\u7167 ES module \u89C4\u8303\u6807\u51C6\u5B9E\u73B0\u4E86 <code>import()</code> API\u3002 \u6240\u4EE5\uFF0C\u5982\u679C <code>import(&#39;path/to/commonjs&#39;) </code>\u5BFC\u5165\u7684\u662F\u4E00\u4E2A <code>CommonJS</code> \u89C4\u8303\u7684\u6A21\u5757\u7684\u9ED8\u8BA4\u5BFC\u51FA\u65F6\uFF0C\u5728 <code>then</code> \u4E2D\u56DE\u8C03\u51FD\u6570\u4E2D\u83B7\u53D6\u6A21\u5757\u5185\u5BB9\u9700\u8981\u901A\u8FC7<code>.default</code><code>import(&#39;/path/to/esm&#39;).then(res =&gt; console.log(res))</code><code>import(&#39;/path/to/commonjs).then(res =&gt; console.log(res.default))</code></p></blockquote><div class="language-"><pre><code>- import genRandomNumber from &#39;./utils.js&#39;
const genElement = () =&gt; {
  const eleBtn = document.createElement(&#39;button&#39;)
  eleBtn.textContent = &#39;Click me to generate random number: 0&#39;
  eleBtn.onclick = function() {
-    eleBtn.textContent = \`Click me to generate random number: \${genRandomNumber(2)}\`
+   import(&#39;./utils.js&#39;).then(res =&gt; {
+       console.log(&#39;import res&#39;, res)
+      eleBtn.textContent = \`Click me to generate random number: \${res.genRandomNumber(2)}\`
+    }) 
  }

  return eleBtn
}
document.body.appendChild(genElement())
</code></pre></div><p>\u66F4\u6539\u914D\u7F6E\u6587\u4EF6</p><div class="language-"><pre><code>output: {
-   path: path.resolve(__dirname, &#39;bundle-base&#39;),
-   filename: &#39;bundle.js&#39;
+   path: path.resolve(__dirname, &#39;bundle-import&#39;),
+   filename: &#39;[name].bundle-esm.js&#39;,
},
</code></pre></div><p>\u6B64\u65F6\u6253\u5305\u7ED3\u679C\u53EF\u4EE5\u770B\u5230\uFF1A</p><ul><li>\u6253\u5305\u7ED3\u679C\u9664\u4E86\u5165\u53E3\u6587\u4EF6 <code>main.bundle-esm.js</code>\uFF0C\u8FD8\u591A\u51FA\u4E00\u4E2A <code>1.bundle-esm.js</code></li><li>\u6253\u5F00\u6D4F\u89C8\u5668 <code>network</code> \u9762\u677F\uFF0C\u5237\u65B0 <code>index.html</code> \u9875\u9762\u9996\u6B21\u53EA\u52A0\u8F7D\u4E86 <code>main.bundle-esm.js</code>\uFF0C\u5982\u679C\u70B9\u51FB\u6309\u94AE\uFF0C\u624D\u52A0\u8F7D\u4E86 <code>1.bundle-esm.js</code>\uFF0C\u5B9E\u73B0\u4E86\u6309\u9700\u52A0\u8F7D\u3002</li></ul><h3 id="import-\u5BFC\u5165-commonjs-\u4E0E-esm-\u6A21\u5757\u65F6\uFF0C\u53D6\u503C\u7684\u4E0D\u540C" tabindex="-1"><code>import()</code> \u5BFC\u5165 <code>CommonJS</code> \u4E0E <code>ESM</code> \u6A21\u5757\u65F6\uFF0C\u53D6\u503C\u7684\u4E0D\u540C <a class="header-anchor" href="#import-\u5BFC\u5165-commonjs-\u4E0E-esm-\u6A21\u5757\u65F6\uFF0C\u53D6\u503C\u7684\u4E0D\u540C" aria-hidden="true">#</a></h3><p>\u518D\u6765\u770B\u4E0B\uFF0C\u5982\u679C\u628A <code>utils.js</code> \u4F7F\u7528 <code>CommonJS</code> \u89C4\u8303\u5BFC\u51FA\u65F6\uFF0C<code>import()</code> \u8FD4\u56DE\u7ED3\u679C\uFF0C\u67E5\u770B\u63A7\u5236\u53F0 <code>console.log</code> \u7684\u7ED3\u679C\u3002</p><div class="language-"><pre><code># utils.js
-  export default const genRandomNumber = (n = 1) =&gt; {
+  module.exports = genRandomNumber = (n = 1) =&gt; {
    return Math.round(Math.random() * Math.pow(10, n))
}

# index.js
import(&#39;./utils.js&#39;).then(res =&gt; {
  console.log(&#39;import res&#39;, res)
-  eleBtn.textContent = \`Click me to generate random number: \${res.genRandomNumber(2)}\`
+  eleBtn.textContent = \`Click me to generate random number: \${res.default.genRandomNumber(2)}\`
})

# \u914D\u7F6E\u6587\u4EF6\u4FEE\u6539
output: {
   path: path.resolve(__dirname, &#39;bundle-import&#39;),
-   filename: &#39;[name].bundle-esm.js&#39;,
+   filename: &#39;[name].bundle-cjs.js&#39;,
},
</code></pre></div><p>\u4F46\u662F\u5982\u679C\u5C06 <code>utils.js</code> \u4E0D\u4F7F\u7528\u9ED8\u8BA4\u5BFC\u51FA\uFF0C\u4F7F\u7528 <code>exports</code>\u5BFC\u51FA\uFF0C\u5219\u4E0E <code>ESM</code> \u4F7F\u7528\u65E0\u5F02\u3002</p><div class="language-"><pre><code>- module.exports = genRandomNumber = (n = 1) =&gt; { // \u9700\u8981\u901A\u8FC7 res.default.genRandomNumber \u83B7\u53D6
+ exports.genRandomNumber = (n = 1) =&gt; { // import().then(res =&gt; res.genRandomNumber) \u53EF\u4EE5\u6B63\u5E38\u83B7\u53D6
    return Math.round(Math.random() * Math.pow(10, n))
}
</code></pre></div><h3 id="\u9B54\u6CD5\u6CE8\u91CA-magic-comments" tabindex="-1">\u9B54\u6CD5\u6CE8\u91CA Magic Comments <a class="header-anchor" href="#\u9B54\u6CD5\u6CE8\u91CA-magic-comments" aria-hidden="true">#</a></h3><p>webpack \u53EF\u4EE5\u901A\u8FC7\u5728 <code>import( /** Magic Comments **/ path)</code> \u5185\u8054\u6CE8\u91CA\u7684\u8BED\u6CD5\uFF0C\u8BA9\u6211\u4EEC\u80FD\u591F\u5BF9\u5F02\u6B65\u52A0\u8F7D\u6A21\u5757\u62E5\u6709\u66F4\u591A\u63A7\u5236\u6743\u3002</p><div class="language-js"><pre><code><span class="token comment">// \u9759\u6001\u8DEF\u5F84\u5BFC\u5165\u5355\u4E2A\u6A21\u5757\u6587\u4EF6\u65F6\uFF0C\u53EF\u7528\u7684 Magic Comments</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: &quot;my-chunk-name&quot; */</span>
  <span class="token comment">/* webpackMode: &quot;lazy&quot; */</span>
  <span class="token comment">/* webpackExports: [&quot;default&quot;, &quot;named&quot;] */</span>
  <span class="token comment">/* webpackPrefetch: true */</span>
  <span class="token comment">/* webpackPreload: true */</span>
  <span class="token string">&#39;./module&#39;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u52A8\u6001\u8DEF\u5F84\u5BFC\u5165\u591A\u4E2A\u53EF\u80FD\u7684\u76EE\u6807\uFF0C\u9664\u4E86\u4E0A\u8FF0\u53EF\u7528\u7684 Magic Comments \u8FD8\u53EF\u4EE5\u4F7F\u7528 webpackInclude / webpackExclude \u6CE8\u91CA\u6761\u4EF6\u6765\u7B5B\u9009\u7B26\u5408\u7684\u6A21\u5757\u6587\u4EF6\u5BFC\u5165</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackInclude: /\\.json$/ */</span>
  <span class="token comment">/* webpackExclude: /\\.noimport\\.json$/ */</span>
  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// webpackIgnore\uFF1A\u8BBE\u7F6E\u4E3A true \u65F6\uFF0C\u7981\u7528\u52A8\u6001\u5BFC\u5165\u89E3\u6790\uFF0Cwebpack \u5C06\u4E0D\u8FDB\u884C\u4EE3\u7801\u5206\u5272</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackIgnore: true */</span> <span class="token string">&#39;ignored-module.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="webpackchunkname" tabindex="-1"><code>webpackChunkName</code> <a class="header-anchor" href="#webpackchunkname" aria-hidden="true">#</a></h4><p><code>webpack</code> \u901A\u8FC7 <code>import()</code> \u5F02\u6B65\u5BFC\u5165\u7684\u6A21\u5757\uFF0C\u5206\u5272\u8F93\u51FA\u5355\u72EC\u7684\u6587\u4EF6\u3002\u7136\u540E\u901A\u8FC7\u9B54\u6CD5\u6CE8\u91CA\u6DFB\u52A0<code>webpackChunkName</code>\u81EA\u5B9A\u4E49\u6309\u9700\u52A0\u8F7D\u4EA7\u751F\u7684 chunk \u540D\u79F0\u3002</p><div class="language-"><pre><code># \u914D\u7F6E\u6587\u4EF6
output: {
   path: path.resolve(__dirname, &#39;bundle-import&#39;),
   filename: &#39;[name].bundle.js&#39;, // \u8FD9\u91CC\u7684name \u6839\u636E entry \u914D\u7F6E\u83B7\u53D6
+  chunkFilename: &#39;[name].bundle.js&#39;, // \u8FD9\u91CC\u7684 name \u6839\u636E webpackChunkName \u7684\u9B54\u6CD5\u6CE8\u91CA\u8BFB\u53D6
},

# index.js
- import(&#39;./utils.js&#39;).then(res =&gt; {
+ import(/* webpackChunkName: &#39;utils&#39; */&#39;./utils.js&#39;).then(res =&gt; {
  console.log(&#39;import res&#39;, res)
  eleBtn.textContent = \`Click me to generate random number: \${res.genRandomNumber(2)}\`
})
</code></pre></div><p>\u6B64\u65F6 <code>[name]</code> \u7684\u53D6\u503C\u9700\u8981\u914D\u5408 <code>webpack</code> \u7684\u9B54\u6CD5\u6CE8\u91CA(<code>webpack magic comment</code>)\uFF0C\u5373\u5982\u4E0A <code>import(/* webpackChunkName: &#39;utils&#39; */&#39;./utils.js&#39;)</code> \u4E2D\u5199\u6CD5\uFF0C\u6B64\u65F6\uFF0C\u6253\u5305\u8F93\u51FA\u7684\u7ED3\u679C\u5C31\u662F <code>utils.bundle.js</code>\u3002</p><p>\u5982\u679C\u662F\u4F7F\u7528\u52A8\u6001\u8DEF\u5F84\u5BFC\u5165\u591A\u4E2A\u53EF\u80FD\u7684\u76EE\u6807\u6A21\u5757\uFF0C\u5219\u5728\u9B54\u6CD5\u6CE8\u91CA\u4E2D\u7684 <code>webpackChunkName</code> \u4E5F\u6709\u53EF\u4EE5\u4F7F\u7528\u7684\u5360\u4F4D\u7B26<code>[index] / [reuqest]</code>\uFF1A</p><ul><li><code>[index]</code>\uFF0C\u5373\u5F53\u524D\u52A8\u6001\u5BFC\u5165\u58F0\u660E\u4E2D\u8868\u793A\u6A21\u5757\u6587\u4EF6\u7684\u7D22\u5F15\uFF1B</li><li><code>[request]</code>\u8868\u793A\u5BFC\u5165\u6587\u4EF6\u7684\u52A8\u6001\u90E8\u5206\uFF0C\u5373\u4E0B\u4F8B\u4E2D<code>fileName</code>\u90E8\u5206</li></ul><div class="language-js"><pre><code><span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: &quot;utilities-[index]-[request]&quot; */</span>
  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./utilities/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
<span class="token punctuation">)</span>
</code></pre></div><p>\u4EE5\u4E0A\u4EE3\u7801\u53EF\u80FD\u751F\u6210\u4F8B\u5982 <code>utilities-0-divide.js</code> \u8FD9\u6837\u7684\u6587\u4EF6\u540D\u3002</p><h4 id="webpackmode" tabindex="-1"><code>webpackMode</code> <a class="header-anchor" href="#webpackmode" aria-hidden="true">#</a></h4><p>webpackMode\u5C5E\u6027\u5B9A\u4E49\u4E86resolve\u52A8\u6001\u6A21\u5757\u65F6\u7684\u6A21\u5F0F\u3002\u53EF\u7528\u7684\u503C\u4E3A\uFF1A<code>lazy / lazy-once / eager / weak</code>\uFF1A</p><ul><li>lazy: \u8FD9\u662F\u9ED8\u8BA4\u6A21\u5F0F\u3002\u5B83\u4E3A\u6BCF\u4E2A\u52A8\u6001\u5BFC\u5165\u7684\u6A21\u5757\u521B\u5EFA\u5F02\u6B65chunk\u3002</li><li>eager: \u6B64\u6A21\u5F0F\u4F1A\u963B\u6B62Webpack\u751F\u6210\u989D\u5916\u7684chunk\u3002\u6240\u6709\u5BFC\u5165\u7684\u6A21\u5757\u88AB\u5305\u542B\u5728\u5F53\u524Dchunk\uFF0C\u6240\u4EE5\u4E0D\u9700\u8981\u518D\u53D1\u989D\u5916\u7684\u7F51\u7EDC\u8BF7\u6C42\u3002\u5B83\u4ECD\u7136\u8FD4\u56DE\u4E00\u4E2APromise\uFF0C\u4F46\u5B83\u88AB\u81EA\u52A8resolve\u3002\u4F7F\u7528eager\u6A21\u5F0F\u7684\u52A8\u6001\u5BFC\u5165\u4E0E\u5E38\u89C4<code>import xx from</code>\u9759\u6001\u5BFC\u5165\u7684\u533A\u522B\u5728\u4E8E\uFF0C\u9759\u6001\u5BFC\u5165\u5728\u9876\u5C42\u5BFC\u5165\u540E\u5C31\u89E3\u6790\u6267\u884C\u6574\u4E2A\u6A21\u5757\uFF0C\u4F46 eager \u6A21\u5F0F\u4E0B\u52A8\u6001\u5BFC\u5165\u6574\u4E2A\u6A21\u5757\u53EA\u6709\u5F53**import()**\u4E4B\u540E\u624D\u6267\u884C\u3002</li><li>weak\uFF1A\u5F7B\u5E95\u963B\u6B62\u989D\u5916\u7684\u7F51\u7EDC\u8BF7\u6C42\u3002\u53EA\u6709\u5F53\u8BE5\u6A21\u5757\u5DF2\u5728\u5176\u4ED6\u5730\u65B9\u88AB\u52A0\u8F7D\u8FC7\u4E86\u4E4B\u540E\uFF0CPromise\u624D\u88ABresolve\uFF0C\u5426\u5219\u76F4\u63A5\u88ABreject\u3002</li><li>lazy-once: \u52A8\u6001\u8DEF\u5F84\u5BFC\u5165\u65F6\u53EF\u7528\uFF0C\u5B83\u4F1A\u4E3A\u6EE1\u8DB3\u5BFC\u5165\u6761\u4EF6\u7684\u6240\u6709\u6A21\u5757\u521B\u5EFA\u5355\u4E00\u7684\u5F02\u6B65chunk\u3002</li></ul><div class="language-js"><pre><code><span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./utilities/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token comment">/* webpackMode: &quot;lazy-once&quot; */</span>
<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">divideModule</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>divideModule<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>\u4EE5\u4E0A\u4EE3\u7801\u8868\u793A\uFF0CWebpack\u4F1A\u4E3A\u6240\u6709 utilities \u76EE\u5F55\u4E0B\u7684\u6240\u6709\u6A21\u5757\u5171\u540C\u521B\u5EFA\u4E00\u4E2A\u5F02\u6B65chunk\u3002\u5B83\u4F1A\u5BFC\u81F4\u7528\u6237\u4EE5\u4E00\u4E2A\u6587\u4EF6\u4E0B\u8F7D\u6240\u6709\u7684\u6A21\u5757\u3002</p><p>\u8FD9\u662F\u9ED8\u8BA4\u6A21\u5F0F\u3002\u5B83\u4E3A\u6BCF\u4E2A\u52A8\u6001\u5BFC\u5165\u7684\u6A21\u5757\u521B\u5EFA\u5F02\u6B65chunk\u3002</p><h4 id="webpackexports" tabindex="-1"><code>webpackExports</code> <a class="header-anchor" href="#webpackexports" aria-hidden="true">#</a></h4><p>webpack@5.x \u8D77\u53EF\u7528\u3002 <code>webpackExports</code> \u544A\u77E5 webpack \u53EA\u6784\u5EFA\u6307\u5B9A\u51FA\u53E3\u7684\u52A8\u6001 import() \u6A21\u5757\u3002\u5B83\u53EF\u4EE5\u51CF\u5C0F chunk \u7684\u5927\u5C0F\u3002</p><div class="language-js"><pre><code><span class="token comment">// utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token string">&#39;bar&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">import</span><span class="token punctuation">(</span>
   <span class="token comment">/* webpackExports: [&quot;default&quot;, &quot;foo&quot;] */</span>
   <span class="token string">&#39;./utils.js&#39;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>\u4EE5\u4E0B\u4EE3\u7801\u53EA\u4F1A\u628A\u53D8\u91CF foo \u548C \u9ED8\u8BA4\u5BFC\u51FA\u5BF9\u8C61\u6253\u5305\u5230 bundle.js \u4E2D\uFF0C\u5FFD\u7565 bar \u53D8\u91CF\u3002</p><h4 id="webpackinclude-webpackexclude" tabindex="-1"><code>webpackInclude / webpackExclude</code> <a class="header-anchor" href="#webpackinclude-webpackexclude" aria-hidden="true">#</a></h4><p>\u8FD9\u4E24\u4E2A\u53EA\u7528\u4E8E\u52A8\u6001\u8DEF\u5F84\u5BFC\u5165\u65F6\u4F7F\u7528\uFF0C\u8FDB\u884C\u4E00\u6B65\u7B5B\u9009\u5BFC\u5165\u6A21\u5757\u3002</p><ul><li>webpackInclude\uFF1A\u5728\u52A8\u6001\u8DEF\u5F84\u5BFC\u5165\u89E3\u6790\u8FC7\u7A0B\u4E2D\uFF0C\u7528\u4E8E\u5339\u914D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u3002\u53EA\u6709\u5339\u914D\u5230\u7684\u6A21\u5757\u624D\u4F1A\u88AB\u6253\u5305\u3002</li><li>webpackExclude\uFF1A\u5728\u52A8\u6001\u8DEF\u5F84\u5BFC\u5165\u89E3\u6790\u8FC7\u7A0B\u4E2D\uFF0C\u7528\u4E8E\u5339\u914D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u3002\u6240\u6709\u5339\u914D\u5230\u7684\u6A21\u5757\u90FD\u4E0D\u4F1A\u88AB\u6253\u5305\u3002</li></ul><div class="language-js"><pre><code><span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackInclude: /\\.json$/ */</span> <span class="token comment">// \u4F1A\u5339\u914D\u5230 ./locale/zh.json \u6587\u4EF6</span>
  <span class="token comment">/* webpackExclude: /\\.noimport\\.json$/ */</span> <span class="token comment">// \u4F1A\u6392\u9664\u5728 ./locale/zh.noimport.json \u6587\u4EF6</span>
  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>webpackInclude \u548C webpackExclude \u4E0D\u4F1A\u5F71\u54CD\u5230\u524D\u7F00\uFF0C\u53EA\u4F1A\u5F71\u54CD\u52A8\u6001\u90E8\u5206\uFF0C\u4F8B\u5982\u4E0A\u8FF0\u4F8B\u5B50\u4E2D\u7684 <code>./locale</code>\u3002</p><h4 id="webpackprefetch-webpackpreload" tabindex="-1"><code>webpackPrefetch / webpackPreload</code> <a class="header-anchor" href="#webpackprefetch-webpackpreload" aria-hidden="true">#</a></h4><p>Webpack 4.6.0\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u9884\u5148\u62C9\u53D6\uFF08prefetching\uFF09\u548C\u9884\u5148\u52A0\u8F7D\uFF08preloading\uFF09\u7684\u529F\u80FD\u3002\u4F7F\u7528\u8FD9\u4E9B\u58F0\u660E\u53EF\u4EE5\u4FEE\u6539\u6D4F\u89C8\u5668\u5904\u7406\u5F02\u6B65chunk\u7684\u65B9\u5F0F\u6765\u63D0\u5347\u52A0\u8F7D\u6027\u80FD\u3002</p><ul><li>webpackPrefetch\uFF1A\u544A\u8BC9\u6D4F\u89C8\u5668\u5C06\u6765\u53EF\u80FD\u9700\u8981\u8BE5\u8D44\u6E90\u6765\u8FDB\u884C\u67D0\u4E9B\u5BFC\u822A\u8DF3\u8F6C\u3002</li><li>webpackPreload\uFF1A\u544A\u8BC9\u6D4F\u89C8\u5668\u5728\u5F53\u524D\u5BFC\u822A\u671F\u95F4\u53EF\u80FD\u9700\u8981\u8BE5\u8D44\u6E90\u3002</li></ul><p>\u5B9E\u9645\u4E0A\u662F\u4E0E <code>&lt;link rel=&quot;&quot; as=&quot;script&quot; href=&quot;&quot;&gt;</code> \u6807\u7B7E\u4E00\u81F4\u7684\u6548\u679C\u3002</p><div class="language-js"><pre><code><span class="token comment">// prefetch \u4F7F\u7528\u9884\u5148\u62C9\u53D6\uFF0C\u8868\u793A\u8BE5\u6A21\u5757\u53EF\u80FD\u4EE5\u540E\u4F1A\u7528\u5230\u3002\u7136\u540E\u6D4F\u89C8\u5668\u4F1A\u5728\u7A7A\u95F2\u65F6\u95F4\u4E0B\u8F7D\u8BE5\u6A21\u5757\uFF0C\u4E14\u4E0B\u8F7D\u662F\u53D1\u751F\u5728\u7236\u7EA7chunk\u52A0\u8F7D\u5B8C\u6210\u4E4B\u540E\u3002</span>
<span class="token comment">// \u539F\u7406\u662F\u5185\u90E8\u4F1A\u521B\u5EFA &lt;link rel=&quot;prefetch&quot; as=&quot;script&quot; href=&quot;utilities.js&quot;&gt; \u6DFB\u52A0\u81F3\u9875\u9762\u7684\u5934\u90E8\u3002\u56E0\u6B64\u6D4F\u89C8\u5668\u4F1A\u5728\u7A7A\u95F2\u65F6\u95F4\u9884\u5148\u62C9\u53D6\u8BE5\u6587\u4EF6\u3002</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./utilities/divide</span><span class="token template-punctuation string">\`</span></span>
  <span class="token comment">/* webpackPrefetch: true */</span>
  <span class="token comment">/* webpackChunkName: &quot;utilities&quot; */</span>
<span class="token punctuation">)</span>

<span class="token comment">// preload \u9884\u5148\u52A0\u8F7D\uFF0C\u6307\u660E\u8BE5\u6A21\u5757\u9700\u8981\u7ACB\u5373\u88AB\u4F7F\u7528\u3002\u5F02\u6B65chunk\u4F1A\u548C\u7236\u7EA7chunk\u5E76\u884C\u52A0\u8F7D\u3002\u5982\u679C\u7236\u7EA7chunk\u5148\u4E0B\u8F7D\u597D\uFF0C\u9875\u9762\u5C31\u5DF2\u53EF\u663E\u793A\u4E86\uFF0C\u540C\u65F6\u7B49\u5F85\u5F02\u6B65chunk\u7684\u4E0B\u8F7D\u3002\u8FD9\u80FD\u5927\u5E45\u63D0\u5347\u6027\u80FD\u3002</span>
<span class="token comment">// \u539F\u7406\u662F\u5185\u90E8\u4F1A\u521B\u5EFA &lt;link rel=&quot;preload&quot; as=&quot;script&quot; href=&quot;utilities.js&quot;&gt;\u8D77\u4F5C\u7528\u3002\u4E0D\u5F53\u5730\u4F7F\u7528wepbackPreload\u4F1A\u635F\u5BB3\u6027\u80FD\uFF0C\u6240\u4EE5\u4F7F\u7528\u7684\u65F6\u5019\u8981\u5C0F\u5FC3\u3002</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./utilities/divide</span><span class="token template-punctuation string">\`</span></span>
  <span class="token comment">/* webpackPreload: true */</span>
  <span class="token comment">/* webpackChunkName: &quot;utilities&quot; */</span>
<span class="token punctuation">)</span>
</code></pre></div><p><strong>\u8BA4\u8BC6 <code>&lt;link ref=&quot;preload&quot;&gt;</code> \u548C <code>&lt;link ref=&quot;prefetch&quot;&gt;</code></strong></p><p>\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u4E00\u822C\u901A\u8FC7linkscr \u548C script \u6807\u7B7E\u6765\u5F15\u5165\u9875\u9762\u6E32\u67D3\u548C\u4EA4\u4E92\u6240\u4F9D\u8D56\u7684js\u548Ccss \u8D44\u6E90\uFF1B\u7136\u540E\u8FD9\u4E9B\u8D44\u6E90\u7531\u6D4F\u89C8\u5668\u51B3\u5B9A\u8D44\u6E90\u7684\u4F18\u5148\u7EA7\u8FDB\u884C\u52A0\u8F7D\u3001\u89E3\u6790\u3001\u6E32\u67D3\u7B49\u3002</p><p>\u7136\u800C\uFF0C\u5B9E\u9645\u573A\u666F\u4E0B\uFF0C\u4F1A\u6709\u5982\u4E0B\u9700\u6C42\uFF1A</p><ul><li>\u6709\u4E9B\u60C5\u51B5\u6211\u4EEC\u9700\u8981\u67D0\u4E9B\u4F9D\u8D56\u7684\u8D44\u6E90\u5728\u6D4F\u89C8\u5668\u8FDB\u5165\u6E32\u67D3\u7684\u4E3B\u8FDB\u7A0B\u4E4B\u524D\u5C31\u88AB\u52A0\u8F7D\uFF0C\u4EE5\u52A0\u5FEB\u9875\u9762\u6E32\u67D3\u901F\u5EA6</li><li>\u6216\u8005\u6709\u4E9B\u8D44\u6E90\u662F\u6211\u4EEC\u540E\u8FB9\u9700\u8981\u7684\uFF0C\u6211\u4EEC\u5E0C\u671B\u5728\u9700\u8981\u5B83\u7684\u65F6\u5019\u5728\u8FDB\u884C\u89E3\u6790\u548C\u6267\u884C\uFF0C\u6240\u4EE5\u5E76\u4E0D\u60F3\u8BA9\u5B83\u7684\u52A0\u8F7D\u5F71\u54CD\u5176\u4ED6\u8D44\u6E90\u7684\u52A0\u8F7D\u53CA\u9996\u5C4F\u6E32\u67D3\u65F6\u95F4\u3002</li><li>\u5E76\u4E14\u6D4F\u89C8\u5668\u9ED8\u8BA4 js\u7684\u52A0\u8F7D\u3001\u89E3\u6790\u548C\u7F16\u8BD1\u662F\u963B\u585E\u5F0F\u7684</li></ul><p>\u6240\u4EE5\u6D4F\u89C8\u5668\u57FA\u4E8E <code>link</code> \u548C <code>script</code> \u6807\u7B7E\u7684\u4E0D\u540C\u5C5E\u6027\u503C\uFF0C\u5411\u5F00\u53D1\u8005\u63D0\u4F9B\u4E86\u53EF\u4EE5\u66F4\u52A0\u7EC6\u7C92\u5EA6\u5730\u63A7\u5236\u6D4F\u89C8\u5668\u8D44\u6E90\u52A0\u8F7D\u884C\u4E3A\u7684\u65B9\u6CD5\u3002</p><ul><li>\u57FA\u4E8E link \u6807\u7B7E\u7684 <code>preload</code>\u3001 <code>prefetch</code>\u3001<code>DNS-prefetch</code>\u3001<code>preconnect</code>\u3001<code>prerender</code></li><li>\u57FA\u4E8E script \u6807\u7B7E\u7684 <code>async</code>\u3001<code>defer</code></li></ul><blockquote><p>\u4E0A\u8FF0\u8FD9\u4E9B\u90FD\u5C5E\u4E8E\u8D44\u6E90\u9884\u52A0\u8F7D(Resource Hints)\u7684\u65B9\u6CD5\u3002 \u5177\u4F53\u53C2\u8003\uFF1A <a href="https://juejin.cn/post/6844903545670467592" target="_blank" rel="noopener noreferrer">\u524D\u7AEF\u6027\u80FD\u4F18\u5316 - Resource Hints \u8D44\u6E90\u9884\u52A0\u8F7D</a><a href="https://zhuanlan.zhihu.com/p/48521680" target="_blank" rel="noopener noreferrer">\u4F7F\u7528 Preload/Prefetch \u4F18\u5316\u4F60\u7684\u5E94\u7528</a><a href="https://blog.csdn.net/luofeng457/article/details/88409903" target="_blank" rel="noopener noreferrer">preload\u4E0Eprefetch\u5BF9\u6BD4</a></p></blockquote><ol><li>preload</li></ol><p>\u5728\u7F51\u7EDC\u8BF7\u6C42\u4E2D\uFF0C\u9875\u9762\u901A\u5E38\u90FD\u4F1A\u7528\u5230\u67D0\u4E9B\u8D44\u6E90\uFF0C\u6BD4\u5982\uFF1A\u56FE\u7247\uFF0CJS\uFF0CCSS \u7B49\u7B49\uFF0C\u5728\u9875\u9762\u5B8C\u6210\u6E32\u67D3\u4E4B\u524D\u603B\u9700\u8981\u7B49\u5F85\u8FD9\u4E9B\u8D44\u6E90\u7684\u4E0B\u8F7D\u3002\u5982\u679C\u6211\u4EEC\u80FD\u505A\u5230\u9884\u5148\u52A0\u8F7D\u8D44\u6E90\uFF0C\u90A3\u5728\u8D44\u6E90\u6267\u884C\u7684\u65F6\u5019\u5C31\u4E0D\u5FC5\u7B49\u5F85\u7F51\u7EDC\u7684\u5F00\u9500\u3002</p><p>\u6240\u4EE5 preload \u5C31\u662F\u4E00\u79CD\u9884\u52A0\u8F7D\u8D44\u6E90\u7684\u65B9\u5F0F\uFF0C\u5B83\u5411\u6D4F\u89C8\u5668\u58F0\u660E\u4E00\u4E2A\u9700\u8981\u9884\u52A0\u8F7D\u7684\u8D44\u6E90\uFF0C\u6D4F\u89C8\u5668\u5C31\u4F1A\u63D0\u524D\u52A0\u8F7D\u8BE5\u8D44\u6E90\uFF0C\u8FDB\u884C\u7F13\u5B58\uFF0C\u5F53\u8D44\u6E90\u771F\u6B63\u88AB\u4F7F\u7528\u7684\u65F6\u5019\u7ACB\u5373\u6267\u884C\uFF0C\u5C31\u65E0\u9700\u7B49\u5F85\u7F51\u7EDC\u7684\u6D88\u8017\u3002</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- \u5B57\u4F53\u88AB\u9690\u85CF\u5728css\u4E2D\u95F4\uFF0C\u6D4F\u89C8\u5668\u6709\u65F6\u5019\u4E0D\u80FD\u5F88\u597D\u7684\u5C06\u4ED6\u4EEC\u653E\u5165\u9884\u52A0\u8F7D\u5668\u4E2D\uFF0C\u4E3A\u6B64\u6211\u4EEC\u53EF\u4EE5\u501F\u52A9 preload --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>font.woff<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>font<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>font/woff<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- preload\u52A0\u8F7D\u7684js\u811A\u672C\u5176\u52A0\u8F7D\u548C\u6267\u884C\u7684\u8FC7\u7A0B\u662F\u5206\u79BB\u7684\u3002\u5373preload\u4F1A\u9884\u52A0\u8F7D\u76F8\u5E94\u7684\u811A\u672C\u4EE3\u7801\uFF0C\u5F85\u5230\u9700\u8981\u65F6\u81EA\u884C\u8C03\u7528\uFF1B --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.js<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">handleOnload</span><span class="token punctuation">&quot;</span></span></span> <span class="token special-attr"><span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">handlepreloadError</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--  css\u52A0\u8F7D\u540E\u7ACB\u5373\u751F\u6548 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test.css<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">handleSheetOnload</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u5176\u4E2D\uFF0Crel\u5C5E\u6027\u503C\u4E3Apreload\uFF1Bas\u5C5E\u6027\u7528\u4E8E\u89C4\u5B9A\u8D44\u6E90\u7684\u7C7B\u578B\uFF0C\u5E76\u6839\u636E\u8D44\u6E90\u7C7B\u578B\u8BBE\u7F6EAccep\u8BF7\u6C42\u5934\uFF0C\u4EE5\u4FBF\u80FD\u591F\u4F7F\u7528\u6B63\u5E38\u7684\u7B56\u7565\u53BB\u8BF7\u6C42\u5BF9\u5E94\u7684\u8D44\u6E90\uFF1Bhref\u4E3A\u8D44\u6E90\u8BF7\u6C42\u5730\u5740\uFF1Bonload\u548Conerror\u5219\u5206\u522B\u662F\u8D44\u6E90\u52A0\u8F7D\u6210\u529F\u548C\u5931\u8D25\u540E\u7684\u56DE\u8C03\u51FD\u6570\uFF1B</p><p>\u5176\u4E2Das\u7684\u503C\u53EF\u4EE5\u53D6style\u3001script\u3001image\u3001font\u3001fetch\u3001document\u3001audio\u3001video\u7B49\uFF1B\u5982\u679Cas\u5C5E\u6027\u88AB\u7701\u7565\uFF0C\u90A3\u4E48\u8BE5\u8BF7\u6C42\u5C06\u4F1A\u5F53\u505A\u5F02\u6B65\u8BF7\u6C42\u5904\u7406\uFF1B</p><p>\u53E6\u5916\uFF0C\u5728\u8BF7\u6C42\u8DE8\u57DF\u8D44\u6E90\u65F6\u63A8\u8350\u52A0\u4E0Acrossorigin\u5C5E\u6027\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u5BFC\u81F4\u8D44\u6E90\u7684\u4E8C\u6B21\u52A0\u8F7D\uFF08\u5C24\u5176\u662Ffont\u8D44\u6E90\uFF09\uFF1B</p><p>preload\u7279\u70B9</p><ul><li>preload\u52A0\u8F7D\u7684\u8D44\u6E90\u662F\u5728\u6D4F\u89C8\u5668\u6E32\u67D3\u673A\u5236\u4E4B\u524D\u8FDB\u884C\u5904\u7406\u7684\uFF0C\u5E76\u4E14<strong>\u4E0D\u4F1A\u963B\u585E\u9875\u9762\u7684onload\u4E8B\u4EF6</strong>\uFF0C\u8FD9\u662F\u5176\u4E0E\u4F17\u4E0D\u540C\u7684\u5730\u65B9\uFF1B</li><li>preload\u53EF\u4EE5\u901A\u8FC7as\u5C5E\u6027\u652F\u6301\u52A0\u8F7D\u591A\u79CD\u7C7B\u578B\u7684\u8D44\u6E90\uFF0C\u5E76\u4E14\u53EF\u4EE5\u52A0\u8F7D\u8DE8\u57DF\u8D44\u6E90\uFF1B</li><li>preload\u52A0\u8F7D\u7684js\u811A\u672C\u5176<strong>\u52A0\u8F7D\u548C\u6267\u884C\u7684\u8FC7\u7A0B\u662F\u5206\u79BB\u7684</strong>\u3002\u5373 preload\u4F1A\u9884\u52A0\u8F7D\u76F8\u5E94\u7684\u811A\u672C\u4EE3\u7801\uFF0C\u5F85\u5230\u9700\u8981\u65F6\u81EA\u884C\u8C03\u7528\uFF1B</li></ul><ol start="2"><li>prefetch</li></ol><p>prefetch \u662F\u4E00\u79CD\u5229\u7528\u6D4F\u89C8\u5668\u7684\u7A7A\u95F2\u65F6\u95F4\u52A0\u8F7D\u9875\u9762\u5C06\u6765\u53EF\u80FD\u7528\u5230\u7684\u8D44\u6E90\u7684\u4E00\u79CD\u673A\u5236\uFF1B\u901A\u5E38\u53EF\u4EE5\u7528\u4E8E\u52A0\u8F7D\u975E\u9996\u9875\u7684\u5176\u4ED6\u9875\u9762\u6240\u9700\u8981\u7684\u8D44\u6E90\uFF0C\u5E76\u4E14\u5C06\u5176\u653E\u5165\u7F13\u5B58\u81F3\u5C115\u5206\u949F\uFF08\u65E0\u8BBA\u8D44\u6E90\u662F\u5426\u53EF\u4EE5\u7F13\u5B58\uFF09\uFF0C\u4EE5\u4FBF\u52A0\u5FEB\u540E\u7EED\u9875\u9762\u7684\u9996\u5C4F\u901F\u5EA6\uFF1B</p><p>\u5B83\u7684\u7279\u70B9\u662F\u5F53\u9875\u9762\u8DF3\u8F6C\u65F6\uFF0C\u672A\u5B8C\u6210\u7684prefetch\u8BF7\u6C42\u4E0D\u4F1A\u88AB\u4E2D\u65AD\uFF1B</p><p>\u4E24\u8005\u533A\u522B\uFF1A</p><ul><li>preload <ul><li>\u662F\u544A\u8BC9\u6D4F\u89C8\u5668\u9884\u5148\u8BF7\u6C42<strong>\u5F53\u524D\u9875\u9762</strong>\u9700\u8981\u7684\u8D44\u6E90\uFF0C\u5E76\u4E14\u6D4F\u89C8\u5668\u4E00\u5B9A\u4F1A\u52A0\u8F7D\u8FD9\u4E9B\u8D44\u6E90\uFF08js \u8D44\u6E90\u9664\u5916\uFF09\u3002</li><li>\u9700\u8981\u4F7F\u7528as\u5C5E\u6027\u6307\u5B9A\u7279\u5B9A\u7684\u8D44\u6E90\u7C7B\u578B\u4EE5\u4FBF\u6D4F\u89C8\u5668\u4E3A\u5176\u5206\u914D\u4E00\u5B9A\u7684\u4F18\u5148\u7EA7\uFF0C\u5E76\u80FD\u591F\u6B63\u786E\u52A0\u8F7D\u8D44\u6E90\uFF1B</li><li>\u4E00\u65E6\u9875\u9762\u5173\u95ED\u4E86\uFF0C\u5B83\u5C31\u4F1A\u7ACB\u5373\u505C\u6B62 preload \u83B7\u53D6\u8D44\u6E90\u3002</li></ul></li><li>prefetch <ul><li>\u662F\u544A\u8BC9\u6D4F\u89C8\u5668\u7528\u6237\u9884\u8BF7\u6C42**\u5C06\u6765\u67D0\u4E2A\u9875\u9762\uFF08\u975E\u672C\u9875\u9762\uFF09**\u53EF\u80FD\u4F7F\u7528\u5230\u7684\u8D44\u6E90\uFF0C\u6D4F\u89C8\u5668\u4F1A\u5728\u7A7A\u95F2\u7684\u60C5\u51B5\u4E0B\u9884\u52A0\u8F7D\u8FD9\u4E9B\u8D44\u6E90\uFF0C\u4F46\u6D4F\u89C8\u5668\u5982\u679C\u5C06\u6765\u4E0D\u8DF3\u8F6C\u5230\u8BE5\u9875\u9762\uFF0C\u90A3\u8FD9\u4E9B\u8D44\u6E90\u4E5F\u5C31\u4E0D\u4E00\u5B9A\u4F1A\u6267\u884C\u3002</li><li>\u65E0\u8BBA\u8D44\u6E90\u662F\u5426\u53EF\u4EE5\u7F13\u5B58\uFF0Cprefecth \u9884\u8BF7\u6C42\u7684\u8D44\u6E90\u90FD\u4F1A\u5B58\u50A8\u5728 <code>net-stack cache</code> \u4E2D\u81F3\u5C115\u5206\u949F\uFF1B</li><li>\u4E00\u65E6prefetch \u53D1\u8D77\u4E86\u8BF7\u6C42\uFF0C\u5373\u4F7F\u9875\u9762\u5173\u95ED\uFF0C\u4E5F\u4E0D\u4F1A\u4E2D\u65AD\u3002</li></ul></li></ul><blockquote><p>Chrome\u6709\u56DB\u79CD\u7F13\u5B58\uFF1Ahttp cache\u3001memory cache\u3001Service Worker cache\u548C http2.0 \u7684 Push cache</p></blockquote><ol start="3"><li>async / defer</li></ol><p>\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u5F53\u6D4F\u89C8\u5668\u5728\u89E3\u6790HTML\u6E90\u6587\u4EF6\u65F6\u5982\u679C\u9047\u5230script\u6807\u7B7E\uFF0C\u90A3\u4E48\u89E3\u6790\u8FC7\u7A0B\u4F1A\u6682\u505C\u3002\u5982\u679C\u662F\u5185\u8054\u811A\u672C\u4F1A\u7ACB\u5373\u6267\u884C\uFF0C\u5982\u679C\u6709src\u5C5E\u6027\u5219\u53D1\u9001\u8BF7\u6C42\u6765\u4E0B\u8F7Dscript\u6587\u4EF6\uFF0C\u53EA\u6709script\u5B8C\u5168\u4E0B\u8F7D\u5E76\u6267\u884C\u540E\u624D\u4F1A\u7EE7\u7EED\u6267\u884CDOM\u89E3\u6790\u3002\u5728\u811A\u672C\u4E0B\u8F7D\u548C\u6267\u884C\u8FC7\u7A0B\u4E2D\uFF0C\u6D4F\u89C8\u5668\u662F\u88AB\u963B\u6B62\u505A\u5176\u4ED6\u6709\u7528\u7684\u5DE5\u4F5C\u7684\uFF0C\u5305\u62EC\u89E3\u6790HTML\uFF0C\u6267\u884C\u5176\u4ED6\u811A\u672C\uFF0C\u6216\u8005\u6E32\u67D3CSS\u5E03\u5C40\u7B49\u3002</p><p>\u4F46\u662F\u73B0\u5728\uFF0Cscript\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0async\u6216\u8005defer\u5C5E\u6027\u6765\u8BA9\u811A\u672C\u4E0D\u5FC5\u540C\u6B65\u6267\u884C\uFF0C\u963B\u585E\u6D4F\u89C8\u5668\u5DE5\u4F5C\u3002</p><div class="language-js"><pre><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> \u6CA1\u6709 defer \u6216 <span class="token keyword">async</span>\uFF0C\u6D4F\u89C8\u5668\u4F1A\u7ACB\u5373\u52A0\u8F7D\u5E76\u6267\u884C\u6307\u5B9A\u7684\u811A\u672C\uFF0C\u201C\u7ACB\u5373\u201D\u6307\u7684\u662F\u5728\u6E32\u67D3\u8BE5 script \u6807\u7B7E\u4E4B\u4E0B\u7684\u6587\u6863\u5143\u7D20\u4E4B\u524D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u4E0D\u7B49\u5F85\u540E\u7EED\u8F7D\u5165\u7684\u6587\u6863\u5143\u7D20\uFF0C\u8BFB\u5230\u5C31\u52A0\u8F7D\u5E76\u6267\u884C\u3002 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;script.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> \u6709 defer\uFF0C\u52A0\u8F7D\u540E\u7EED\u6587\u6863\u5143\u7D20\u7684\u8FC7\u7A0B\u5C06\u548C script<span class="token punctuation">.</span>js \u7684\u52A0\u8F7D\u5E76\u884C\u8FDB\u884C\uFF08\u5F02\u6B65\uFF09\uFF0C\u4F46\u662F script<span class="token punctuation">.</span>js \u7684\u6267\u884C\u8981\u5728\u6240\u6709\u5143\u7D20\u89E3\u6790\u5B8C\u6210\u4E4B\u540E\uFF0CDOMContentLoaded \u4E8B\u4EF6\u89E6\u53D1\u4E4B\u524D\u5B8C\u6210\u3002 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script defer src<span class="token operator">=</span><span class="token string">&quot;myscript.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> \u6709 <span class="token keyword">async</span>\uFF0C\u52A0\u8F7D\u548C\u6E32\u67D3\u540E\u7EED\u6587\u6863\u5143\u7D20\u7684\u8FC7\u7A0B\u5C06\u548C script<span class="token punctuation">.</span>js \u7684\u52A0\u8F7D\u4E0E\u6267\u884C\u5E76\u884C\u8FDB\u884C\uFF08\u5F02\u6B65\uFF09\u3002 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script <span class="token keyword">async</span> src<span class="token operator">=</span><span class="token string">&quot;script.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p>\u53EF\u4EE5\u4F7F\u7528 defer \u52A0\u8F7D\u811A\u672C\u5728 head \u672B\u5C3E\uFF0C\u8FD9\u6BD4\u5C06\u811A\u672C\u653E\u5728 body \u5E95\u90E8\u6548\u679C\u6765\u7684\u66F4\u597D</p></blockquote><p>\u4E24\u8005\u7684\u5171\u540C\u70B9\uFF1A</p><p>async\u548Cdefer\u6807\u6CE8\u7684script\u5728\u4E0B\u8F7D\u65F6\u5E76\u4E0D\u4F1A\u963B\u585E\u6D4F\u89C8\u5668\u5176\u5B83\u5DE5\u4F5C\uFF0C\u5982HTML\u89E3\u6790\uFF0C\u5E76\u4E14\u4E24\u8005\u540C\u6837\u652F\u6301onload\u4E8B\u4EF6\u56DE\u8C03\u6765\u89E3\u51B3\u9700\u8981\u8BE5\u811A\u672C\u6765\u6267\u884C\u7684\u521D\u59CB\u5316\u3002</p><p>\u4E24\u8005\u7684\u533A\u5206\u5728\u4E8E\u811A\u672C\u6267\u884C\u65F6\u673A\u4E0D\u540C\uFF1A</p><ul><li>defer\uFF1A\u8868\u793A\u4E0B\u8F7D\u540E\u5148\u4E0D\u6267\u884C\uFF0C\u7B49\u5230\u6D4F\u89C8\u5668\u5BF9\u6587\u6863\u89E3\u6790\u5B8C\u6210\u540E\uFF0C\u4E14\u5728\u89E6\u53D1 DOMContentLoaded \u4E8B\u4EF6\u524D\u6267\u884C\u8BE5\u811A\u672C\u3002\u5E76\u4E14\u786E\u4FDD\u591A\u4E2Adefer\u811A\u672C\u6309\u5176\u5728HTML\u9875\u9762\u4E2D\u7684\u51FA\u73B0\u987A\u5E8F\u4F9D\u6B21\u6267\u884C\u3002\u663E\u7136 defer \u662F\u6700\u63A5\u8FD1\u6211\u4EEC\u5BF9\u4E8E\u5E94\u7528\u811A\u672C\u52A0\u8F7D\u548C\u6267\u884C\u7684\u8981\u6C42\u7684\u3002</li><li>async\uFF1A\u8868\u793A\u4E0B\u8F7D\u540E\u7ACB\u5373\u6267\u884C\uFF0C\u867D\u7136\u4E0B\u8F7D\u65F6\u4E0D\u963B\u585Ehtml\u7684\u89E3\u6790\uFF0C\u4F46\u6267\u884C\u65F6\u4F1A\u963B\u585E\u6D4F\u89C8\u5668\u5DE5\u4F5C\uFF0C\u5982HTML\u89E3\u6790\u3002\u5E76\u4E14\u591A\u4E2Aasync\u811A\u672C\u65E0\u6CD5\u4FDD\u8BC1\u6309\u5176\u5728\u9875\u9762\u4E2D\u7684\u51FA\u73B0\u987A\u5E8F\u6267\u884C\u3002\u6240\u4EE5 async \u5BF9\u4E8E\u5E94\u7528\u811A\u672C\u7684\u7528\u5904\u4E0D\u5927\uFF0C\u56E0\u4E3A\u5B83\u5B8C\u5168\u4E0D\u8003\u8651\u4F9D\u8D56\uFF08\u54EA\u6015\u662F\u6700\u4F4E\u7EA7\u7684\u987A\u5E8F\u6267\u884C\uFF09</li></ul><p>defer \u4E0E preload \u7684\u533A\u522B</p><ul><li>defer \u53EA\u4F5C\u7528\u4E8E\u811A\u672C\u6587\u4EF6\uFF0C\u5BF9\u4E8E\u6837\u5F0F\u3001\u56FE\u7247\u7B49\u8D44\u6E90\u5C31\u65E0\u80FD\u4E3A\u529B\u4E86\uFF0C\u5E76\u4E14\u5728 DOMContentLoaded \u4E8B\u4EF6\u524D defer \u52A0\u8F7D\u7684\u8D44\u6E90\u662F\u8981\u6267\u884C\u7684\u3002</li><li>preload \u8D44\u6E90\u7684\u4E0B\u8F7D\u548C\u6267\u884C\u662F\u5206\u5F00\u7684\uFF0C\u5F85\u771F\u6B63\u4F7F\u7528\u5230\u624D\u4F1A\u6267\u884C\u811A\u672C\u6587\u4EF6\u3002</li></ul><blockquote><p>webpackChunkName \u9B54\u6CD5\u6CE8\u91CA\u4E3A\u4EC0\u4E48\u4F1A\u5931\u6548\uFF1F \u68C0\u67E5\u4F60\u7684.babelrc\u548Cwebpack.config.js\uFF0C\u6709\u6CA1\u6709\u79FB\u9664\u6CE8\u91CA\u7684\u914D\u7F6E\u3002\u9B54\u6CD5\u6CE8\u91CA\uFF0C\u5F53\u7136\u6CE8\u91CA\u5F97\u5B58\u5728\u624D\u80FD\u751F\u6548\u3002\u6240\u4EE5.babelrc\u91CC\u4E0D\u80FD\u6709comments: false\uFF0Cwebpack\u7684uglifyjs\u7B49\u63D2\u4EF6\u4E2D\u4E5F\u4E0D\u80FD\u8BBE\u7F6Ecomments: false\u548CextractComments\u3002</p></blockquote><h2 id="\u4EE3\u7801\u63D0\u53D6" tabindex="-1">\u4EE3\u7801\u63D0\u53D6 <a class="header-anchor" href="#\u4EE3\u7801\u63D0\u53D6" aria-hidden="true">#</a></h2><p><code>webpack </code>\u4F5C\u4E3A\u6253\u5305\u5DE5\u5177\u57FA\u672C\u7684\u601D\u60F3\u662F\u5C06\u5404\u4E2A\u5206\u6563\u7684\u6709\u4F9D\u8D56\u5173\u7CFB\u7684\u6A21\u5757\u6253\u5305\u6210\u4E00\u4E2A\u6587\u4EF6\uFF0C\u6BD4\u5982\u5BF9 CSS \u7684\u5904\u7406\uFF0C\u6700\u7EC8\u5F97\u5230\u4E00\u4E2A\u72EC\u7ACB\u7684 <code>CSS</code> \u6587\u4EF6\u901A\u8FC7 link \u6807\u7B7E\u5D4C\u5165\u4F7F\u7528\u3002</p><p>\u4F46\u5728\u4F7F\u7528 <code>webpack</code> \u6253\u5305 <code>JS</code> \u4EE3\u7801\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u66F4\u591A\u8003\u8651\u7684\u662F\u76F8\u53CD\u601D\u7EF4\u65B9\u5411\uFF1A\u662F\u5982\u4F55\u907F\u514D\u5C06\u5DE5\u7A0B\u5185\u6240\u6709\u7684JS\u4EE3\u7801\u6253\u5305\u6784\u5EFA\u6210\u4E00\u4E2A\u4F53\u79EF\u5F6D\u5927 <code>bundle</code>\uFF0C\u8BA9 <code>HTML</code>\u5F15\u7528\uFF0C\u8FD9\u6837\u4F1A\u9020\u6210\u7F51\u7EDC\u8BF7\u6C42\u65F6\u95F4\u8FC7\u957F\uFF0C\u9875\u9762\u957F\u65F6\u95F4\u65E0\u54CD\u5E94\u7684\u60C5\u51B5\u3002</p><p>\u6211\u4EEC\u9700\u8981\u5728\u5C06\u5404\u4E2A\u5206\u6563\u7684\u6A21\u5757\u8FDB\u884C\u6253\u5305\uFF0C\u53C8\u8981\u907F\u514D\u5355\u4E2A bundle \u4F53\u79EF\u8FC7\u5927\u4E4B\u95F4\u53D6\u5F97\u5E73\u8861\uFF0C\u5C31\u662F\u8981\u5229\u7528 webpack \u8FDB\u884C\u5408\u7406\u7684\u4EE3\u7801\u63D0\u51FA\uFF0C\u63A7\u5236\u8F93\u51FA\u4E00\u4E2A\u6216\u591A\u4E2A bundle\u3002</p><p>\u90A3\u5177\u4F53\u5982\u4F55\u63D0\u53D6\uFF0C\u63D0\u53D6\u54EA\u4E9B\u4EE3\u7801\u5462\uFF1F\u6211\u4EEC\u5148\u8981\u719F\u6089\u5728\u4E00\u4E2A\u524D\u7AEF\u9879\u76EE\u4E2D\uFF0C\u4F1A\u5305\u62EC\u54EA\u4E9B\u7C7B\u578B\u7684\u4EE3\u7801\uFF1A</p><p>\u73B0\u4EE3\u524D\u7AEF\u9879\u76EE\u4E2D\uFF0C\u5728\u5F00\u53D1\u9636\u6BB5\u4F1A\u4EA7\u751F\u4E09\u7C7B\u4EE3\u7801\uFF1A</p><ol><li>\u6A21\u677F\u4EE3\u7801\uFF0C\u5373\u811A\u624B\u67B6\u521D\u59CB\u5316\u9879\u76EE\u540E\u7684\u4EE3\u7801\uFF0C\u5982 <code>vue-cli / create-react-app</code></li><li>\u4F9D\u8D56\u4EE3\u7801\uFF0C\u5373\u4F7F\u7528 <code>npm install package</code> \u5B89\u88C5\u7684\u7B2C\u4E09\u65B9 <code>npm</code> \u4F9D\u8D56\u4EE3\u7801</li><li>\u9884\u5904\u7406\u4EE3\u7801\uFF0C\u5373\u5B9E\u9645\u7684\u4E1A\u52A1\u6E90\u4EE3\u7801\uFF0C\u8FD9\u4E9B\u4EE3\u7801\u53EF\u80FD\u9700\u8981\u7ECF\u8FC7\u7F16\u8BD1\uFF0C\u5982\u9700\u8981 <code>babel</code> <code>less</code> \u8FDB\u884C\u5904\u7406</li></ol><p>\u5728\u751F\u4EA7\u9636\u6BB5\uFF0C\u6700\u7EC8\u7684\u4E0A\u7EBF\u7684\u4EE3\u7801\u4E2D\u540C\u6837\u4F1A\u6709\u4E8C\u7C7B\u4EE3\u7801\uFF1A</p><ol><li>\u8FD0\u884C\u65F6\u4EE3\u7801\uFF0C\u5305\u62EC\u6846\u67B6\u6216\u5DE5\u5177\u6CE8\u5165\u7684\u5FC5\u8981\u7684\u8FD0\u884C\u65F6\u4EE3\u7801\u3002\u5982 <code>vue</code> \u6846\u67B6\u4F1A\u6CE8\u5165\u8FD0\u884C\u65F6\u4EE3\u7801\u3001<code>webpack</code> \u6253\u5305\u6784\u5EFA\u4E2D\u4F1A\u6CE8\u5165\u8FD0\u884C\u65F6\u4EE3\u7801(<code>__webpack_require__</code>\u7B49)\u3001<code>babel</code> \u8F6C\u8BD1\u4E2D\u4F1A\u6CE8\u5165\u5411\u4E0B\u517C\u5BB9\u7248\u672C\u7684\u8FD0\u884C\u65F6\u4EE3\u7801\uFF0C\u4E5F\u7ECF\u5E38\u53EB\u4F5C<strong>\u8FD0\u884C\u65F6</strong></li><li>\u6E90\u4EE3\u7801\uFF1A\u7ECF\u8FC7\u7F16\u8BD1\u7684\uFF0C\u6D4F\u89C8\u5668\u5B9E\u9645\u53EF\u7528\u7684\u4E1A\u52A1\u4EE3\u7801</li></ol><p>\u5982\u4E0A\u9762\u6240\u8BF4\uFF0C\u5728\u9879\u76EE\u5B9E\u9645\u8FD0\u884C\u4E2D\uFF0C\u4E0D\u7BA1\u662F\u5F00\u53D1\u73AF\u5883\uFF0C\u8FD8\u662F\u751F\u4EA7\u73AF\u5883\uFF0C\u6211\u4EEC\u90FD\u4E0D\u5E94\u8BE5\u628A\u6240\u6709\u4EE3\u7801\u90FD\u6253\u5305\u6210\u4E00\u4E2A <code>bundle.js</code>\u63D2\u5165\u5230\u9879\u76EE HTML\uFF0C\u8FD9\u6837\u4F1A\u5BFC\u81F4\u6574\u4E2A bundle \u4F53\u79EF\u5F88\u5927\uFF0C\u5F71\u54CD\u9875\u9762\u52A0\u8F7D\u901F\u5EA6\u3002</p><p>\u6240\u4EE5\u5728\u63A7\u5236 bundle \u5927\u5C0F\u548C http \u8BF7\u6C42\u6570\u4E4B\u95F4\u627E\u5230\u4E00\u4E2A\u5E73\u8861\uFF0C\u6240\u4EE5\u4EE3\u7801\u63D0\u53D6\u7684\u4E00\u822C\u539F\u5219\uFF1A</p><ol><li>\u4F1A\u628A\u4F9D\u8D56\u4EE3\u7801\u6784\u5EFA\u6210\u4E00\u4E2A\u6216\u51E0\u4E2A<code>vender bundle</code>\uFF0C\u5982 <code>vue / vue-router / vuex</code> \u6784\u5EFA\u6210\u72EC\u7ACB\u7684\u6587\u4EF6\u3002</li><li>\u4F1A\u628A\u5404\u81EA\u6846\u67B6\u6216\u5DE5\u5177\u81EA\u5DF1\u7684\u8FD0\u884C\u65F6\u4EE3\u7801\u63D0\u53D6\u4E3A\u72EC\u7ACB\u6587\u4EF6\uFF0C\u907F\u514D\u91CD\u590D\uFF0C\u5982 <code>webpack</code> \u9ED8\u8BA4\u4F1A\u5728\u6BCF\u4E2A\u6784\u5EFA\u7684 bundle \u4E2D\u90FD\u6CE8\u5165\u5927\u81F4\u76F8\u540C\u7684\u8FD0\u884C\u4EE3\u7801\uFF0C\u6B64\u65F6\u9700\u8981\u5C06\u5176\u63D0\u53D6\u4E3A\u4E00\u4E2A\u516C\u7528\u7684\u8FD0\u884C\u65F6\u6587\u4EF6\uFF0C\u4EE5\u53CA\u5982 <code>@babel/plugin-transform-runtime</code>\u4EE5\u53CA<code>@babel/runtime</code>\u6240\u505A\u7684\u4E8B\uFF0C\u5C06 babel \u8FD0\u884C\u65F6\u4EE3\u7801\u4F7F\u7528\u516C\u5171\u6A21\u5757\u6309\u9700\u5F15\u7528\u3002</li><li>\u5373\u4F7F\u6838\u5FC3\u4E1A\u52A1\u4EE3\u7801\uFF0C\u4E5F\u6709\u90E8\u5206\u6A21\u5757\u4F1A\u88AB\u591A\u4E2A\u6A21\u5757\u5BFC\u5165\u4F7F\u7528\uFF0C\u6B64\u7C7B\u6A21\u5757\u9700\u8981\u89C6\u60C5\u51B5\u63D0\u53D6\u516C\u5171\u4EE3\u7801\u3002</li></ol><p><code>webpack</code> \u63D0\u53D6\u4EE3\u7801\u6709\u4EE5\u4E0B\u51E0\u4E2A\u9014\u7ECF\uFF1A</p><ol><li>\u5728\u5165\u53E3 <code>entry</code> \u4E2D\u914D\u7F6E\uFF0C\u5206\u79BB bundle</li><li><code>import()</code>\u52A8\u6001\u61D2\u52A0\u8F7D\u4E5F\u4F1A\u6253\u5305\u6210\u72EC\u7ACB\u7684 bundle</li><li><code>externals</code>\u963B\u6B62\u5C06\u67D0\u4E9B\u4F9D\u8D56\u5305\u6253\u5305\u8FDB bundle \u4E2D\uFF0C\u800C\u662F\u901A\u8FC7\u5E94\u7528\u8FD0\u884C\u65F6\u4ECE\u5916\u90E8\u83B7\u53D6\u8FD9\u4E9B<em>\u6269\u5C55\u4F9D\u8D56(external dependencies)</em></li><li><code>optimization.splitChunks</code> \u914D\u7F6E\u7F13\u5B58\u7EC4<em>cacheGroup</em>\uFF0C\u4E3B\u52A8\u5207\u5272 bundle</li><li><code>DllPlugin</code> \u548C <code>DllReferencePlugin</code> \u5B9E\u73B0\u4E86\u62C6\u5206 bundle\u3002<code>DLL</code> \u4E00\u8BCD\u4EE3\u8868\u5FAE\u8F6F\u6700\u521D\u4F7F\u7528\u7684\u6280\u672F<strong>\u52A8\u6001\u94FE\u63A5\u5E93</strong>\u3002</li><li><code>runtimeChunk</code> \u8FD0\u884C\u65F6\u4EE3\u7801\u62BD\u79BB</li><li><code>IgnorePlugin</code>\u5FFD\u7565\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u4E2D\u90E8\u5206\u6307\u5B9A\u76EE\u5F55\u7684\u4EE3\u7801</li></ol><h3 id="entry-\u5206\u79BB-bundle" tabindex="-1">entry \u5206\u79BB bundle <a class="header-anchor" href="#entry-\u5206\u79BB-bundle" aria-hidden="true">#</a></h3><p>\u4E3B\u8981\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p><ul><li>\u591A\u5165\u53E3\u914D\u7F6E\u5206\u79BB bundle</li><li>webpack@5 \u5B9E\u73B0\u5165\u53E3\u5171\u4EAB\u4F9D\u8D56</li></ul><p>\u591A\u5165\u53E3\u914D\u7F6E\u4E00\u822C\u7528\u4E8E\u5206\u79BB\u4E24\u4E2A\u8F83\u4E3A\u72EC\u7ACB\u6A21\u5757\uFF0C\u6BD4\u5982\u591A\u9875\u5E94\u7528\u3001\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7B49\u3002</p><p>\u4F8B\u5B501\uFF1A</p><p>\u6709\u4E24\u4E2A\u6A21\u5757\u6587\u4EF6 <code>module-1.js</code> \u548C <code>module-2.js</code>\uFF0C\u539F\u672C\u90FD\u5728 <code>index.js</code>\u4E2D\u5BFC\u5165\u4E00\u8D77\u6253\u5305\u6784\u5EFA\u3002</p><div class="language-js"><pre><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> module_1 <span class="token keyword">from</span> <span class="token string">&#39;./module-1.js&#39;</span>
<span class="token keyword">import</span> module_2 <span class="token keyword">from</span> <span class="token string">&#39;./module-2.js&#39;</span>
</code></pre></div><p>\u914D\u7F6E\u6587\u4EF6</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u4E3A\u4E86\u5206\u79BB\u4E24\u4E2A\u6A21\u5757\u6587\u4EF6\u7684\u6784\u5EFA\u7ED3\u679C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6539\u4E3A\u4EE5\u4E0B\u914D\u7F6E\uFF1A</p><div class="language-"><pre><code>module.exports = {
  mode: &#39;none&#39;,
-  entry: &#39;./index.js&#39;,
+  entry: {
+    module_1: &#39;./module-1.js&#39;,  
+    module_2: &#39;./module-2.js&#39;,  
}
  output: {
    filename: &#39;[name].bundle.js&#39;,
  },
}
</code></pre></div><p>\u6B64\u65F6\u4F1A\u4EA7\u751F\u4E24\u4E2A\u6784\u5EFA\u7ED3\u679C\u63D2\u5165\u5230 html \u4E2D\uFF1A<code>module_1.bundle.js / module_2.bundle.js</code>\u3002</p><p>\u8FD9\u79CD\u573A\u666F\u591A\u7528\u4E8E\u53EF\u4EE5\u7528\u4E8E\u591A\u9875\u5E94\u7528\uFF1A</p><blockquote><p>\u6BCF\u5F53\u9875\u9762\u8DF3\u8F6C\u65F6\uFF0C\u670D\u52A1\u5668\u5C06\u4E3A\u4F60\u83B7\u53D6\u4E00\u4E2A\u65B0\u7684 HTML \u6587\u6863\u3002\u9875\u9762\u91CD\u65B0\u52A0\u8F7D\u65B0\u6587\u6863\uFF0C\u5E76\u4E14\u8D44\u6E90\u88AB\u91CD\u65B0\u4E0B\u8F7D</p></blockquote><div class="language-js"><pre><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">userpage</span><span class="token operator">:</span> <span class="token string">&#39;./pages/user.js&#39;</span><span class="token punctuation">,</span>  
  <span class="token literal-property property">rolepage</span><span class="token operator">:</span> <span class="token string">&#39;./pages/role.js&#39;</span><span class="token punctuation">,</span> 
</code></pre></div><p>\u4F46\u73B0\u4EE3\u524D\u7AEF\u5E94\u7528\u591A\u4E3A\u5355\u9875\u5E94\u7528(SPA)\uFF0C\u6B64\u573A\u666F\u914D\u7F6E\u8F83\u5C11\u89C1\u3002</p><p>\u5E76\u4E14\u5728\u5165\u53E3\u5904\u5206\u5305\uFF0Cwebpack#4\u4E2D\u5E76\u4E0D\u597D\u5904\u7406\u591A\u4E2A\u5165\u53E3\u7684\u5171\u540C\u4F9D\u8D56\u3002</p><div class="language-js"><pre><code><span class="token comment">// module-common.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token comment">// module-1.js</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">&#39;./module-depend.js&#39;</span>
counter<span class="token punctuation">.</span>count<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;module-1&#39;</span><span class="token punctuation">,</span> counter<span class="token punctuation">.</span>count<span class="token punctuation">)</span>

<span class="token comment">// module-2.js</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">&#39;./module-depend.js&#39;</span>
counter<span class="token punctuation">.</span>count<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;module-2&#39;</span><span class="token punctuation">,</span> counter<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
</code></pre></div><p>\u914D\u7F6E</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../entry-demo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module_1</span><span class="token operator">:</span> <span class="token string">&#39;./module-1.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module_2</span><span class="token operator">:</span> <span class="token string">&#39;./module-2.js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;split-code-entry-common&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u4E0A\u9762\u914D\u7F6E\u4F1A\u8F93\u51FA\u4E24\u4E2A <code>module_1.bundle.js / module_2.bundle.js</code>\uFF0C\u4F46\u662F\u4F1A\u6709\u4E24\u4E2A\u95EE\u9898\uFF1A</p><ol><li>module-commom.js \u88AB\u5206\u522B\u6253\u5305\u5230\u4E86\u4E24\u4E2A\u8F93\u51FA\u7684 bundle.js \u4E2D</li><li>\u516C\u5171\u6A21\u5757\u4E2D count \u5BF9\u4E24\u4E2A\u4F9D\u8D56\u662F\u72EC\u7ACB\u7684\uFF0Chtml \u52A0\u8F7D\u65F6\u4F1A\u8F93\u51FA\u4E24\u4E2A<code>1</code>\u8FD9\u4E0E ESM \u6A21\u5757\u9884\u671F\u4E0D\u7B26\uFF0C\u9884\u671F\u662F\u4E24\u4E2A\u6A21\u5757\u5171\u4EAB\u516C\u5171\u6A21\u5757\u7684\u5BFC\u51FA\u7684\u5BF9\u8C61\u3002</li></ol><blockquote><p>\u4E00\u4E2A\u6A21\u5757\u90FD\u4E0D\u80FD\u88AB\u591A\u6B21\u5B9E\u4F8B\u5316\u5F88\u91CD\u8981, ECMAScript\u6A21\u5757\u548CCommonJS\u6A21\u5757\u90FD\u6307\u5B9A\u4E00\u4E2A\u6A21\u5757\u5728\u6BCF\u4E2AJavaScript\u4E0A\u4E0B\u6587\u4E2D\u53EA\u80FD\u88AB\u5B9E\u4F8B\u5316\u4E00\u6B21\u3002\u8FD9\u79CD\u89C4\u8303\u4FDD\u8BC1\u4E86\u5141\u8BB8\u6A21\u5757\u7684\u9876\u7EA7\u8303\u56F4\u7528\u4E8E\u5168\u5C40\u72B6\u6001\uFF0C\u5E76\u5728\u8BE5\u6A21\u5757\u7684\u6240\u6709\u7528\u6CD5\u4E4B\u95F4\u5171\u4EAB\u3002</p></blockquote><p>\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5728 webpack@5 \u4E2D\u63D0\u4F9B\u4E86 <code>Entry descriptor</code> \u914D\u7F6E\uFF0C\u53EF\u4EE5\u5728\u5165\u53E3\u5904\u5C06\u516C\u5171\u6A21\u5757\u63D0\u53D6\u5230\u72EC\u7ACB\u7684 chunkd\u3002</p><div class="language-"><pre><code>// webapck@5
module.exports = {
  mode: &#39;none&#39;,
  context: path.resolve(__dirname, &#39;../entry-demo&#39;),
- entry: {
-   module_1: &#39;./module-1.js&#39;,
-   module_2: &#39;./module-2.js&#39;,
- },
+  entry: {
+    module_1: {
+      import: &#39;./module-1.js&#39;,
+      dependOn: &#39;common&#39;,
+    },
+    module_2: {
+      import: &#39;./module-2.js&#39;,
+      dependOn: &#39;common&#39;,
+    },
+    common: &#39;./module-common.js&#39;,
  },
  output: {
    path: path.resolve(__dirname, &#39;split-code-entry-common-single&#39;),
    filename: &#39;[name].bundle.js&#39;,
  },
  plugins: [
    new HtmlWebpackPlugin()
  ],
}
</code></pre></div><p>\u6B64\u65F6\u6784\u5EFA\u7ED3\u679C\u4F1A\u8F93\u51FA\u4E09\u4E2A<code>module_1.bundle.js / module_2.bundle.js / common.budnle.js</code>\u3002</p><p>\u5E76\u4E14\u6B64\u65F6\u6784\u5EFA\u7ED3\u679C\u4F9D\u8D56\u4E8E\u540C\u4E00\u4E2A count\uFF0C\u6253\u5F00html\u4F1A\u8F93\u51FA <code>1, 2</code></p><h3 id="import-\u5206\u79BB\u5F02\u6B65\u5165\u53E3-bundle" tabindex="-1"><code>import()</code> \u5206\u79BB\u5F02\u6B65\u5165\u53E3 bundle <a class="header-anchor" href="#import-\u5206\u79BB\u5F02\u6B65\u5165\u53E3-bundle" aria-hidden="true">#</a></h3><p><code>import()</code>\u52A8\u6001\u52A0\u8F7D\u6A21\u5757\u53EF\u4EE5\u5B9E\u73B0 bundle \u6309\u9700\u52A0\u8F7D\uFF0C\u5177\u4F53\u89C1\u4E0A\u9762\u8BB2\u89E3\u3002</p><h3 id="externals-\u5206\u79BB-bundle" tabindex="-1">externals \u5206\u79BB bundle <a class="header-anchor" href="#externals-\u5206\u79BB-bundle" aria-hidden="true">#</a></h3><p><code>externals</code> \u914D\u7F6E\u7684\u4F5C\u7528\uFF1A\u5C31\u662F\u544A\u8BC9 webpack \u5728\u6253\u5305\u65F6\u4E0D\u8981\u5C06<code>externals</code>\u914D\u7F6E\u4E2D\u7684\u7B2C\u4E09\u65B9\u4F9D\u8D56\u6253\u5305\u5230\u8F93\u51FA\u7684 bundle \u4E2D\uFF0C\u5BF9\u8FD9\u4E9B\u5305\u7684\u4F9D\u8D56\uFF0C\u5E94\u7528\u7A0B\u5E8F\u4F1A\u4ECE\u5B83\u8FD0\u884C\u7684\u73AF\u5883\u4E2D\u83B7\u53D6\u3002</p><p>\u6211\u4EEC\u5148\u7406\u89E3\u4E0B\uFF0C\u4F7F\u7528 webpack \u6784\u5EFA\u7684\u4EA7\u7269\u6700\u7EC8\u4F1A\u5728\u54EA\u4E9B\u73AF\u5883\u4E0B\u4F7F\u7528\uFF1F\u4E5F\u5C31\u662F **target **\u7684\u914D\u7F6E\u503C\u3002\u5E38\u89C1\u7684\u4E24\u79CD\u914D\u7F6E</p><ul><li><code>target: web</code>: \u6784\u5EFA\u7684\u662F\u4E00\u4E2A web \u5E94\u7528\u7A0B\u5E8F\uFF0C\u5B83\u4F1A\u8FD0\u884C\u5728\u6D4F\u89C8\u5668\u73AF\u5883\u4E2D\u3002</li><li><code>target: node</code>: \u6784\u5EFA\u7684\u662F\u4E00\u4E2A <strong>npm</strong> \u5305\uFF0C\u6216\u8005\u8BF4 <strong>library</strong>\uFF0C\u5B83\u4F1A\u8FD0\u884C\u5728 node.js \u73AF\u5883\u4E2D\u3002</li></ul><p>\u6211\u4EEC\u4EE5\u8FD9\u4E24\u79CD\u73AF\u5883\u6765\u8BF4\u4E0B\uFF0C<code>external</code>\u5982\u4F55\u914D\u7F6E</p><ol><li><code>target: web</code>\u5F53\u6211\u4EEC\u6784\u5EFA\u4E00\u4E2A web \u5E94\u7528\u7A0B\u5E8F\u65F6\uFF0C\u5982\u679C HTML \u6587\u4EF6\u4E2D\u63D2\u5165\u4E24\u4E2A <code>script</code>\u6807\u7B7E\uFF0C\u5206\u522B\u5F15\u7528\u4E86 <code>a.js / b.js</code></li></ol><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u6B64\u65F6\u5982\u679C\u5728<code>a.js</code>\u4E2D\u8981\u5F15\u7528<code>b.js</code>\u4E2D\u7684\u67D0\u4E2A\u65B9\u6CD5\u65F6\uFF0C\u4F1A\u600E\u4E48\u505A\uFF1F</p><ul><li>\u5C06<code>b.js</code>\u4E2D\u7684\u67D0\u4E2A\u65B9\u6CD5\u66B4\u9732\u6210\u5168\u5C40\u53D8\u91CF\uFF0C\u8FD9\u6837\u5728 <code>a.js</code>\u4E2D\u5C31\u53EF\u4EE5\u76F4\u63A5\u5F15\u7528\u4E86</li></ul><p>\u5047\u8BBE\u6211\u4EEC\u5728\u4F7F\u7528 webpack \u6784\u5EFA\u4E00\u4E2A web \u5E94\u7528\u7A0B\u5E8F\u65F6\uFF0C\u5728\u4EE3\u7801\u4E2D\u4F9D\u8D56\u4E86 <code>lodash</code>\uFF0C\u5165\u53E3\u4EE3\u7801\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-js"><pre><code><span class="token comment">//entry-external.js</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span>

<span class="token keyword">const</span> eleDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
eleDiv<span class="token punctuation">.</span>textContent <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>eleDiv<span class="token punctuation">)</span>
</code></pre></div><p>\u6B64\u65F6\u6211\u4EEC\u5728 webpack \u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u5C31\u4F1A\u4F7F\u7528 external \u914D\u7F6E\uFF0C\u544A\u8BC9 webpack \u5728\u6253\u5305\u65F6\u4E0D\u8981\u5C06 lodash \u6784\u5EFA\u5230 bundle \u4E2D\uFF0C\u6211\u4EEC\u4F1A\u5728 HTML \u4E2D\u901A\u8FC7 CDN \u65B9\u5F0F\u5F15\u5165\u3002</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./bundle-external/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u914D\u7F6E\u6587\u4EF6</p><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../js-demo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./entry-external.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;bundle-external&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token string">&#39;_&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>lodash: &#39;_&#39;</code>\u5177\u4F53\u662F\u4EC0\u4E48\u610F\u601D\u5462\uFF1F</p><p><strong>\u5176\u4E2D key \u952E <code>lodash</code> \u6307\u7684\u662F <code>import xx from lodash</code> \u4E2D\u7684 <code>lodash</code>\uFF0C\u800C value \u7684\u503C<code>_</code> \u6307\u662F\u7684cdn \u5F15\u5165\u65F6 lodash \u6302\u8F7D\u5230\u5168\u5C40\u53D8\u91CF window \u7684\u5C5E\u6027 <code>_</code>\u3002</strong></p><p>\u8FD9\u4E2A\u914D\u7F6E key-value\u5F62\u5F0F\u4E5F\u5C31\u662F\u544A\u8BC9 webpack \u5728\u89E3\u6790\u4F9D\u8D56\u5173\u7CFB\u65F6\uFF0C\u78B0\u5230 <code>import xx from lodash</code>\u4E2D lodash\u65F6\uFF0C\u628A <code>lodash</code> \u66FF\u6362\u6210\u8FD0\u884C\u73AF\u5883\u4E2D\u5168\u5C40\u5C5E\u6027 <code>_</code></p><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u4E0B\u6700\u7EC8\u6253\u5305\u51FA\u6765 bundle.js \u4E2D\u5173\u4E8E <code>import _ from &#39;lodash&#39;</code>\u7684\u5904\u7406\u7ED3\u679C</p><div class="language-js"><pre><code><span class="token keyword">var</span> __webpack_modules__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
<span class="token comment">/* 0 */</span><span class="token punctuation">,</span>
<span class="token comment">/* 1 */</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  				module<span class="token punctuation">.</span>exports <span class="token operator">=</span> _<span class="token punctuation">;</span>
  			<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>\u4EE5\u53CA cdn \u4E2D lodash \u90E8\u5206\u4EE3\u7801\uFF1A</p><div class="language-js"><pre><code><span class="token comment">// Export lodash.</span>
<span class="token keyword">var</span> _ <span class="token operator">=</span> <span class="token function">runInContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Some AMD build optimizers, like r.js, check for condition patterns like:</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">==</span> <span class="token string">&#39;function&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> define<span class="token punctuation">.</span>amd <span class="token operator">==</span> <span class="token string">&#39;object&#39;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u7701\u7565...</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>freeModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Export for Node.js.</span>
    <span class="token punctuation">(</span>freeModule<span class="token punctuation">.</span>exports <span class="token operator">=</span> _<span class="token punctuation">)</span><span class="token punctuation">.</span>_ <span class="token operator">=</span> _<span class="token punctuation">;</span>
    <span class="token comment">// Export for CommonJS support.</span>
    freeExports<span class="token punctuation">.</span>_ <span class="token operator">=</span> _<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// Export to the global object.</span>
  <span class="token comment">// \u5728\u6D4F\u89C8\u5668\u7AEF root \u5C31\u662F window \u5168\u5C40\u5BF9\u8C61</span>
  root<span class="token punctuation">.</span>_ <span class="token operator">=</span> _<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><code>target: node</code>\u6784\u5EFA\u7684\u662F\u4E00\u4E2A <strong>npm</strong> \u5305\uFF0C\u6216\u8005\u8BF4 <strong>library</strong>\uFF0C\u5B83\u4F1A\u8FD0\u884C\u5728 node.js \u73AF\u5883\u4E2D\u3002</li></ol><p>\u6B64\u65F6 lodash \u5C31\u6210\u4E86\u8BE5 library \u7684 <code>peerDependency(\u540C\u884C\u4F9D\u8D56)</code>\uFF0C\u6B64\u65F6\u6211\u4EEC\u5728\u9879\u76EE\u7684 package.json \u4E2D\u901A\u5E38\u4F1A\u914D\u7F6E\u8BE5\u4FE1\u606F\uFF1A</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
   <span class="token property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.17.21&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u6B64\u65F6 npm \u5B89\u88C5 library \u65F6\uFF0C\u4F1A\u68C0\u67E5\u662F\u5426\u6709\u5B89\u88C5 lodash\uFF0C\u5426\u5219\u4F1A\u7ED9\u51FA\u63D0\u793A\u3002</p><p>\u5C31\u50CF <code>element-ui</code>\u5FC5\u987B\u4F9D\u8D56 <code>vue</code>\u4E00\u6837\u3002</p><div class="language-js"><pre><code><span class="token comment">// element-ui \u7684 package.json </span>
<span class="token string-property property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.5.17&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>\u6B64\u65F6\uFF0C\u5728 library \u6784\u5EFA\u65F6\u7684\u914D\u7F6E\uFF1A</p><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../js-demo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./entry-external.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;bundle-external&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle-node.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&#39;entryExternal&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&#39;commonjs2&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token string">&#39;commonjs2 lodash&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u6784\u5EFA\u7ED3\u679C <code>bundle-node.js</code>\u4E2D\u5BF9<code>import _ from &#39;lodash&#39;</code>\u7684\u5904\u7406\u7ED3\u679C</p><div class="language-js"><pre><code><span class="token keyword">var</span> __webpack_modules__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
<span class="token comment">/* 0 */</span><span class="token punctuation">,</span>
<span class="token comment">/* 1 */</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>\u6240\u4EE5 <code>lodash: &#39;commonjs2 lodash&#39;</code> \u4E2D\u7684 key \u952E <code>lodash</code> \u6307\u7684\u662F <code>import _ from &#39;lodash&#39;</code>\u4E2D\u7684 lodash\uFF0C\u800C value \u503C <code>commonjs2 lodash</code>\u7684 <code>lodash</code>\u503C\uFF0C\u4ECE\u6784\u5EFA\u7ED3\u679C <code>require(&#39;lodash&#39;)</code>\u53EF\u4EE5\u770B\u51FA\u662F package.json \u4E2D\u5B89\u88C5\u5305\u7684\u540D\u79F0\u3002</p><ol start="3"><li><p>\u5F53\u6211\u4EEC\u6784\u5EFA\u4E00\u4E2A library \u65F6\uFF0C\u6709\u53EF\u80FD\u8FD9\u4E2A\u5E93\u5373\u53EF\u4EE5\u7528\u4E8E\u6D4F\u89C8\u5668\u73AF\u5883\uFF0C\u4E5F\u53EF\u4EE5\u7528\u4E8E node \u73AF\u5883\u3002\u5373\u6B64\u65F6 <code>libraryTarget:umd</code>\uFF0C\u6B64\u65F6 <code>external</code> \u7684\u503C\u5C31\u8981\u7528\u5BF9\u8C61\u65B9\u5F0F\u6307\u660E\u4E0D\u540C\u73AF\u5883\u4E0B\u5BF9 <code>import _ from &#39;lodash&#39;</code>\u4E2D lodash \u5982\u4F55\u66FF\u6362</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../js-demo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./entry-external.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;bundle-external&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle-node.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&#39;entryExternal&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
    	<span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">&quot;_&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u6240\u4EE5 <code>externals</code> \u4EE5\u5B57\u7B26\u4E32\u914D\u7F6E\u65F6\u9ED8\u8BA4\u4E3A web \u73AF\u5883\u4E2D\u5168\u5C40\u53D8\u91CF\u7684\u66FF\u6362\u3002\u4E5F\u5BF9\u5E94\u7740 <code>target</code>\u7684\u9ED8\u8BA4\u503C\u662F <code>var</code>\u3002</p></li></ol><h3 id="splitchunksplugin-\u5206\u79BB-bundle" tabindex="-1">splitChunksPlugin \u5206\u79BB bundle <a class="header-anchor" href="#splitchunksplugin-\u5206\u79BB-bundle" aria-hidden="true">#</a></h3><p>webpack 4.x \u91CD\u65B0\u8BBE\u8BA1\u548C\u5B9E\u73B0\u4E86\u4EE3\u7801\u5206\u7247\u7684\u529F\u80FD\uFF0C\u5E76\u901A\u8FC7<code>optimization.splitChunks</code>\u8FDB\u884C\u914D\u7F6E\u3002</p><p><code>splitChunks</code>\u914D\u7F6E\u4E2D\u6700\u91CD\u8981\u7684\u6982\u5FF5\u5C31\u662F <code>cacheGroups</code> \u5C5E\u6027\u7684\u914D\u7F6E\u3002\u5B83\u53EF\u4EE5\u8BA9\u6211\u4EEC\u81EA\u5B9A\u4E49\u5982\u4F55\u5207\u5206 chunk \u7684\u89C4\u5219\u3002</p><p>\u6BD4\u5982\u6211\u4EEC\u9700\u8981\u628A\u9879\u76EE\u4E2D\u7528\u5230\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u4ECE\u4E1A\u52A1\u4EE3\u7801\u4E2D\u5207\u5206\u51FA\u6765\uFF0C\u6784\u5EFA\u5230\u4E00\u4E2A\u72EC\u7ACB\u7684 bundle \u4E2D\u3002\u53EF\u4EE5\u50CF\u4E0B\u9762\u8FD9\u6837\u914D\u7F6E test \u5C5E\u6027\u6765\u5339\u914D\uFF0C\u5C31\u5982\u540C module.rule.test \u5C5E\u6027\u4E00\u6837\uFF1A</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u7701\u7565\u5176\u5B83\u57FA\u672C\u9879</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u5F53\u7136\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u66F4\u7CBE\u7EC6\u5316\u63A7\u5236\u5982\u4F55\u5207\u5206\u4EE3\u7801\uFF0C\u6BD4\u5982\u5927\u5C0F\u9650\u5236\u3001\u88AB\u5F15\u7528\u6B21\u6570\u9650\u5236\u3001\u5E76\u884C\u8BF7\u6C42\u6570\u9650\u5236\u7B49\u3002\u4E3E\u4F8B\u8BF4\u67D0\u4E2A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u53EA\u6709\u51E0kb\u5927\u5C0F\uFF0C\u5C31\u5B8C\u5168\u6CA1\u5FC5\u8981\u5207\u5206\u3002\u6240\u4EE5\u4E00\u4E2A cacheGroup \u7684\u5B8C\u5168\u914D\u7F6E\u9879\u6709\uFF1A</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u7701\u7565\u5176\u5B83\u57FA\u672C\u9879</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u5339\u914D\u6761\u4EF6</span>
          <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span> <span class="token comment">// async: \u53EA\u63D0\u53D6\u5F02\u6B65 chunk; initial: \u5305\u542B\u5165\u53E3 chunk\uFF1B all\uFF1A\u4E24\u79CD\u6A21\u5F0F\u540C\u65F6\u5F00\u542F</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// \u751F\u6210\u5757\u7684\u6700\u5C0F\u5927\u5C0F\uFF08\u4EE5\u5B57\u8282\u4E3A\u5355\u4F4D\uFF09</span>
            <span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// \u6784\u5EFA\u7ED3\u679C chunk \u6700\u5927\u503C\uFF0C\u5927\u4E8E\u6B64\u503C\u5C06\u88AB\u62C6\u5206\u591A\u4E2A\u3002\u4E3A 0 \u5219\u4E0D\u9650\u5236</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// \u5206\u5272\u4E4B\u524D\uFF0C\u6A21\u5757\u5FC5\u987B\u5728\u5757\u4E4B\u95F4\u5171\u4EAB\u7684\u6700\u77ED\u6B21\u6570</span>
          <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// \u6309\u9700\u52A0\u8F7D\u65F6\u5E76\u884C\u8BF7\u6C42\u7684\u6700\u5927\u6570\u91CF</span>
          <span class="token literal-property property">maxInitalRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// \u9996\u6B21\u52A0\u8F7D\u65F6\u5165\u53E3\u70B9\u7684\u6700\u5927\u5E76\u884C\u8BF7\u6C42\u6570</span>
          <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u4E3A true \u65F6\uFF0Cwebpack \u4F1A\u5FFD\u7565 splitChunks.minSize\u3001splitChunks.minChunks\u3001splitChunks.maxAsyncRequests\u3001splitChunks.maxInitialRequests \u8FD9\u51E0\u4E2A\u914D\u7F6E\u9879\u9650\u5236\uFF0C\u5F3A\u5236\u62C6\u5206\u3002</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5DF2\u7ECF\u5B58\u5728\u7684\u5DF2\u62C6\u5206\u7684 chunk\uFF0C\u5C06\u76F4\u63A5\u590D\u7528</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Boolean / String</span>
          <span class="token literal-property property">atuomaticNameDelimiter</span><span class="token operator">:</span> <span class="token string">&#39;~&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[id].js&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// webpack@5</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u5B9E\u9645\u4E0A\u8FD9\u4E2A\u63D2\u4EF6\u5C31\u914D\u7F6E\u4E86\u4E24\u4E2A\u9ED8\u8BA4\u7684\u7F13\u5B58\u7EC4\uFF1A</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u7701\u7565\u5176\u5B83\u57FA\u672C\u9879</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token literal-property property">maxInitalRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
            <span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">maxInitalRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u4E24\u4E2A\u9ED8\u8BA4\u7F13\u5B58\u7EC4\u5176\u65F6\u662F\u6709\u4E00\u4E9B\u91CD\u590D\u914D\u7F6E\u5C5E\u6027\u7684\uFF0C\u8FD9\u90E8\u5206\u5C5E\u6027\u53EF\u4EE5\u653E\u5728\u4E0A\u4E00\u7EA7\u5BF9\u8C61\u5C5E\u6027\u4E2D\u4F5C\u4E3A\u516C\u7528\u914D\u7F6E\uFF0C\u4F18\u5148\u7EA7\u4F4E\u4E8E\u7F13\u5B58\u7EC4\u5185\u90E8\u5C5E\u6027\uFF0C\u53EF\u4EE5\u5728\u7F13\u5B58\u7EC4\u4E2D\u518D\u5B9A\u4E49\u540C\u6837\u5C5E\u6027\u8986\u76D6\u516C\u7528\u914D\u7F6E\u3002</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u7701\u7565\u5176\u5B83\u57FA\u672C\u9879</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span> 
      <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxInitalRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
      <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// test: true, // \u9ED8\u8BA4\u503C\u5C31\u662F\u6240\u6709\uFF0C\u6240\u4EE5\u4E5F\u53EF\u4EE5\u7701\u7565</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// \u8986\u76D6\u4E0A\u4E00\u7EA7\u516C\u7528\u914D\u7F6E</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u589E\u52A0\u4E00\u4E2A\u62C6\u5206\u89C4\u5219\uFF0C\u6BD4\u5982\u5728 css \u6A21\u5757\u63D0\u53D6\u6210\u4E00\u4E2A\u6784\u5EFA\u4EA7\u7269\u65F6\u914D\u7F6E\uFF1A</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u7701\u7565\u5176\u5B83\u57FA\u672C\u9879</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;async&#39;</span><span class="token punctuation">,</span> 
      <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxInitalRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
      <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\\\/]node_modules[\\\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// test: true, // \u9ED8\u8BA4\u503C\u5C31\u662F\u6240\u6709\uFF0C\u6240\u4EE5\u4E5F\u53EF\u4EE5\u7701\u7565</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// \u8986\u76D6\u4E0A\u4E00\u7EA7\u516C\u7528\u914D\u7F6E</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">styles</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;style-split&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;css/[name].css&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u8FD9\u91CC\u7684\u53D8\u91CF\u5360\u4F4D\u7B26 name \u5C31\u4F1A\u662F\u4E0A\u9762\u81EA\u5B9A\u4E49\u7684 name: style-split-merge\uFF0C\u6240\u4EE5\u6700\u7EC8\u7684\u8F93\u51FA\u6587\u4EF6\u540D\u662F css/style-split.css</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;css/mini-extract&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u8BC6\u522B\u9700\u8981\u5408\u5E76\u7684 css \u4E3A miniCssExtractPlugin \u5904\u7406\u540E\u7684 chunk\u3002\u5728 webpack 4.x \u4E2D\u4F7F\u7528 test: /\\.css$/i \u4EE3\u66FF\u3002</span>
          <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u5173\u4E8E\u5404\u4E2A\u5C5E\u6027\u8BE6\u7EC6\u89E3\u6790\u53C2\u8003<a href="https://github.com/gexiaolin/SplitChunksPlugin" target="_blank" rel="noopener noreferrer">SplitChunksPlugin\u6587\u6863\u7FFB\u8BD1</a></p><blockquote><p>\u7279\u522B\u6CE8\u610F\u7406\u89E3 chunks \u7684\u4E0D\u540C\u503C\u914D\u7F6E\u4F1A\u6709\u4EC0\u4E48\u7ED3\u679C\uFF0C\u4EE5\u53CA\u7406\u89E3 maxAsyncRequests \u548C maxInitalRequests</p></blockquote><h3 id="dll-\u52A8\u6001\u94FE\u63A5\u5E93" tabindex="-1">DLL \u52A8\u6001\u94FE\u63A5\u5E93 <a class="header-anchor" href="#dll-\u52A8\u6001\u94FE\u63A5\u5E93" aria-hidden="true">#</a></h3><p>\u9996\u5148\u8BA4\u8BC6\u4E0B<strong>\u52A8\u6001\u94FE\u63A5\u5E93</strong>\u7684\u6982\u5FF5\uFF1A</p><p>\u5728 windows \u7CFB\u7EDF\u4E2D\u7ECF\u5E38\u770B\u5230 <code>.dll</code> \u540E\u7F00\u7684\u6587\u4EF6\uFF0C\u8FD9\u4E9B\u6587\u4EF6\u53EB\u4F5C\u52A8\u6001\u94FE\u63A5\u5E93\uFF0C\u5728\u4E00\u4E2A\u52A8\u6001\u94FE\u63A5\u5E93\u4E2D\u5305\u542B\u4E86\u63D0\u524D\u7F16\u8BD1\u8FC7\u7684\u4E3A\u5176\u5B83\u6A21\u5757\u8C03\u7528\u7684\u51FD\u6570\u548C\u6570\u636E\u3002</p><p>\u6240\u4EE5 webpack \u7684 <code>DllPlugin</code> \u63D2\u4EF6\u501F\u9274\u4E86\u8FD9\u4E2A\u601D\u60F3\uFF0C\u628A\u9879\u76EE\u4E2D\u516C\u7528\u7684\u4F53\u79EF\u8F83\u5927\u7684\u94FE\u63A5\u63D0\u524D\u6253\u5305\u6784\u5EFA\u4E00\u6B21\uFF0C\u4E4B\u540E\u9879\u76EE\u7684\u6784\u5EFA\u8FC7\u7A0B\u4E2D\u88AB\u52A8\u6001\u94FE\u63A5\u5E93\u5305\u542B\u7684\u6A21\u5757\u5C06\u4E0D\u4F1A\u518D\u91CD\u65B0\u6784\u5EFA\uFF0C\u800C\u662F\u76F4\u63A5\u4F7F\u7528\u52A8\u6001\u94FE\u63A5\u5E93\u4E2D\u7684\u4EE3\u7801\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u63D0\u5347\u6784\u5EFA\u901F\u5EA6\u3002</p><p>\u5728 webpack \u4E2D\u8981\u4F7F\u7528\u6210\u52A8\u6001\u94FE\u63A5\u5E93\u62BD\u79BB\u516C\u7528\u6216\u72EC\u7ACB\u7684\u6A21\u5757\uFF0C\u9700\u8981\u4F7F\u7528 <code>DLLPlugin</code> \u548C <code>DLLReferencePlugin</code> \u4E24\u4E2A\u5185\u7F6E\u63D2\u4EF6:</p><ul><li><code>DllPlugin</code> \u63D2\u4EF6\u5728\u4E00\u4E2A\u72EC\u7ACB\u7684 webpack \u914D\u7F6E\u6587\u4EF6\uFF0C\u901A\u5E38\u547D\u540D\u4E3A <code>webpack.dll.config.js</code> , \u6784\u5EFA\u4E00\u4E2A\u53EA\u6709 dll \u7684 bundle(dll-only-bundle)\u3002</li></ul><p>\u540C\u65F6\u8FD9\u4E2A\u63D2\u4EF6\u4F1A\u751F\u6210\u4E00\u4E2A\u540D\u4E3A <code>manifest.json</code> \u7684\u6587\u4EF6\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u662F\u7528\u6765\u8BA9 <code>DLLReferencePlugin</code> \u6620\u5C04\u5230\u76F8\u5173\u7684\u4F9D\u8D56\u4E0A\u53BB\u7684\u3002</p><ul><li><code>DLLReferencePlugin</code> \u63D2\u4EF6\u5E94\u7528\u4E8E\u9879\u76EE\u6784\u5EFA\u5DE5\u7A0B\u4E2D\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u6307\u793A\u6784\u5EFA\u8FC7\u7A0B\u4E2D\u5982\u4F55\u4ECE <code>mainifest.json</code> \u4E2D\u627E\u5230\u94FE\u63A5\u5E93\u4E2D\u7684\u6A21\u5757\u3002</li></ul><p>\u7531\u4E8E\u4E0A\u9762\u9700\u8981\u4E24\u4E2A\u63D2\u4EF6\u4E14\u914D\u7F6E\u590D\u6742\uFF0C\u57FA\u672C\u5F03\u7528\uFF0C\u51FA\u73B0\u4E86\u66FF\u4EE3\u63D2\u4EF6 <code>autodll-webpack-plugin</code> \u7B80\u5316\u914D\u7F6E\u3002</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ......</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// \u914D\u7F6E\u8981\u6253\u5305\u4E3A dll \u7684\u6587\u4EF6</span>
    <span class="token keyword">new</span> <span class="token class-name">AutoDllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      inject<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u8BBE\u4E3A true \u5C31\u628A DLL bundles \u63D2\u5230 index.html \u91CC</span>
      filename<span class="token operator">:</span> <span class="token string">&#39;[name].dll.js&#39;</span><span class="token punctuation">,</span>
      context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// AutoDllPlugin \u7684 context \u5FC5\u987B\u548C package.json \u7684\u540C\u7EA7\u76EE\u5F55\uFF0C\u8981\u4E0D\u7136\u4F1A\u94FE\u63A5\u5931\u8D25</span>
      entry<span class="token operator">:</span> <span class="token punctuation">{</span>
         react<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&#39;react&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;react-dom&#39;</span>
         <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u4F46\u662F\u5230\u4E86 webpack@5 \u540E\uFF0C\u63A8\u8350\u4F7F\u7528\u6548\u679C\u66F4\u597D\u7684<code>HardSourceWebpackPlugin</code> \u63D2\u4EF6\u5B9E\u73B0\u7C7B\u4F3C\u529F\u80FD\u3002</p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ......</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &lt;- \u76F4\u63A5\u52A0\u5165\u8FD9\u884C\u4EE3\u7801\u5C31\u884C</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u53C2\u8003\u94FE\u63A5<a href="https://blog.csdn.net/hope_It/article/details/102691300" target="_blank" rel="noopener noreferrer">webpack\u4E4B\u4F18\u5316\u7BC7\uFF08\u56DB\uFF09\uFF1Ahard-source-webpack-plugin,webpack DllPlugin\u914D\u7F6E\u7684\u4EE3\u66FF\u65B9\u6848</a></p><h3 id="runtimechunk-\u8FD0\u884C\u65F6\u4EE3\u7801\u62BD\u79BB" tabindex="-1">runtimeChunk \u8FD0\u884C\u65F6\u4EE3\u7801\u62BD\u79BB <a class="header-anchor" href="#runtimechunk-\u8FD0\u884C\u65F6\u4EE3\u7801\u62BD\u79BB" aria-hidden="true">#</a></h3><p>webpack \u5728\u6784\u5EFA\u7684\u6BCF\u4E2A chunk \u4E2D\u4F1A\u6709\u63D2\u5165\u4E00\u6BB5\u5B9E\u73B0 webpack \u4F9D\u8D56\u6A21\u5757\u8C03\u7528\u7684\u4EE3\u7801\uFF0C\u4E0E\u4E1A\u52A1\u4EE3\u7801\u4E00\u8D77\u8FD0\u884C\uFF0C\u6240\u4EE5\u4E5F\u79F0\u4E3A\u8FD0\u884C\u65F6\u4EE3\u7801\u3002</p><p>\u6BD4\u5982\u6700\u7B80\u5355\u7684\u4E00\u4E2A bundle.js \u4EE3\u7801</p><div class="language-js"><pre><code> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// webpackBootstrap</span>
 	<span class="token keyword">var</span> __webpack_modules__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
<span class="token comment">/* 0 */</span><span class="token punctuation">,</span>
<span class="token comment">/* 1 */</span>
 <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">__unused_webpack_module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">genRandomNumber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 	<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** webpack \u8FD0\u884C\u65F6\u4EE3\u7801 *************************************************/</span>
 	<span class="token comment">// The module cache</span>
 	<span class="token keyword">var</span> __webpack_module_cache__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 	
 	<span class="token comment">// The require function</span>
 	<span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token comment">// Check if module is in cache</span>
 		<span class="token keyword">if</span><span class="token punctuation">(</span>__webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 			<span class="token keyword">return</span> __webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 		<span class="token comment">// Create a new module (and put it into the cache)</span>
 		<span class="token keyword">var</span> module <span class="token operator">=</span> __webpack_module_cache__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
 			<span class="token comment">// no module.id needed</span>
 			<span class="token comment">// no module.loaded needed</span>
 			<span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 		<span class="token punctuation">}</span><span class="token punctuation">;</span>
 	
 		<span class="token comment">// Execute the module function</span>
 		__webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	
 		<span class="token comment">// Return the exports of the module</span>
 		<span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 	
<span class="token comment">/************************************************************************/</span>
<span class="token keyword">var</span> __webpack_exports__ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> genRandomNumber <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">genElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eleDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span>
  eleDiv<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;Hello webpack&#39;</span>

  <span class="token keyword">const</span> eleBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span>
  eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;Click me to generate random number: 0&#39;</span>
  eleBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eleBtn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Click me to generate random number: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">genRandomNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>
  eleDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>eleBtn<span class="token punctuation">)</span>

  <span class="token keyword">return</span> eleDiv
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">genElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">;</span>
</code></pre></div><p>\u66F4\u590D\u6742\u6A21\u5757\u4F9D\u8D56\u7684\u6253\u5305\u7ED3\u679C\u4E2D\u8FD8\u5305\u62EC\u4EE5\u4E0B\u65B9\u6CD5\u7684\u5B9E\u73B0\u4EE3\u7801\uFF1A</p><div class="language-"><pre><code>__webpack_require__
__webpack_require__.d
__webpack_require__.o
__webpack_require__.r
__webpack_require__.x
webpackJsonpCallback
checkDeferredModulesImpl
...
</code></pre></div><p>\u6240\u4EE5\u7406\u60F3\u60C5\u51B5\u4E0B\uFF0C\u6B63\u5E38\u4E1A\u52A1\u9879\u76EE\u4F1A\u4EA7\u751F\u5F88\u591A\u4E2A chunk\uFF0C\u6211\u4EEC\u5E0C\u671B\u8FD9\u4E9B chunk \u80FD\u5171\u7528\u8FD9\u4E9B\u8FD0\u884C\u4EE3\u7801\u3002\u6B64\u65F6\u5C31\u53EF\u4EE5\u8BBE\u7F6E <code>optimization.runtimeChunk</code></p><div class="language-js"><pre><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u9ED8\u8BA4\u503C\u662F\u6BCF\u4E2A\u5165\u53E3 chunk \u4E2D\u76F4\u63A5\u5D4C\u5165 runtime\u3002</span>
    <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token string">&quot;single&quot;</span><span class="token punctuation">,</span> <span class="token comment">// \u4F1A\u521B\u5EFA\u4E00\u4E2A\u5728\u6240\u6709\u751F\u6210 chunk \u4E4B\u95F4\u5171\u4EAB\u7684\u8FD0\u884C\u65F6\u6587\u4EF6\uFF0C\u9ED8\u8BA4\u540D\u4E3A runtime</span>
    <span class="token comment">// \u5982\u679C\u9700\u8981\u5BF9\u63D0\u53D6\u8FD0\u884C\u65F6\u6587\u4EF6\u81EA\u5B9A\u4E49\u547D\u540D\uFF0C\u6BD4\u5982\u591A\u5165\u53E3\u65F6\u6DFB\u52A0\u5165\u53E3\u540D\u79F0\u52A0\u4EE5\u533A\u5206\uFF0C\u5219\u53EF\u4EE5\u7528\u5BF9\u8C61\u8BBE\u7F6E</span>
    <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;runtime&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u9ED8\u8BA4\u503C, \u7B49\u540C\u4E8E\u76F4\u63A5\u8BBE\u4E3A single</span>
      <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">runtime~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>\u6848\u4F8B\u53EF\u89C1\u76EE\u5F55 <code>entry-demo/split-code-entry-depend-runtime-single</code></p><h3 id="ignoreplugin-\u63D2\u4EF6" tabindex="-1">IgnorePlugin \u63D2\u4EF6 <a class="header-anchor" href="#ignoreplugin-\u63D2\u4EF6" aria-hidden="true">#</a></h3><p><code>IgnorePlugin</code> \u662F webpack \u7684\u5185\u7F6E\u63D2\u4EF6\uFF0C\u4F5C\u7528\u662F\u5FFD\u7565\u7B2C\u4E09\u65B9\u5305\u90E8\u5206\u6307\u5B9A\u76EE\u5F55\u7684\u4EE3\u7801\u3002</p><p>\u4F8B\u5982: moment (2.24.0\u7248\u672C) \u4F1A\u5C06\u6240\u6709\u672C\u5730\u5316\u5185\u5BB9\u548C\u6838\u5FC3\u529F\u80FD\u4E00\u8D77\u6253\u5305\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528 IgnorePlugin \u5728\u6253\u5305\u65F6\u5FFD\u7565\u672C\u5730\u5316\u5185\u5BB9\u3002</p><div class="language-js"><pre><code><span class="token comment">//webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">//\u5FFD\u7565 moment \u4E0B\u7684 ./locale \u76EE\u5F55</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\.\\/locale$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u5728\u4F7F\u7528\u7684\u65F6\u5019\uFF0C\u5982\u679C\u6211\u4EEC\u9700\u8981\u6307\u5B9A\u8BED\u8A00\uFF0C\u90A3\u4E48\u9700\u8981\u6211\u4EEC\u624B\u52A8\u7684\u53BB\u5F15\u5165\u8BED\u8A00\u5305\uFF0C\u4F8B\u5982\uFF0C\u5F15\u5165\u4E2D\u6587\u8BED\u8A00\u5305:</p><div class="language-js"><pre><code><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;moment/locale/zh-cn&#39;</span><span class="token punctuation">;</span><span class="token comment">// \u624B\u52A8\u5F15\u5165</span>
</code></pre></div><p>index.js \u4E2D\u53EA\u5F15\u5165 moment\uFF0C\u6253\u5305\u51FA\u6765\u7684 bundle.js \u5927\u5C0F\u4E3A 263KB\uFF0C\u5982\u679C\u914D\u7F6E\u4E86 IgnorePlugin\uFF0C\u5355\u72EC\u5F15\u5165 <code>moment/locale/zh-cn</code>\uFF0C\u6784\u5EFA\u51FA\u6765\u7684\u5305\u5927\u5C0F\u4E3A 55KB\u3002</p><h2 id="\u538B\u7F29" tabindex="-1">\u538B\u7F29 <a class="header-anchor" href="#\u538B\u7F29" aria-hidden="true">#</a></h2><p>\u538B\u7F29 js \u6587\u4EF6\u5927\u591A\u6570\u4F7F\u7528\u7684\u5DE5\u5177\u6709\u4E24\u4E2A\uFF0C\u4E00\u4E2A\u662F <code>UglifyJS</code>\uFF0C\u88AB webpack 3.x \u96C6\u6210\uFF0C\u53E6\u4E00\u4E2A\u662F <code>terser</code>\uFF0C\u88AB webapck 4.x \u96C6\u6210\u3002\u7531\u4E8E\u540E\u8005\u652F\u6301 ESnext \u4EE3\u7801\u7684\u538B\u7F29\uFF0C\u6240\u4EE5\u4ECE webpack 4.x \u5F00\u59CB\u9ED8\u8BA4\u4F7F\u7528 terser \u7684\u63D2\u4EF6 <code>terser-webpack-plugin</code>\u3002</p><p>\u5728 webpack 4.x \u4EE5\u540E\u8981\u5F00\u542F js \u4EE3\u7801\u538B\u7F29\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBE\u7F6E <code>optimization.minimize: true</code>\u3002\u5F53<code>mode: &#39;production</code>\u65F6\u9ED8\u8BA4\u5F00\u542F\u3002</p><p>\u5982\u679C\u9700\u8981\u5BF9<code>terser-webpack-plugin</code>\u63D2\u4EF6\u7684\u538B\u7F29\u9009\u9879\u8FDB\u884C\u81EA\u5B9A\u4E49\u914D\u7F6E\uFF0C\u53EF\u4EE5<code>optimization.minimizer</code>\u8FDB\u884C\u8BBE\u7F6E</p><div class="language-js"><pre><code><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;terser-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// minimize:true \u65F6\u7684\u542F\u7528 terser-webpack-plugin \u63D2\u4EF6\uFF0C\u8BE5\u63D2\u4EF6\u53EF\u7528\u7684\u914D\u7F6E\u9879\u53CA\u9ED8\u8BA4\u503C\u5982\u4E0B</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.m?js(\\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// string, regexp</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// string, regexp</span>
        <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u662F\u5426\u5F00\u542F\u7F13\u5B58\uFF0C\u9ED8\u8BA4\u7F13\u5B58\u76EE\u5F55 node_modules/.cache/terser-webpack-plugin\uFF0C\u4F20\u5165\u5B57\u7B26\u4E32\u53EF\u4EE5\u4FEE\u6539\u8DEF\u5F84</span>
        <span class="token literal-property property">parallel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5F00\u542F\u591A\u8FDB\u7A0B\u8FDB\u884C\u538B\u7F29\uFF0C\u4F20\u5165\u6570\u5B57\u53EF\u6307\u5B9A\u8FDB\u7A0B\u6570, \u8BBE\u4E3A true \u65F6\uFF0C\u9ED8\u8BA4\u542F\u7528 os.cpus().length - 1</span>
        <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u662F\u5426\u751F\u6210 sourceMap, \u9700\u8981\u540C\u65F6\u5B58\u5728 devtool \u914D\u7F6E\u3002</span>
        <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>terser<span class="token punctuation">,</span> <span class="token comment">// \u6307\u5B9A\u81EA\u5B9A\u4E49\u7684\u538B\u7F29\u5668\uFF0C\u9ED8\u8BA4 terser</span>
        <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// terser \u81EA\u8EAB\u914D\u7F6E\u9879\uFF0C\u5177\u4F53\u53C2\u8003https://terser.org/docs/api-reference</span>
          <span class="token literal-property property">parse</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// parse options</span>
            <span class="token literal-property property">bare_returns</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// \u652F\u6301\u9876\u7EA7return\u8BED\u53E5</span>
            <span class="token literal-property property">html5_comments</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">shebang</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u652F\u6301#!command\u4F5C\u4E3A\u7B2C\u4E00\u884C</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// compress options</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">mangle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// mangle options</span>

            <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// mangle property options</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// format options (can also use \`output\` for backwards compatibility)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// source map options</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">ecma</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// specify one of: 5, 2015, 2016, etc.</span>
          <span class="token literal-property property">keep_classnames</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">keep_fnames</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">ie8</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">nameCache</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// or specify a name cache object</span>
          <span class="token literal-property property">safari10</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">toplevel</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>`,232),o=[e];function c(l,r,u,k,i,d){return a(),s("div",null,o)}var y=n(t,[["render",c]]);export{g as __pageData,y as default};
