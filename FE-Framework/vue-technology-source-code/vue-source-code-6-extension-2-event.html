<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件中心 event | xut0793's blog</title>
    <meta name="description" content="个人知识框架整理，便于查缺漏。前端 HTML CSS ES TS Vue React Node Express Koa">
    <link rel="stylesheet" href="/assets/style.1a961a38.css">
    <link rel="modulepreload" href="/assets/app.fa011131.js">
    <link rel="modulepreload" href="/assets/FE-Framework_vue-technology-source-code_vue-source-code-6-extension-2-event.md.d77789c6.lean.js">
    
    <meta name="twitter:title" content="事件中心 event | xut0793&#39;s blog">
  <meta property="og:title" content="事件中心 event | xut0793&#39;s blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-2ba227d5><div class="sidebar-button" data-v-2ba227d5><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="xut0793&#39;s blog, back to home" data-v-2ba227d5 data-v-b3da5816><!----> xut0793&#39;s blog</a><div class="flex-grow" data-v-2ba227d5></div><div class="nav" data-v-2ba227d5><nav class="nav-links" data-v-2ba227d5 data-v-0fce24fe><!--[--><div class="item" data-v-0fce24fe><div class="nav-link" data-v-0fce24fe data-v-2cb643ba><a class="item" href="/Design/" data-v-2cb643ba>设计 <!----></a></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端语言</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/HTML/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>HTML</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/CSS/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>CSS</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/ES/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>ES</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/TS/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>TS</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端框架</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>UI组件库</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Framework/Element-UI/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Element-UI</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>Web端</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Framework/Vue/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vue技术栈</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item active" href="/FE-Framework/vue-technology-source-code" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vue技术栈源码</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Framework/React/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>React技术栈</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端工程化</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/intro-fe-engineering" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>概念理解</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>初始化</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/dev-env" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>配置环境</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/cli" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>脚手架CLI</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/project-directory" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>工程目录</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/package-json" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>package.json</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/browserslist" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>browserslist</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>开发DEV</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-server" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>本地服务</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-linter/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>开发规范</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-mock/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>mock环境</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-test/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>测试</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-debug" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>调试</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>构建CI</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-babel/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Babel</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-postcss/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Postcss</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-webpack/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Webapck</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-rollup" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>rollup</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-vite/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>vite</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-gulp/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>gulp</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-run-script/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>run-script</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>部署CD</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/cd-deploy/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>自动化部署</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/cd-release/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>发布策略</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>运维OP</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/op-monitor/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>数据监控</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/op-performance/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>性能优化</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端技术方向</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/responsive-web-design" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>响应式网页设计</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/backend-for-frontend" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>BFF</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>微前端</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/intro-micro-fe" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>微前端概念</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/qiankun" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>qiankun</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/monorepo" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>monorepo工程</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/lerna" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>lerna</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>可视化</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/visualize/svg/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>SVG</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/visualize/canvas/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Canvas</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/visualize/webgl/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>WebGl</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>浏览器</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/1-BOM/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>BOM</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/2-DOM/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>DOM</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/3-CSSOM/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>CSSOM</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/4-render/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>渲染</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/5-cache/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>缓存</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/6-storage/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>本地存储</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/7-security/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>安全</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/8-new-api/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>新API</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>网络</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>网络协议</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/protocol/index" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>HTTP</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/protocol/tcp-udp" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>TCP/UDP</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/protocol/dns" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>DNS</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>网络通信</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/XMLHttpRequest" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>XMLHttpRequest</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/axios/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Axios</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/fetch/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Fetch</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/EventSource" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>EventSource</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/websocket" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>WebSocket</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>接口规范</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/restful/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>RESTful</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/graphql/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>GraphQL</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>服务端</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/node/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Node</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/connect/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Connect</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/express/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Express</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/koa/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Koa</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/nest/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Nest</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/bash/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Bash</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/nginx/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Nginx</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>数据库</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Database/mysql/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>MySQL</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Database/mongodb/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>MongoDB</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Database/redis/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Redis</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>软件知识</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Software/data-structure/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>数据结构</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Software/algorithm/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>算法</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Software/design-pattern/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>设计模式</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>工具</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/git/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Git</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/vscode/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vscode</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/vim/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vim</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/window-terminal" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Window Terminal</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/powershell" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Powershell</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/node-tree-cli" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>node-tree-cli</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-link" data-v-0fce24fe data-v-2cb643ba><a class="item" href="/Books/" data-v-2cb643ba>已阅书籍 <!----></a></div></div><!--]--><!----><div class="item" data-v-0fce24fe><div class="nav-link" data-v-0fce24fe data-v-2cb643ba><a class="item isExternal" href="https://github.com/xutao0793/blog" target="_blank" rel="noopener noreferrer" data-v-2cb643ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-2cb643ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-79af364c><nav class="nav-links nav" data-v-79af364c data-v-0fce24fe><!--[--><div class="item" data-v-0fce24fe><div class="nav-link" data-v-0fce24fe data-v-2cb643ba><a class="item" href="/Design/" data-v-2cb643ba>设计 <!----></a></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端语言</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/HTML/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>HTML</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/CSS/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>CSS</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/ES/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>ES</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Language/TS/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>TS</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端框架</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>UI组件库</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Framework/Element-UI/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Element-UI</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>Web端</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Framework/Vue/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vue技术栈</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item active" href="/FE-Framework/vue-technology-source-code" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vue技术栈源码</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Framework/React/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>React技术栈</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端工程化</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/intro-fe-engineering" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>概念理解</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>初始化</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/dev-env" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>配置环境</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/cli" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>脚手架CLI</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/project-directory" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>工程目录</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/package-json" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>package.json</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/initial/browserslist" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>browserslist</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>开发DEV</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-server" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>本地服务</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-linter/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>开发规范</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-mock/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>mock环境</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-test/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>测试</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/dev-debug" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>调试</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>构建CI</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-babel/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Babel</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-postcss/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Postcss</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-webpack/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Webapck</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-rollup" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>rollup</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-vite/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>vite</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-gulp/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>gulp</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/ci-run-script/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>run-script</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>部署CD</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/cd-deploy/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>自动化部署</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/cd-release/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>发布策略</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>运维OP</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/op-monitor/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>数据监控</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Engineering/op-performance/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>性能优化</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>前端技术方向</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/responsive-web-design" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>响应式网页设计</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/backend-for-frontend" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>BFF</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>微前端</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/intro-micro-fe" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>微前端概念</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/qiankun" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>qiankun</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/monorepo" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>monorepo工程</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/micro-frontend/lerna" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>lerna</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>可视化</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/visualize/svg/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>SVG</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/visualize/canvas/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Canvas</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/FE-Technology/visualize/webgl/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>WebGl</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>浏览器</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/1-BOM/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>BOM</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/2-DOM/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>DOM</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/3-CSSOM/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>CSSOM</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/4-render/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>渲染</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/5-cache/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>缓存</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/6-storage/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>本地存储</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/7-security/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>安全</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Browser/8-new-api/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>新API</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>网络</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>网络协议</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/protocol/index" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>HTTP</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/protocol/tcp-udp" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>TCP/UDP</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/protocol/dns" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>DNS</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>网络通信</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/XMLHttpRequest" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>XMLHttpRequest</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/axios/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Axios</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/fetch/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Fetch</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/EventSource" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>EventSource</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/websocket" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>WebSocket</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><li class="dialog-item" data-v-8afceaa4><dl class="nav-dropdown-subitem-wrapper" data-v-8afceaa4><dt data-v-8afceaa4>接口规范</dt><!--[--><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/restful/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>RESTful</span><span class="icon" data-v-26978090><!----></span></a></div></dd><dd data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Network/graphql/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>GraphQL</span><span class="icon" data-v-26978090><!----></span></a></div></dd><!--]--></dl></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>服务端</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/node/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Node</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/connect/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Connect</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/express/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Express</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/koa/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Koa</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/nest/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Nest</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/bash/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Bash</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Server/nginx/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Nginx</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>数据库</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Database/mysql/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>MySQL</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Database/mongodb/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>MongoDB</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Database/redis/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Redis</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>软件知识</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Software/data-structure/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>数据结构</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Software/algorithm/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>算法</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Software/design-pattern/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>设计模式</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-dropdown-link" data-v-0fce24fe data-v-8afceaa4><button class="button" data-v-8afceaa4><span class="button-text" data-v-8afceaa4>工具</span><span class="right button-arrow" data-v-8afceaa4></span></button><ul class="dialog" data-v-8afceaa4><!--[--><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/git/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Git</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/vscode/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vscode</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/vim/" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Vim</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/window-terminal" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Window Terminal</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/powershell" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>Powershell</span><span class="icon" data-v-26978090><!----></span></a></div></li><li class="dialog-item" data-v-8afceaa4><div class="nav-dropdown-link-item" data-v-8afceaa4 data-v-26978090><a class="item" href="/Tools/node-tree-cli" data-v-26978090><span class="arrow" data-v-26978090></span><span class="text" data-v-26978090>node-tree-cli</span><span class="icon" data-v-26978090><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-0fce24fe><div class="nav-link" data-v-0fce24fe data-v-2cb643ba><a class="item" href="/Books/" data-v-2cb643ba>已阅书籍 <!----></a></div></div><!--]--><!----><div class="item" data-v-0fce24fe><div class="nav-link" data-v-0fce24fe data-v-2cb643ba><a class="item isExternal" href="https://github.com/xutao0793/blog" target="_blank" rel="noopener noreferrer" data-v-2cb643ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-2cb643ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-79af364c><!--[--><li class="sidebar-link"><p class="sidebar-link-item">源码vue</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-0-index">内容目录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-1-reactivity-1-detection-chnage">响应式原理1：侦测数据变化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-1-reactivity-2-collect-dependency">响应式原理2：收集依赖</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-1-reactivity-3-dispatch-update">响应式原理3：源发更新</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-1-reactivity-4-summary">响应式原理4：总结</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-2-compile-0.md">模板编译1：模板内容的几种形式</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-2-compile-1-parse.md">模板编译2：解析器parse</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-2-compile-2-optimize.md">模板编译3：优化器optimize</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-2-compile-3-generate.md">模板编译4：生成器generate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-3-virtual-dom-1-create-vnode">视图渲染1：virtual dom 和 vnode</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-3-virtual-dom-2-diff">视图渲染2：diff算法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-4-component-1-extend">组件1：继承extend</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-4-component-2-createComponent">组件2：实例化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-4-component-3-slot">组件3：插槽slot</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-4-component-4-async">组件4：异步组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-4-component-5-keep-alive">组件5：内部组件keep-alive</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-5-initialize-1-constructor">Vue构造函数及实例化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-5-initialize-2-mergeOptions">选项合并mergeOptions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-5-initialize-3-options">选项处理options</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-1-lifecycle">生命周期lifecycle</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-2-event">事件中心event</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#模板编译1：parse">模板编译1：parse</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#模板编译2：generate">模板编译2：generate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#渲染1：-render">渲染1：_render</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#渲染2：vm-update">渲染2：vm._update</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#组件事件的处理">组件事件的处理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#标准元素的事件处理">标准元素的事件处理</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-3-nextTick">异步任务nextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-4-directive">指令directive</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-5-filter">过滤器filter</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">源码vue-router</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-router-source-code-1-install">1安装install</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-router-source-code-2-init">2初始化init</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-router-source-code-3-matcher">3匹配路由matcher</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-router-source-code-4-history">路由对象</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-router-source-code-5-router-link">导航router-link</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-router-source-code-6-router-view">视图router-view</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">源码vuex</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vuex-source-code-1-install">1注册</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vuex-source-code-2-instance">2实例化instance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vuex-source-code-3-api">3接口api</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vuex-source-code-4-register">4路由注册register</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vuex-source-code-5-plugin">5插件实现plugin</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">源码vue-server-render</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/FE-Framework/vue-technology-source-code/vue-ssr-source-code">vue-ssr</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-30e7de44><div class="container" data-v-30e7de44><!--[--><!--]--><div style="position:relative;" class="content" data-v-30e7de44><div><h1 id="事件中心-event" tabindex="-1">事件中心 event <a class="header-anchor" href="#事件中心-event" aria-hidden="true">#</a></h1><p><div class="table-of-contents"><ul><li><a href="#模板编译1：parse">模板编译1：parse</a></li><li><a href="#模板编译2：generate">模板编译2：generate</a></li><li><a href="#渲染1：-render">渲染1：_render</a></li><li><a href="#渲染2：vm-update">渲染2：vm._update</a></li><li><a href="#组件事件的处理">组件事件的处理</a></li><li><a href="#标准元素的事件处理">标准元素的事件处理</a></li></ul></div></p><p>Vue 中的事件分为两种：</p><ul><li>原生 DOM 事件：原生 DOM 节点只能添加原生 DOM 事件。</li><li>组件自定义事件：只有组件节点才可以添加自定义事件，如果需要在组件上添加原生DOM事件，需要使用 .native 修饰符，并且该事件作用在组件根节点上的真实DOM元素。</li></ul><blockquote><p>.native 修饰符只能添加在组件上，对真实DOM节点的事件添加.native 修饰符会被忽略。</p></blockquote><p>例子：</p><div class="language-js"><pre><code><span class="token keyword">let</span> Child <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 原生 DOM 元素添加原生 DOM 事件</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;&lt;button @click=&quot;clickHandler($event)&quot;&gt;click me&lt;/button&gt;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Button clicked!&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;select&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 组件 child 上添加自定义事件 select，以及在组件上添加.native修饰符的原生事件</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;&#39;</span> <span class="token operator">+</span>
  <span class="token string">&#39;&lt;child @select=&quot;selectHandler&quot; @click.native.prevent=&quot;clickHandler&quot;&gt;&lt;/child&gt;&#39;</span> <span class="token operator">+</span>
  <span class="token string">&#39;&lt;/div&gt;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Child clicked!&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">selectHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Child select!&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Child
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>按照这个例子，看下 Vue 源码中对事件的处理逻辑</p><h2 id="模板编译1：parse" tabindex="-1">模板编译1：parse <a class="header-anchor" href="#模板编译1：parse" aria-hidden="true">#</a></h2><p>模板编译 div 过程略过，直到编译 child 标签时：</p><p>parse =&gt; parseHTML =&gt; parseStartTag =&gt; handleStartTag =&gt; options.start =&gt; closeElement =&gt; processElement =&gt; processAttrs</p><p>看下 processAttrs:</p><div class="language-js"><pre><code><span class="token comment">// var onRE = /^@|^v-on:/;</span>
<span class="token comment">// var dirRE = /^v-|^@|^:|^#/;</span>
<span class="token comment">// var argRE = /:(.*)$/;</span>
<span class="token comment">// var bindRE = /^:|^\.|^v-bind:/;</span>
<span class="token comment">// var modifierRE = /\.[^.\]]+(?=[^\]]*$)/g;</span>
<span class="token comment">// var dynamicArgRE = /^\[.*\]$/;</span>
<span class="token comment">// 这个函数处理了修饰符、事件过滤器、事件绑定</span>
<span class="token keyword">function</span> <span class="token function">processAttrs</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// attrsList: [{name: &#39;id&#39;, value: &#39;test_id&#39;,start,end}, {name: &#39;@click&#39;, value: &#39;onClick&#39;,start,end}]</span>
  <span class="token keyword">var</span> list <span class="token operator">=</span> el<span class="token punctuation">.</span>attrsList<span class="token punctuation">;</span>
  <span class="token keyword">var</span> i<span class="token punctuation">,</span> l<span class="token punctuation">,</span> name<span class="token punctuation">,</span> rawName<span class="token punctuation">,</span> value<span class="token punctuation">,</span> modifiers<span class="token punctuation">,</span> syncGen<span class="token punctuation">,</span> isDynamic<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> rawName <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    value <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dirRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// dirRE = /^v-|^@|^:|^#/; 即匹配 v-on / @ / v-bind / : / v-slot / #</span>
      <span class="token comment">// mark element as dynamic</span>
      el<span class="token punctuation">.</span>hasBindings <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// modifiers 解析动态属性修饰符，比如 @click.stop, v-bind:show.sync</span>
      <span class="token comment">// modifiers = {sync: true, native: true}</span>
      modifiers <span class="token operator">=</span> <span class="token function">parseModifiers</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>dirRE<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// support .foo shorthand syntax for the .prop modifier</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>modifierRE<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>bindRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// v-bind:attr or :attr</span>
        <span class="token comment">// 省略代码：对 v-bind 的处理</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>onRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// v-on @</span>
        name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>onRE<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        isDynamic <span class="token operator">=</span> dynamicArgRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isDynamic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 解析事件各种修饰符，最后添加 el.events 或 el.nativeEvents 数组中储存着 handler</span>
        <span class="token function">addHandler</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> modifiers<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> warn$2<span class="token punctuation">,</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> isDynamic<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// normal directives： v-show v-text v-html 自定义指令</span>
        <span class="token comment">// 对剩余指令的处理，如 v-show v-text v-html 以及自定义指令</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// literal attribute</span>
      <span class="token comment">// 对静态属性的处理，如title href src</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在processAttrs 中，省略部分代码主要关注事件指令的处理。在对标签属性的处理过程中，判断如果是指令，首先通过 parseModifiers 解析出修饰符，然后判断如果事件的指令，则执行 addHandler 方法</p><div class="language-js"><pre><code><span class="token comment">// 事件修饰符</span>
<span class="token comment">// .stop - 调用 event.stopPropagation()。阻止冒泡</span>
<span class="token comment">// .prevent - 调用 event.preventDefault()。阻止默认行为</span>
<span class="token comment">// .capture - 添加事件侦听器时使用 capture 模式。捕获模式</span>
<span class="token comment">// .passive - (2.3.0) 以 { passive: true } 模式添加侦听器。 冒泡模式</span>
<span class="token comment">// .self - 只当事件是从侦听器绑定的元素本身触发时才触发回调。</span>
<span class="token comment">// .native - 监听组件根元素的原生事件。</span>
<span class="token comment">// .once - 只触发一次回调。</span>
<span class="token comment">// .{keyCode | keyAlias} - 只当事件是从特定键触发时才触发回调。</span>
<span class="token comment">// .left - (2.2.0) 只当点击鼠标左键时触发。</span>
<span class="token comment">// .right - (2.2.0) 只当点击鼠标右键时触发。</span>
<span class="token comment">// .middle - (2.2.0) 只当点击鼠标中键时触发。</span>
<span class="token keyword">function</span> <span class="token function">addHandler</span> <span class="token punctuation">(</span>
  <span class="token parameter">el<span class="token punctuation">,</span>
  name<span class="token punctuation">,</span>
  value<span class="token punctuation">,</span>
  modifiers<span class="token punctuation">,</span>
  important<span class="token punctuation">,</span>
  warn<span class="token punctuation">,</span>
  range<span class="token punctuation">,</span>
  dynamic</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  modifiers <span class="token operator">=</span> modifiers <span class="token operator">||</span> emptyObject<span class="token punctuation">;</span>
  <span class="token comment">// warn prevent and passive modifier</span>
  <span class="token comment">/* istanbul ignore if */</span>
  <span class="token comment">// prevent passive 不能一起使用</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    warn <span class="token operator">&amp;&amp;</span>
    modifiers<span class="token punctuation">.</span>prevent <span class="token operator">&amp;&amp;</span> modifiers<span class="token punctuation">.</span>passive
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token string">&#39;passive and prevent can\&#39;t be used together. &#39;</span> <span class="token operator">+</span>
      <span class="token string">&#39;Passive handler can\&#39;t prevent default event.&#39;</span><span class="token punctuation">,</span>
      range
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// normalize click.right and click.middle since they don&#39;t actually fire</span>
  <span class="token comment">// this is technically browser-specific, but at least for now browsers are</span>
  <span class="token comment">// the only target envs that have right/middle clicks.</span>
  <span class="token comment">// 鼠标右键、中键触发事件</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dynamic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name <span class="token operator">=</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;)===&#39;click&#39;?&#39;contextmenu&#39;:(&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name <span class="token operator">=</span> <span class="token string">&#39;contextmenu&#39;</span><span class="token punctuation">;</span>
      <span class="token keyword">delete</span> modifiers<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">.</span>middle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dynamic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name <span class="token operator">=</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;)===&#39;click&#39;?&#39;mouseup&#39;:(&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name <span class="token operator">=</span> <span class="token string">&#39;mouseup&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 这里使用使用标记，在 patch 渲染阶段会根据这些标记会有对应模式的特殊处理</span>
  <span class="token comment">// check capture modifier 捕获模式</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">.</span>capture<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">delete</span> modifiers<span class="token punctuation">.</span>capture<span class="token punctuation">;</span>
    name <span class="token operator">=</span> <span class="token function">prependModifierMarker</span><span class="token punctuation">(</span><span class="token string">&#39;!&#39;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> dynamic<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">.</span>once<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 只调用一次</span>
    <span class="token keyword">delete</span> modifiers<span class="token punctuation">.</span>once<span class="token punctuation">;</span>
    name <span class="token operator">=</span> <span class="token function">prependModifierMarker</span><span class="token punctuation">(</span><span class="token string">&#39;~&#39;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> dynamic<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// istanbul ignore if  冒泡模式</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">.</span>passive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">delete</span> modifiers<span class="token punctuation">.</span>passive<span class="token punctuation">;</span>
    name <span class="token operator">=</span> <span class="token function">prependModifierMarker</span><span class="token punctuation">(</span><span class="token string">&#39;&amp;&#39;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> dynamic<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> events<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers<span class="token punctuation">.</span>native<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">delete</span> modifiers<span class="token punctuation">.</span>native<span class="token punctuation">;</span>
    events <span class="token operator">=</span> el<span class="token punctuation">.</span>nativeEvents <span class="token operator">||</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>nativeEvents <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    events <span class="token operator">=</span> el<span class="token punctuation">.</span>events <span class="token operator">||</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// {name: &#39;@click&#39;, value: &#39;onClick&#39;,start,end}</span>
  <span class="token keyword">var</span> newHandler <span class="token operator">=</span> <span class="token function">rangeSetItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">dynamic</span><span class="token operator">:</span> dynamic <span class="token punctuation">}</span><span class="token punctuation">,</span> range<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// newHandler = &quot;onClick&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiers <span class="token operator">!==</span> emptyObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newHandler<span class="token punctuation">.</span>modifiers <span class="token operator">=</span> modifiers<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> handlers <span class="token operator">=</span> events<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/* istanbul ignore if */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>handlers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    important <span class="token operator">?</span> handlers<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>newHandler<span class="token punctuation">)</span> <span class="token operator">:</span> handlers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>handlers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    events<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> important <span class="token operator">?</span> <span class="token punctuation">[</span>newHandler<span class="token punctuation">,</span> handlers<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span>handlers<span class="token punctuation">,</span> newHandler<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    events<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> newHandler<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  el<span class="token punctuation">.</span>plain <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，addHandler 函数：</p><ol><li>是一边校验 modifiers，一边删除，保留最后未处理的修饰符。</li><li>通过 .native 修饰符区分原生事件还是组件自定义事件，分别存放在 el.nativeEvents 和 el.events</li></ol><p>在我们的例子中，组件 child 和 组件内部节点 div 创建的 ASTElement 对象的事件属性：</p><div class="language-js"><pre><code><span class="token comment">// 父组件的 child 节点生成的 el.events 和 el.nativeEvents 如下：</span>
el<span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">select</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;selectHandler&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

el<span class="token punctuation">.</span>nativeEvents <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">click</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;clickHandler&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">modifiers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">prevent</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 子组件的 button 节点生成的 el.events 如下：</span>
el<span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">click</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;clickHandler($event)&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>parse 函数执行后生成 AST，传给 optimize ，它的逻辑主要优化静态节点和静态根节点，跟当前事件分析无关，所以略过。接着来到模板编译的最后阶段 generate</p><h2 id="模板编译2：generate" tabindex="-1">模板编译2：generate <a class="header-anchor" href="#模板编译2：generate" aria-hidden="true">#</a></h2><p>generate 阶段的主要目的是生成可用于渲染函数的代码字符串。</p><p>gererate =&gt; genElement =&gt; genData$2</p><p>genData$2 函数主要是从 ASTElement 对象上解析组装生成 data，用于 _createElement(tag,data,children) 函数的的第二入参。整个 generate 阶段都是字符串拼接过程，所以 genData$2 也是拼接 data 的字符串形式。</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">genData$2</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * data = {
   *  dirs: dirs,
   *  key: key,
   *  ref: ref
   * ...
   * }
   */</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&#39;{&#39;</span><span class="token punctuation">;</span>

  <span class="token comment">// directives first.</span>
  <span class="token comment">// directives may mutate the el&#39;s other properties before they are generated.</span>
  <span class="token keyword">var</span> dirs <span class="token operator">=</span> <span class="token function">genDirectives</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirs<span class="token punctuation">)</span> <span class="token punctuation">{</span> data <span class="token operator">+=</span> dirs <span class="token operator">+</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token comment">// key</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;key:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ref</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;ref:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>ref<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>refInFor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;refInFor:true,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// pre</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;pre:true,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// record original tag name for components using &quot;is&quot; attribute</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;tag:\&quot;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// module data generation functions</span>
  <span class="token comment">// dateGenFns =&gt; genData</span>
  <span class="token comment">// function genData (el) {</span>
  <span class="token comment">//   var data = &#39;&#39;;</span>
  <span class="token comment">//   if (el.staticClass) {</span>
  <span class="token comment">//     data += &quot;staticClass:&quot; + (el.staticClass) + &quot;,&quot;;</span>
  <span class="token comment">//   }</span>
  <span class="token comment">//   if (el.classBinding) {</span>
  <span class="token comment">//     data += &quot;class:&quot; + (el.classBinding) + &quot;,&quot;;</span>
  <span class="token comment">//   }</span>
  <span class="token comment">//   return data</span>
  <span class="token comment">// }</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> state<span class="token punctuation">.</span>dataGenFns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> state<span class="token punctuation">.</span>dataGenFns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// attributes</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;attrs:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">genProps</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// DOM props</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;domProps:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">genProps</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// event handlers</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token function">genHandlers</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>events<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>nativeEvents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token function">genHandlers</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>nativeEvents<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// slot target</span>
  <span class="token comment">// only for non-scoped slots</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>slotTarget <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>el<span class="token punctuation">.</span>slotScope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;slot:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>slotTarget<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// scoped slots</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>scopedSlots<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token function">genScopedSlots</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> el<span class="token punctuation">.</span>scopedSlots<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// component v-model</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">+=</span> <span class="token string">&quot;model:{value:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>model<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,callback:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>model<span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,expression:&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>model<span class="token punctuation">.</span>expression<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;},&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// inline-template</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>inlineTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> inlineTemplate <span class="token operator">=</span> <span class="token function">genInlineTemplate</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inlineTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      data <span class="token operator">+=</span> inlineTemplate <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  data <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;}&#39;</span><span class="token punctuation">;</span>
  <span class="token comment">// v-bind dynamic argument wrap</span>
  <span class="token comment">// v-bind with dynamic arguments must be applied using the same v-bind object</span>
  <span class="token comment">// merge helper so that class/style/mustUseProp attrs are handled correctly.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>dynamicAttrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">=</span> <span class="token string">&quot;_b(&quot;</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">&quot;,\&quot;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\&quot;,&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">genProps</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>dynamicAttrs<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// v-bind data wrap</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>wrapData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">wrapData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// v-on data wrap</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>wrapListeners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">wrapListeners</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> data
<span class="token punctuation">}</span>
</code></pre></div><p>此时，我们关注对事件的解析，从 ASTElement.envents 和 ASTElement.nativeEvents 中取出事件，调用 genHandlers，对组件中使用了 .native 修修饰符的事件，第二个入参会传入 true，即 isNative = true</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">genHandlers</span> <span class="token punctuation">(</span>
  <span class="token parameter">events<span class="token punctuation">,</span>
  isNative</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> prefix <span class="token operator">=</span> isNative <span class="token operator">?</span> <span class="token string">&#39;nativeOn:&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;on:&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> staticHandlers <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> dynamicHandlers <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 循环遍历，处理每一个事件 genHandler</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> handlerCode <span class="token operator">=</span> <span class="token function">genHandler</span><span class="token punctuation">(</span>events<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>events<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> events<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>dynamic<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      dynamicHandlers <span class="token operator">+=</span> name <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> handlerCode <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      staticHandlers <span class="token operator">+=</span> <span class="token string">&quot;\&quot;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;\&quot;:&quot;</span> <span class="token operator">+</span> handlerCode <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  staticHandlers <span class="token operator">=</span> <span class="token string">&quot;{&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>staticHandlers<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dynamicHandlers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> prefix <span class="token operator">+</span> <span class="token string">&quot;_d(&quot;</span> <span class="token operator">+</span> staticHandlers <span class="token operator">+</span> <span class="token string">&quot;,[&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>dynamicHandlers<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;])&quot;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> prefix <span class="token operator">+</span> staticHandlers
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>genHandlers 方法遍历事件对象 events，对同一个事件名称的事件调用 genHandler(name, events[name]) 方法</p><div class="language-js"><pre><code><span class="token keyword">var</span> fnExpRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([\w$_]+|\([^)]*?\))\s*=&gt;|^function(?:\s+[\w$]+)?\s*\(</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fnInvokeRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\([^)]*?\);*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> simplePathRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\[&#39;[^&#39;]*?&#39;]|\[&quot;[^&quot;]*?&quot;]|\[\d+]|\[[A-Za-z_$][\w$]*])*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">genHandler</span> <span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;function(){}&#39;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">genHandler</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> isMethodPath <span class="token operator">=</span> simplePathRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isFunctionExpression <span class="token operator">=</span> fnExpRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isFunctionInvocation <span class="token operator">=</span> simplePathRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>fnInvokeRE<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">.</span>modifiers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isMethodPath <span class="token operator">||</span> isFunctionExpression<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> handler<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;function($event){&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>isFunctionInvocation <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&quot;return &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span> <span class="token comment">// inline statement</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> code <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> genModifierCode <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 处理各类修饰符，拼接对应的代码</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> handler<span class="token punctuation">.</span>modifiers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>modifierCode<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        genModifierCode <span class="token operator">+=</span> modifierCode<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// stop: &#39;$event.stopPropagation();&#39;,</span>
        <span class="token comment">// left/right</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>keyCodes<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#39;exact&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> modifiers <span class="token operator">=</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span>modifiers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        genModifierCode <span class="token operator">+=</span> <span class="token function">genGuard</span><span class="token punctuation">(</span>
          <span class="token punctuation">[</span><span class="token string">&#39;ctrl&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;shift&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;alt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;meta&#39;</span><span class="token punctuation">]</span>
            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">keyModifier</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">!</span>modifiers<span class="token punctuation">[</span>keyModifier<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">keyModifier</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;$event.&quot;</span> <span class="token operator">+</span> keyModifier <span class="token operator">+</span> <span class="token string">&quot;Key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;||&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      code <span class="token operator">+=</span> <span class="token function">genKeyFilter</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Make sure modifiers like prevent and stop get executed after key filtering</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>genModifierCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      code <span class="token operator">+=</span> genModifierCode<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> handlerCode <span class="token operator">=</span> isMethodPath
      <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&quot;return &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;($event)&quot;</span><span class="token punctuation">)</span>
      <span class="token operator">:</span> isFunctionExpression
        <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&quot;return (&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)($event)&quot;</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> isFunctionInvocation
          <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&quot;return &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token operator">:</span> handler<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;function($event){&quot;</span> <span class="token operator">+</span> code <span class="token operator">+</span> handlerCode <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>genHandler 函数先判断：</p><ul><li>如果 handler 是一个数组，就遍历它然后递归调用 genHandler 方法并拼接结果</li><li>接着对 modifiers 做判断，对于没有 modifiers 的情况，就根据 handler.value 不同情况处理，要么直接返回，要么返回一个函数包裹的表达式；- 对于有 modifiers 的情况，则对各种不同的 modifer 情况做不同处理，添加相应的代码串。</li></ul><p>其中不同修饰符，需要补全不同的代码串：</p><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">genGuard</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">condition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;if(&quot;</span> <span class="token operator">+</span> condition <span class="token operator">+</span> <span class="token string">&quot;)return null;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> modifierCode <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">stop</span><span class="token operator">:</span> <span class="token string">&#39;$event.stopPropagation();&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">prevent</span><span class="token operator">:</span> <span class="token string">&#39;$event.preventDefault();&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">self</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;$event.target !== $event.currentTarget&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ctrl</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;!$event.ctrlKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">shift</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;!$event.shiftKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">alt</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;!$event.altKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;!$event.metaKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;&#39;button&#39; in $event &amp;&amp; $event.button !== 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">middle</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;&#39;button&#39; in $event &amp;&amp; $event.button !== 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token function">genGuard</span><span class="token punctuation">(</span><span class="token string">&quot;&#39;button&#39; in $event &amp;&amp; $event.button !== 2&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// KeyboardEvent.keyCode aliases</span>
<span class="token keyword">var</span> keyCodes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">esc</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tab</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enter</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
  <span class="token literal-property property">space</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
  <span class="token literal-property property">up</span><span class="token operator">:</span> <span class="token number">38</span><span class="token punctuation">,</span>
  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">37</span><span class="token punctuation">,</span>
  <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">39</span><span class="token punctuation">,</span>
  <span class="token literal-property property">down</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
  <span class="token string-property property">&#39;delete&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// KeyboardEvent.key aliases</span>
<span class="token keyword">var</span> keyNames <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// #7880: IE11 and Edge use `Esc` for Escape key name.</span>
  <span class="token literal-property property">esc</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Esc&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Escape&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tab</span><span class="token operator">:</span> <span class="token string">&#39;Tab&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enter</span><span class="token operator">:</span> <span class="token string">&#39;Enter&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// #9112: IE11 uses `Spacebar` for Space key name.</span>
  <span class="token literal-property property">space</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Spacebar&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// #7806: IE11 uses key names without `Arrow` prefix for arrow keys.</span>
  <span class="token literal-property property">up</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Up&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ArrowUp&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Left&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ArrowLeft&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Right&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ArrowRight&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">down</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Down&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ArrowDown&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// #9112: IE11 uses `Del` for Delete key name.</span>
  <span class="token string-property property">&#39;delete&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Backspace&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Delete&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Del&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在我们的例子中，最终生成的 data 字符串：</p><div class="language-js"><pre><code><span class="token comment">// child</span>
&#39;<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;on&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;select&quot;</span><span class="token operator">:</span> selectHandler<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;nativeOn&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;click&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">clickHandler</span><span class="token punctuation">(</span>$event<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>&#39;

<span class="token comment">// div</span>
&#39;<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;on&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;click&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clickHandler</span><span class="token punctuation">(</span>$event<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>&#39;
</code></pre></div><p>到此，编译部分完成，下一个阶段是渲染，分别调用 vm._render 和 vm.update 函数</p><h2 id="渲染1：-render" tabindex="-1">渲染1：_render <a class="header-anchor" href="#渲染1：-render" aria-hidden="true">#</a></h2><p>vm._render 函数的主要作用是生成虚拟DOM，执行 options.render函数中调用 _createElement 生成嵌套的 vnode。</p><p><code>vnode = render.call(vm._renderProxy, vm.$createElement);</code></p><p>此时在 _createElement 函数中，如果解析到不是正常标签，则会调用创建组件的函数 createComponent</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">createComponent</span> <span class="token punctuation">(</span>
    <span class="token parameter">Ctor<span class="token punctuation">,</span>
    data<span class="token punctuation">,</span>
    context<span class="token punctuation">,</span>
    children<span class="token punctuation">,</span>
    tag</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> baseCtor <span class="token operator">=</span> context<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_base<span class="token punctuation">;</span>

    <span class="token comment">// plain options object: turn it into a constructor</span>
    <span class="token comment">// 1. 创建组件的构造函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Ctor <span class="token operator">=</span> baseCtor<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 省略代码...</span>

    data <span class="token operator">=</span> data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// resolve constructor options in case global mixins are applied after</span>
    <span class="token comment">// component constructor creation</span>
    <span class="token comment">// 2. 解析组件构造函数的 options</span>
    <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 省略代码...</span>

    <span class="token comment">// 3. 关键步骤：对于组件，会将 data.on 数据即 ASTElement.events 数据即组件自定义事件存入 listeners</span>
    <span class="token comment">// 而将 data.nativeOn 数据即 ASTElement.nativeEvents 即添加了.native 修饰符的事件存入 data.on</span>
    <span class="token comment">// extract listeners, since these needs to be treated as</span>
    <span class="token comment">// child component listeners instead of DOM listeners</span>
    <span class="token keyword">var</span> listeners <span class="token operator">=</span> data<span class="token punctuation">.</span>on<span class="token punctuation">;</span>
    <span class="token comment">// replace with listeners with .native modifier</span>
    <span class="token comment">// so it gets processed during parent component patch.</span>
    data<span class="token punctuation">.</span>on <span class="token operator">=</span> data<span class="token punctuation">.</span>nativeOn<span class="token punctuation">;</span>

    <span class="token comment">// 省略代码</span>

    <span class="token comment">// install component management hooks onto the placeholder node</span>
    <span class="token comment">// 安装组件钩子函数，包括 init / prePatch / insert / destory，其中 init 函数会使用 new Ctor 创建组件实例</span>
    <span class="token function">installComponentHooks</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// return a placeholder vnode</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> Ctor<span class="token punctuation">.</span>options<span class="token punctuation">.</span>name <span class="token operator">||</span> tag<span class="token punctuation">;</span>
    <span class="token keyword">var</span> vnode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VNode</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token string">&quot;vue-component-&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>Ctor<span class="token punctuation">.</span>cid<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>name <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      data<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> context<span class="token punctuation">,</span> <span class="token comment">// .native 修饰符的原生事件存入 vnode.data.on</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">Ctor</span><span class="token operator">:</span> Ctor<span class="token punctuation">,</span> <span class="token literal-property property">propsData</span><span class="token operator">:</span> propsData<span class="token punctuation">,</span> <span class="token literal-property property">listeners</span><span class="token operator">:</span> listeners<span class="token punctuation">,</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> tag<span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> children <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 组件自定义的事件存储 vnode.componentOptions.listeners</span>
      asyncFactory
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> vnode
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="渲染2：vm-update" tabindex="-1">渲染2：vm._update <a class="header-anchor" href="#渲染2：vm-update" aria-hidden="true">#</a></h2><p>vm._render 函数生成虚拟 DOM 树之后，传入 vm._update</p><p><code>vm._update =&gt; vm.__patch__ =&gt; patch =&gt; createElm</code></p><p>createElm 函数的内部，第一步总是调用 createComponent 函数尝试是否能创建一个组件，如果不能返回 fase，执行正常元素的创建过程。如果是组件，那就执行 createComponent 函数内部的一系列逻辑，返回 true，return 退出 createElm 函数的执行。</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">createElm</span> <span class="token punctuation">(</span>
    <span class="token parameter">vnode<span class="token punctuation">,</span>
    insertedVnodeQueue<span class="token punctuation">,</span>
    parentElm<span class="token punctuation">,</span>
    refElm<span class="token punctuation">,</span>
    nested<span class="token punctuation">,</span>
    ownerArray<span class="token punctuation">,</span>
    index</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   
    <span class="token comment">// 省略代码...</span>
    
    <span class="token comment">// 尝试创建组件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">createComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 标准元素的处理</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">var</span> children <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
    <span class="token keyword">var</span> tag <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          creatingElmInVPre<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUnknownElement$$1</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> creatingElmInVPre<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">warn</span><span class="token punctuation">(</span>
            <span class="token string">&#39;Unknown custom element: &lt;&#39;</span> <span class="token operator">+</span> tag <span class="token operator">+</span> <span class="token string">&#39;&gt; - did you &#39;</span> <span class="token operator">+</span>
            <span class="token string">&#39;register the component correctly? For recursive components, &#39;</span> <span class="token operator">+</span>
            <span class="token string">&#39;make sure to provide the &quot;name&quot; option.&#39;</span><span class="token punctuation">,</span>
            vnode<span class="token punctuation">.</span>context
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> vnode<span class="token punctuation">.</span>ns
        <span class="token operator">?</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>ns<span class="token punctuation">,</span> tag<span class="token punctuation">)</span>
        <span class="token operator">:</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setScope</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">/* istanbul ignore if */</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理元素子节点</span>
        <span class="token function">createChildren</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> children<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 调用对应钩子函数</span>
          <span class="token function">invokeCreateHooks</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 将元素插入当前父元素</span>
        <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        creatingElmInVPre<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTrue</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>isComment<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>所以从 createElm 函数开始，分组件和标签元素的事件处理逻辑</p><h2 id="组件事件的处理" tabindex="-1">组件事件的处理 <a class="header-anchor" href="#组件事件的处理" aria-hidden="true">#</a></h2><p>vm._update 阶段 createComponet 函数中，即调用 init() 函数进行组件实例化。</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">createComponent</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> parentElm<span class="token punctuation">,</span> refElm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> isReactivated <span class="token operator">=</span> <span class="token function">isDef</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>componentInstance<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">.</span>keepAlive<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i <span class="token operator">=</span> i<span class="token punctuation">.</span>hook<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isDef</span><span class="token punctuation">(</span>i <span class="token operator">=</span> i<span class="token punctuation">.</span>init<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// </span>
      <span class="token function">i</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token comment">/* hydrating */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 省略代码...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时，我们看一下组件实例化过程，调用 <code>i(vnode, false /* hydrating */);</code>，实际上执行的就是 componentVNodeHooks.init 钩子。init 钩子函数中在 vm._render 阶段的 createComponent 函数中执行 installComponentHooks(data) 函数中添加的。</p><div class="language-js"><pre><code><span class="token keyword">var</span> componentVNodeHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">init</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> hydrating</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        vnode<span class="token punctuation">.</span>componentInstance <span class="token operator">&amp;&amp;</span>
        <span class="token operator">!</span>vnode<span class="token punctuation">.</span>componentInstance<span class="token punctuation">.</span>_isDestroyed <span class="token operator">&amp;&amp;</span>
        vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>keepAlive
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// kept-alive components, treat as a patch</span>
        <span class="token keyword">var</span> mountedNode <span class="token operator">=</span> vnode<span class="token punctuation">;</span> <span class="token comment">// work around flow</span>
        componentVNodeHooks<span class="token punctuation">.</span><span class="token function">prepatch</span><span class="token punctuation">(</span>mountedNode<span class="token punctuation">,</span> mountedNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> child <span class="token operator">=</span> vnode<span class="token punctuation">.</span>componentInstance <span class="token operator">=</span> <span class="token function">createComponentInstanceForVnode</span><span class="token punctuation">(</span>
          vnode<span class="token punctuation">,</span>
          activeInstance
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        child<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>hydrating <span class="token operator">?</span> vnode<span class="token punctuation">.</span>elm <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> hydrating<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 省略其它钩子函数 prePatch insert destory</span>
<span class="token punctuation">}</span>
</code></pre></div><p>init 函数调用的是 createComponentInstanceForVnode 函数</p><div class="language-js"><pre><code>  <span class="token keyword">function</span> <span class="token function">createComponentInstanceForVnode</span> <span class="token punctuation">(</span>
    vnode<span class="token punctuation">,</span> <span class="token comment">// we know it&#39;s MountedComponentVNode but flow doesn&#39;t</span>
    parent <span class="token comment">// activeInstance in lifecycle state</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">_isComponent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">_parentVnode</span><span class="token operator">:</span> vnode<span class="token punctuation">,</span>
      <span class="token literal-property property">parent</span><span class="token operator">:</span> parent
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// check inline-template render functions</span>
    <span class="token keyword">var</span> inlineTemplate <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>inlineTemplate<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>inlineTemplate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>render <span class="token operator">=</span> inlineTemplate<span class="token punctuation">.</span>render<span class="token punctuation">;</span>
      options<span class="token punctuation">.</span>staticRenderFns <span class="token operator">=</span> inlineTemplate<span class="token punctuation">.</span>staticRenderFns<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">vnode<span class="token punctuation">.</span>componentOptions<span class="token punctuation">.</span>Ctor</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>在 createComponentInstanceForVnode 函数内实例了组件的实例化 <code>new vnode.componentOptions.Ctor(options)</code></p><p>注意这里 <code>_parentVnode: vnode</code>，那么关于原生事件的处理函数就变成了存储在 <code>_parentVnode.data.on</code> 中，自定义事件都在 <code>_parentVnode.componentOptions.listeners</code>。</p><p>因为 Ctor 继承于 Vue，所以 new Ctor 实际执行的就是 Vue.prototype._init 函数。</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">initMixin</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// a uid</span>
    vm<span class="token punctuation">.</span>_uid <span class="token operator">=</span> uid$3<span class="token operator">++</span><span class="token punctuation">;</span>

    
    <span class="token comment">// merge options</span>
    <span class="token comment">// 合并选项过程根 vue 实例和组件 Vue 实例区分处理</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>_isComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// optimize internal component instantiation</span>
      <span class="token comment">// since dynamic options merging is pretty slow, and none of the</span>
      <span class="token comment">// internal component options needs special treatment.</span>
      <span class="token function">initInternalComponent</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>$options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>
        <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">,</span>
        options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* istanbul ignore else */</span>
    <span class="token punctuation">{</span>
      <span class="token function">initProxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// expose real self</span>
    vm<span class="token punctuation">.</span>_self <span class="token operator">=</span> vm<span class="token punctuation">;</span>
    <span class="token function">initLifecycle</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 挂载内部属性：$root/$parent/$refs=[]/$children=[]/_watcher=null，以及一些生命状态标志 flag: _inactive=null/_isMounted=false/_isDestoryed=false/_isBeingDestoryed=false</span>
    <span class="token function">initEvents</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 挂载父组件传入的事件监听器 listeners 到实例 vm._events 对象上，来源于 template 解析到的 v-on 绑定的事件函数</span>
    <span class="token function">initRender</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 挂载 $attrs/$listeners，以及绑定 _c/$createElement</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;beforeCreate&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initInjections</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve injections before data/props 1. 解析 inject 属性的数据；2. 并将其设置响应式（即k-v转为getter/setter）同时挂载到 vm 上</span>
    <span class="token function">initState</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始 script 中的属性：initProps/initMethods/initData/initComputed/initWatch</span>
    <span class="token function">initProvide</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve provide after data/props</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;created&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在组件实例化时，合并配置的处理不同，组件是调用 <code>initInternalComponent(vm, options)</code>，其中对组件自定义事件有关代码：<code>opts._parentListeners = vnodeComponentOptions.listeners;</code></p><div class="language-js"><pre><code><span class="token comment">// 此时的入参 options = vnode，因为 i(vnode, false /* hydrating */)</span>
<span class="token keyword">function</span> <span class="token function">initInternalComponent</span> <span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> opts <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// doing this because it&#39;s faster than dynamic enumeration.</span>
    <span class="token keyword">var</span> parentVnode <span class="token operator">=</span> options<span class="token punctuation">.</span>_parentVnode<span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>parent <span class="token operator">=</span> options<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>_parentVnode <span class="token operator">=</span> parentVnode<span class="token punctuation">;</span>

    <span class="token keyword">var</span> vnodeComponentOptions <span class="token operator">=</span> parentVnode<span class="token punctuation">.</span>componentOptions<span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>propsData <span class="token operator">=</span> vnodeComponentOptions<span class="token punctuation">.</span>propsData<span class="token punctuation">;</span>
    <span class="token comment">// 这里拿到组件的自定义事件的处理函数</span>
    opts<span class="token punctuation">.</span>_parentListeners <span class="token operator">=</span> vnodeComponentOptions<span class="token punctuation">.</span>listeners<span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>_renderChildren <span class="token operator">=</span> vnodeComponentOptions<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>_componentTag <span class="token operator">=</span> vnodeComponentOptions<span class="token punctuation">.</span>tag<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>render<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      opts<span class="token punctuation">.</span>render <span class="token operator">=</span> options<span class="token punctuation">.</span>render<span class="token punctuation">;</span>
      opts<span class="token punctuation">.</span>staticRenderFns <span class="token operator">=</span> options<span class="token punctuation">.</span>staticRenderFns<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>合并配置完成后，继承执行函数实例化，执行了 <code>initEvents(vm)</code> 函数</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">initEvents</span> <span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>_events <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vm<span class="token punctuation">.</span>_hasHookEvent <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment">// init parent attached events</span>
  <span class="token keyword">var</span> listeners <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_parentListeners<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>listeners<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">updateComponentListeners</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>拿到 listeners 后，执行 updateComponentListeners(vm, listeners) 方法：</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">updateComponentListeners</span> <span class="token punctuation">(</span>
  <span class="token parameter">vm<span class="token punctuation">,</span>
  listeners<span class="token punctuation">,</span>
  oldListeners</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  target <span class="token operator">=</span> vm<span class="token punctuation">;</span>
  <span class="token function">updateListeners</span><span class="token punctuation">(</span>listeners<span class="token punctuation">,</span> oldListeners <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> add<span class="token punctuation">,</span> remove$1<span class="token punctuation">,</span> createOnceHandler<span class="token punctuation">,</span> vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
  target <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>updateListeners 主要逻辑： 1.</p><ol><li>对象新旧事件，确定是添加还是删除</li></ol><div class="language-js"><pre><code>  <span class="token keyword">function</span> <span class="token function">updateListeners</span> <span class="token punctuation">(</span>
    on<span class="token punctuation">,</span>
    oldOn<span class="token punctuation">,</span> <span class="token comment">// {}</span>
    add<span class="token punctuation">,</span>
    remove$$1<span class="token punctuation">,</span>
    createOnceHandler<span class="token punctuation">,</span>
    vm
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name<span class="token punctuation">,</span> def$$1<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> old<span class="token punctuation">,</span> event<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> on<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      def$$1 <span class="token operator">=</span> cur <span class="token operator">=</span> on<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
      old <span class="token operator">=</span> oldOn<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
      event <span class="token operator">=</span> <span class="token function">normalizeEvent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解析之前几个特别修饰符事件的处理 `passive =&gt; &amp;name   once =&gt; ~name   capture =&gt; !name`，</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token string">&quot;Invalid handler for event \&quot;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\&quot;: got &quot;</span> <span class="token operator">+</span> <span class="token function">String</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">,</span>
          vm
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>old<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>fns<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          cur <span class="token operator">=</span> on<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createFnInvoker</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTrue</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>once<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          cur <span class="token operator">=</span> on<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createOnceHandler</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>name<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> event<span class="token punctuation">.</span>capture<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">add</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>name<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> event<span class="token punctuation">.</span>capture<span class="token punctuation">,</span> event<span class="token punctuation">.</span>passive<span class="token punctuation">,</span> event<span class="token punctuation">.</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!==</span> old<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        old<span class="token punctuation">.</span>fns <span class="token operator">=</span> cur<span class="token punctuation">;</span>
        on<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 旧事件 oldOn 中有，但在新事件on没有的，应该删除</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> oldOn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>on<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event <span class="token operator">=</span> <span class="token function">normalizeEvent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">remove$$1</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>name<span class="token punctuation">,</span> oldOn<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>capture<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>我们这里关注还是 add 和 remove$1 函数</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> once</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>once<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">.</span><span class="token function">$once</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">remove</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>即 Vue 构造函数初始化时定义的事件中心：即把组件自定义事件都存储在 vm._events 属性中。</p><blockquote><p>vm._events 在 _init 函数中的 initEvents 定义，见上面。</p></blockquote><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">eventsMixin</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> hookRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^hook:</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$on</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> event<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          vm<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span>event<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// optimize hook:event cost by using a boolean flag marked at registration</span>
        <span class="token comment">// instead of a hash lookup</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hookRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          vm<span class="token punctuation">.</span>_hasHookEvent <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> vm
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$once</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">on</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vm<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> on<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      on<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn<span class="token punctuation">;</span>
      vm<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> on<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> vm
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$off</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token comment">// all</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vm<span class="token punctuation">.</span>_events <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> vm
      <span class="token punctuation">}</span>
      <span class="token comment">// array of events</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i$1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> event<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i$1 <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i$1<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          vm<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span>event<span class="token punctuation">[</span>i$1<span class="token punctuation">]</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> vm
      <span class="token punctuation">}</span>
      <span class="token comment">// specific event</span>
      <span class="token keyword">var</span> cbs <span class="token operator">=</span> vm<span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cbs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vm
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vm<span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> vm
      <span class="token punctuation">}</span>
      <span class="token comment">// specific handler</span>
      <span class="token keyword">var</span> cb<span class="token punctuation">;</span>
      <span class="token keyword">var</span> i <span class="token operator">=</span> cbs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cb <span class="token operator">=</span> cbs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cb <span class="token operator">===</span> fn <span class="token operator">||</span> cb<span class="token punctuation">.</span>fn <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          cbs<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> vm
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$emit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">var</span> lowerCaseEvent <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lowerCaseEvent <span class="token operator">!==</span> event <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">.</span>_events<span class="token punctuation">[</span>lowerCaseEvent<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">tip</span><span class="token punctuation">(</span>
            <span class="token string">&quot;Event \&quot;&quot;</span> <span class="token operator">+</span> lowerCaseEvent <span class="token operator">+</span> <span class="token string">&quot;\&quot; is emitted in component &quot;</span> <span class="token operator">+</span>
            <span class="token punctuation">(</span><span class="token function">formatComponentName</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; but the handler is registered for \&quot;&quot;</span> <span class="token operator">+</span> event <span class="token operator">+</span> <span class="token string">&quot;\&quot;. &quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;Note that HTML attributes are case-insensitive and you cannot use &quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;v-on to listen to camelCase events when using in-DOM templates. &quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;You should probably use \&quot;&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">hyphenate</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\&quot; instead of \&quot;&quot;</span> <span class="token operator">+</span> event <span class="token operator">+</span> <span class="token string">&quot;\&quot;.&quot;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">var</span> cbs <span class="token operator">=</span> vm<span class="token punctuation">.</span>_events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cbs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cbs <span class="token operator">=</span> cbs<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token function">toArray</span><span class="token punctuation">(</span>cbs<span class="token punctuation">)</span> <span class="token operator">:</span> cbs<span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token function">toArray</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&quot;event handler for \&quot;&quot;</span> <span class="token operator">+</span> event <span class="token operator">+</span> <span class="token string">&quot;\&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> cbs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">invokeWithErrorHandling</span><span class="token punctuation">(</span>cbs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">,</span> args<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> vm
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="标准元素的事件处理" tabindex="-1">标准元素的事件处理 <a class="header-anchor" href="#标准元素的事件处理" aria-hidden="true">#</a></h2><p>在上述分支片 vm._update =&gt; patch =&gt; createElm 函数中：</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">createElm</span> <span class="token punctuation">(</span>
    <span class="token parameter">vnode<span class="token punctuation">,</span>
    insertedVnodeQueue<span class="token punctuation">,</span>
    parentElm<span class="token punctuation">,</span>
    refElm<span class="token punctuation">,</span>
    nested<span class="token punctuation">,</span>
    ownerArray<span class="token punctuation">,</span>
    index</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   
    <span class="token comment">// 省略代码...</span>
    
    <span class="token comment">// 尝试创建组件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">createComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 标准元素的处理</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">var</span> children <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
    <span class="token keyword">var</span> tag <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          creatingElmInVPre<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUnknownElement$$1</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> creatingElmInVPre<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">warn</span><span class="token punctuation">(</span>
            <span class="token string">&#39;Unknown custom element: &lt;&#39;</span> <span class="token operator">+</span> tag <span class="token operator">+</span> <span class="token string">&#39;&gt; - did you &#39;</span> <span class="token operator">+</span>
            <span class="token string">&#39;register the component correctly? For recursive components, &#39;</span> <span class="token operator">+</span>
            <span class="token string">&#39;make sure to provide the &quot;name&quot; option.&#39;</span><span class="token punctuation">,</span>
            vnode<span class="token punctuation">.</span>context
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> vnode<span class="token punctuation">.</span>ns
        <span class="token operator">?</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>ns<span class="token punctuation">,</span> tag<span class="token punctuation">)</span>
        <span class="token operator">:</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setScope</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">/* istanbul ignore if */</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理元素子节点</span>
        <span class="token function">createChildren</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> children<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 调用对应钩子函数</span>
          <span class="token function">invokeCreateHooks</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 将元素插入当前父元素</span>
        <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        creatingElmInVPre<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTrue</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>isComment<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>标签元素，就会继续执行到：</p><div class="language-js"><pre><code><span class="token comment">//1. 创建一个真实DOM元素</span>
vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>

<span class="token comment">//2. 循环处理元素子节点创建</span>
<span class="token function">createChildren</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> children<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3. 初始化则创建元素 vnode.elm 的各种属性，即调用对应元素创建的钩子函数</span>
  <span class="token function">invokeCreateHooks</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 4. 将则创建的元素插入当前父元素</span>
<span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其中 <code>invokeCreateHooks(vnode, insertedVnodeQueue)</code> 函数会执行元素初始化工作，即各类属性和事件</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">invokeCreateHooks</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> insertedVnodeQueue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i$1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i$1 <span class="token operator">&lt;</span> cbs<span class="token punctuation">.</span>create<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i$1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cbs<span class="token punctuation">.</span>create<span class="token punctuation">[</span>i$1<span class="token punctuation">]</span><span class="token punctuation">(</span>emptyNode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  i <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>hook<span class="token punctuation">;</span> <span class="token comment">// Reuse variable</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>create<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> i<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>emptyNode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>insert<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> insertedVnodeQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中，关键代码是<code>cbs.create[i$1](emptyNode, vnode);</code> cbs变量是在创建 patch 函数时就定义好了 <code>var patch = createPatchFunction(backend)</code></p><div class="language-js"><pre><code><span class="token keyword">var</span> modules <span class="token operator">=</span> platformModules<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>baseModules<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> patch <span class="token operator">=</span> <span class="token function">createPatchFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nodeOps</span><span class="token operator">:</span> nodeOps<span class="token punctuation">,</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> modules <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">createPatchFunction</span> <span class="token punctuation">(</span><span class="token parameter">backend</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
  <span class="token keyword">var</span> cbs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> modules <span class="token operator">=</span> backend<span class="token punctuation">.</span>modules<span class="token punctuation">;</span>
  <span class="token keyword">var</span> nodeOps <span class="token operator">=</span> backend<span class="token punctuation">.</span>nodeOps<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hooks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cbs<span class="token punctuation">[</span>hooks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> modules<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>modules<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>hooks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cbs<span class="token punctuation">[</span>hooks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>modules<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>hooks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 省略代码...</span>
  
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">patch</span><span class="token punctuation">(</span><span class="token parameter">oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> hydrating<span class="token punctuation">,</span> removeOnly</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 省略代码...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>所以可以看到关注是 modules 定义，它包含两部分：platformModules 和 baseModules</p><div class="language-js"><pre><code><span class="token keyword">var</span> hooks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;create&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;activate&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;update&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;remove&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;destroy&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> baseModules <span class="token operator">=</span> <span class="token punctuation">[</span>
    ref<span class="token punctuation">,</span>
    directives
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> platformModules <span class="token operator">=</span> <span class="token punctuation">[</span>
  attrs<span class="token punctuation">,</span>
  klass<span class="token punctuation">,</span>
  events<span class="token punctuation">,</span>
  domProps<span class="token punctuation">,</span>
  style<span class="token punctuation">,</span>
  transition
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>可以看到 modules 中定义了元素中各个属性在各个钩子函数的处理。就本节事件举例来说：</p><div class="language-js"><pre><code><span class="token keyword">var</span> events <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">create</span><span class="token operator">:</span> updateDOMListeners<span class="token punctuation">,</span>
  <span class="token literal-property property">update</span><span class="token operator">:</span> updateDOMListeners
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">create</span><span class="token operator">:</span> updateAttrs<span class="token punctuation">,</span>
  <span class="token literal-property property">update</span><span class="token operator">:</span> updateAttrs
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>经过 createPatchFunction 函数中那段代码转化后，cbs 对象结果为：</p><div class="language-js"><pre><code><span class="token keyword">var</span> cbs <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    updateAttrs<span class="token punctuation">,</span>
    updateDOMListeners
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">update</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    updateAttrs<span class="token punctuation">,</span>
    updateDOMListeners
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">activate</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">update</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">remove</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">destory</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样在 createPatchFunction 函数生成patch函数前就处理好了，然后在调用 patch =&gt; createElm =&gt; invokeCreateHooks 函数中：</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">invokeCreateHooks</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> insertedVnodeQueue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i$1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i$1 <span class="token operator">&lt;</span> cbs<span class="token punctuation">.</span>create<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i$1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行对应钩子函数</span>
    cbs<span class="token punctuation">.</span>create<span class="token punctuation">[</span>i$1<span class="token punctuation">]</span><span class="token punctuation">(</span>emptyNode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  i <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>hook<span class="token punctuation">;</span> <span class="token comment">// Reuse variable</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>create<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> i<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>emptyNode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>insert<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> insertedVnodeQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>cbs.create[i$1](emptyNode, vnode);</code>即会执行组件周期的钩子函数，即 cbs.create 内的全部钩子。对事件而言，会调用 updateDOMListeners 函数：</p><div class="language-js"><pre><code>  <span class="token keyword">function</span> <span class="token function">updateDOMListeners</span> <span class="token punctuation">(</span><span class="token parameter">oldVnode<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>on<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isUndef</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>on<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> on <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>on <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> oldOn <span class="token operator">=</span> oldVnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>on <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    target$1 <span class="token operator">=</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">;</span>
    <span class="token function">normalizeEvents</span><span class="token punctuation">(</span>on<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateListeners</span><span class="token punctuation">(</span>on<span class="token punctuation">,</span> oldOn<span class="token punctuation">,</span> add$1<span class="token punctuation">,</span> remove$2<span class="token punctuation">,</span> createOnceHandler$1<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    target$1 <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>updateListeners 函数上面在组件自定义事件中有说过，这里关注 add$1 和 remove$2 函数，即调用原生 DOM 的API注册事件：</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">handler</span><span class="token operator">:</span> Function<span class="token punctuation">,</span>
  <span class="token literal-property property">once</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  <span class="token literal-property property">capture</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  <span class="token literal-property property">passive</span><span class="token operator">:</span> boolean</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  handler <span class="token operator">=</span> <span class="token function">withMacroTask</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span> <span class="token comment">// 原生 DOM 事件异步处理都采用宏任务，所以处理句柄需要用 withMacroTask 函数包裹一层。</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>once<span class="token punctuation">)</span> handler <span class="token operator">=</span> <span class="token function">createOnceHandler</span><span class="token punctuation">(</span>handler<span class="token punctuation">,</span> event<span class="token punctuation">,</span> capture<span class="token punctuation">)</span>
  target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    event<span class="token punctuation">,</span>
    handler<span class="token punctuation">,</span>
    supportsPassive
      <span class="token operator">?</span> <span class="token punctuation">{</span> capture<span class="token punctuation">,</span> passive <span class="token punctuation">}</span>
      <span class="token operator">:</span> capture
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">remove</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">handler</span><span class="token operator">:</span> Function<span class="token punctuation">,</span>
  <span class="token literal-property property">capture</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  _target<span class="token operator">?</span><span class="token operator">:</span> HTMLElement</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>_target <span class="token operator">||</span> target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>
    event<span class="token punctuation">,</span>
    handler<span class="token punctuation">.</span>_withTask <span class="token operator">||</span> handler<span class="token punctuation">,</span>
    capture
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>关于 withMacroTask 函数，请查看 <a href="./vue-source-code-6-extension-3-nextTick.html">nextTick</a></p></blockquote></div></div><footer class="page-footer" data-v-30e7de44 data-v-504b1bfc><div class="edit" data-v-504b1bfc><div class="edit-link" data-v-504b1bfc data-v-40c300d5><!----></div></div><div class="updated" data-v-504b1bfc><!----></div></footer><div class="next-and-prev-link" data-v-30e7de44 data-v-0f10f042><div class="container" data-v-0f10f042><div class="prev" data-v-0f10f042><a class="link" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-1-lifecycle" data-v-0f10f042><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-0f10f042><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-0f10f042>生命周期lifecycle</span></a></div><div class="next" data-v-0f10f042><a class="link" href="/FE-Framework/vue-technology-source-code/vue-source-code-6-extension-3-nextTick" data-v-0f10f042><span class="text" data-v-0f10f042>异步任务nextTick</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-0f10f042><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"books_index.md\":\"bf788fc9\",\"books_js_bianchengjingcui.md\":\"b56e2045\",\"books_js_ninja_secret.md\":\"ae9a4be6\",\"books_js_object_oriented.md\":\"413f34ce\",\"books_js_qishilv.md\":\"fbc5796e\",\"books_js_xuexizhinan.md\":\"04315c21\",\"books_js_yuyanjingcui.md\":\"52d1f338\",\"books_js_zhuangjiabiancheng.md\":\"a1c0d1ca\",\"browser_1-bom_index.md\":\"89d43acd\",\"browser_2-dom_document.md\":\"db00f9c0\",\"browser_2-dom_dom_event.md\":\"202bb127\",\"browser_2-dom_element.md\":\"21278a0c\",\"browser_2-dom_node.md\":\"399fe9ba\",\"browser_2-dom_text.md\":\"6a36b599\",\"browser_2-dom_index.md\":\"96f78197\",\"browser_3-cssom_index.md\":\"0c9c54e8\",\"browser_4-render_architecture.md\":\"76d73b9c\",\"browser_4-render_event-loop.md\":\"8fca62ad\",\"browser_4-render_history.md\":\"954fe8e2\",\"browser_4-render_index.md\":\"9715a151\",\"browser_4-render_js-execute.md\":\"842963eb\",\"browser_4-render_render.md\":\"23daf575\",\"browser_4-render_stack-heap-gc.md\":\"fec0e551\",\"browser_4-render_v8.md\":\"b6688082\",\"browser_5-cache_index.md\":\"fbb2131d\",\"browser_6-storage_index.md\":\"49ce9697\",\"browser_7-security_index.md\":\"fcc8bb13\",\"browser_8-new-api_blob-file-arraybuffer-url.md\":\"80d4ff02\",\"browser_8-new-api_index.md\":\"c88d4afc\",\"database_mongodb_index.md\":\"7216594c\",\"database_mysql_index.md\":\"3d143f1d\",\"database_redis_index.md\":\"9eaa1b7b\",\"design_color.md\":\"cf1fd0f2\",\"design_figma.md\":\"fbcef807\",\"design_font.md\":\"75f58d6d\",\"design_image.md\":\"77d9abae\",\"design_index.md\":\"343740b2\",\"fe-engineering_cd-deploy_ftp.md\":\"8c15e8ed\",\"fe-engineering_cd-deploy_github-actions.md\":\"2d79cfc1\",\"fe-engineering_cd-deploy_index.md\":\"28b479e4\",\"fe-engineering_cd-release_index.md\":\"17604b57\",\"fe-engineering_ci-babel_index.md\":\"08d2959e\",\"fe-engineering_ci-gulp_gulp_stream.md\":\"634549bc\",\"fe-engineering_ci-gulp_gulp_task.md\":\"1425bba4\",\"fe-engineering_ci-gulp_gulp_vinyl.md\":\"09b6e30b\",\"fe-engineering_ci-gulp_index.md\":\"940d567c\",\"fe-engineering_ci-gulp_workflow.md\":\"a2a8e212\",\"fe-engineering_ci-postcss_index.md\":\"5c39c4c3\",\"fe-engineering_ci-run-script_index.md\":\"1c34f98e\",\"fe-engineering_ci-vite_assets.md\":\"8804f53a\",\"fe-engineering_ci-vite_cli.md\":\"f8440e30\",\"fe-engineering_ci-vite_connect.md\":\"5bdab8a0\",\"fe-engineering_ci-vite_index.md\":\"e509280d\",\"fe-engineering_ci-vite_optimize.md\":\"a8890925\",\"fe-engineering_ci-vite_plugin.md\":\"62145706\",\"fe-engineering_ci-vite_server.md\":\"583c403d\",\"fe-engineering_ci-vite_usage.md\":\"ba681a30\",\"fe-engineering_ci-webpack_asset.md\":\"1672cb98\",\"fe-engineering_ci-webpack_config.md\":\"7102d08b\",\"fe-engineering_ci-webpack_css.md\":\"738694ab\",\"fe-engineering_ci-webpack_dev.md\":\"093cf6d0\",\"fe-engineering_ci-webpack_entry.md\":\"4978f43a\",\"fe-engineering_ci-webpack_env.md\":\"892a2dfd\",\"fe-engineering_ci-webpack_hmr.md\":\"3d4ebd15\",\"fe-engineering_ci-webpack_html.md\":\"81b987e8\",\"fe-engineering_ci-webpack_index.md\":\"883e5c37\",\"fe-engineering_ci-webpack_intro.md\":\"38aee43a\",\"fe-engineering_ci-webpack_js.md\":\"d7f8f259\",\"fe-engineering_ci-webpack_perf.md\":\"82c770da\",\"fe-engineering_ci-webpack_prod.md\":\"f12d26e3\",\"fe-engineering_ci-webpack_webpack-chain.md\":\"85050e36\",\"fe-engineering_dev-debug_index.md\":\"77545e66\",\"fe-engineering_dev-linter_editorconfig.md\":\"bc623097\",\"fe-engineering_dev-linter_eslint.md\":\"89fb297a\",\"fe-engineering_dev-linter_husky.md\":\"05c44b3e\",\"fe-engineering_dev-linter_prettier.md\":\"09bf64bb\",\"fe-engineering_dev-linter_stylelint.md\":\"1f5fad19\",\"fe-engineering_dev-linter_git-commit.md\":\"457107db\",\"fe-engineering_dev-linter_index.md\":\"67c81b7c\",\"fe-engineering_dev-linter_lint-staged.md\":\"f6074764\",\"fe-engineering_dev-linter_practice.md\":\"8034a48a\",\"fe-engineering_dev-mock_index.md\":\"38f1bdcd\",\"fe-engineering_dev-test_1-jest.md\":\"28c75e84\",\"fe-engineering_dev-test_2-jest-config.md\":\"648ce7c9\",\"fe-engineering_dev-test_3-vue-test.md\":\"1ffb46fc\",\"fe-engineering_dev-test_4-vue-router-test.md\":\"73111b63\",\"fe-engineering_dev-test_5-vuex-test.md\":\"54cf051d\",\"fe-engineering_dev-test_6-vue-ssr-test.md\":\"a54fb11d\",\"fe-engineering_dev-test_7-snapshot-test.md\":\"f9a5b56e\",\"fe-engineering_dev-test_index.md\":\"7e6da7f6\",\"fe-engineering_initial_browserslist.md\":\"dc35949a\",\"fe-engineering_initial_cli.md\":\"b42b66e0\",\"fe-engineering_initial_dev-env.md\":\"b3d41526\",\"fe-engineering_initial_package-json.md\":\"ace2a050\",\"fe-engineering_initial_project-directory.md\":\"06fb7ddb\",\"fe-engineering_intro-fe-engineering.md\":\"0f7fe017\",\"fe-engineering_op-monitor_index.md\":\"7c5ee006\",\"fe-engineering_op-performance_index.md\":\"a70ba8d4\",\"fe-framework_element-ui_index.md\":\"bba5b29a\",\"fe-framework_react_create-react-app.md\":\"75c7d831\",\"fe-framework_react_index.md\":\"19d448c1\",\"fe-framework_react_react-00-catalog.md\":\"0b594c6f\",\"fe-framework_react_react-01-what_is_react.md\":\"24d1ee0a\",\"fe-framework_react_react-02-react-createelement.md\":\"137efb52\",\"fe-framework_react_react-03-组件类.md\":\"f6054f10\",\"fe-framework_react_react-04-组件属性传递props.md\":\"a6dbeb19\",\"fe-framework_react_react-05-组件嵌套props.children.md\":\"a64049de\",\"fe-framework_react_react-06-组件属性默认值defaultprops.md\":\"bc67f0b2\",\"fe-framework_react_react-07-组件属性值类型校验propstypes.md\":\"ae578441\",\"fe-framework_react_react-08-组件状态state.md\":\"0d61725d\",\"fe-framework_react_react-09-有状态组件和无状态组件.md\":\"7adfdf9a\",\"fe-framework_react_react-10-组件的事件.md\":\"0ec7b797\",\"fe-framework_react_react-11-react事件内幕syntheticevent.md\":\"161f01b1\",\"fe-framework_react_react-12-组件生命周期lifycycle.md\":\"ecd3f3ed\",\"fe-framework_react_react-13-jsx体验.md\":\"10fbcd4e\",\"fe-framework_react_react-14-jsx语法.md\":\"1b4d6998\",\"fe-framework_react_react-15-react使用表单.md\":\"dae552b4\",\"fe-framework_react_react-16-高阶组件hoc.md\":\"22739dd8\",\"fe-framework_react_react-17-创建react项目的三种方法.md\":\"cfdaf3eb\",\"fe-framework_react_react-hooks.md\":\"89da13e7\",\"fe-framework_react_react-redux-01-what_is_redux.md\":\"ecbf5b20\",\"fe-framework_react_react-router-01-路由react-router原理.md\":\"bde3f3b3\",\"fe-framework_react_react-router-02-react-router-v4.md\":\"347107d5\",\"fe-framework_react_react-router-03-路由react-router的api.md\":\"6bb36c89\",\"fe-framework_vue_index.md\":\"e26353d2\",\"fe-framework_vue_vite_index.md\":\"219d6224\",\"fe-framework_vue_vue-router_vue-router-1-index.md\":\"052e7487\",\"fe-framework_vue_vue-router_vue-router-2-evolution.md\":\"b311c4ac\",\"fe-framework_vue_vue-router_vue-router-3-usage.md\":\"c12caad3\",\"fe-framework_vue_vue-ssr_vue-ssr-demo.md\":\"fa0c6028\",\"fe-framework_vue_vue-ssr_vue-ssr-index.md\":\"3bcab934\",\"fe-framework_vue_vue-ssr_vue-ssr-intro.md\":\"fcd6fd57\",\"fe-framework_vue_vue-tutorial_vue-1-why-use-vue.md\":\"fa76ac0d\",\"fe-framework_vue_vue-tutorial_vue-10-template-v-bind-with-class-and-style.md\":\"c20af482\",\"fe-framework_vue_vue-tutorial_vue-11-js-vue-options.md\":\"9c20891d\",\"fe-framework_vue_vue-tutorial_vue-12-js-data.md\":\"acaf73e6\",\"fe-framework_vue_vue-tutorial_vue-13-js-computed.md\":\"b9847cf3\",\"fe-framework_vue_vue-tutorial_vue-14-js-methods.md\":\"ba6d8423\",\"fe-framework_vue_vue-tutorial_vue-15-js-watch.md\":\"a733b0f1\",\"fe-framework_vue_vue-tutorial_vue-16-js-filters.md\":\"87f3633d\",\"fe-framework_vue_vue-tutorial_vue-17-js-mixins.md\":\"6b086673\",\"fe-framework_vue_vue-tutorial_vue-18-js-directive.md\":\"7962148a\",\"fe-framework_vue_vue-tutorial_vue-19-js-lifecycle.md\":\"23366c18\",\"fe-framework_vue_vue-tutorial_vue-2-template-directive.md\":\"27523b77\",\"fe-framework_vue_vue-tutorial_vue-20-js-ref.md\":\"2372a7d4\",\"fe-framework_vue_vue-tutorial_vue-21-js-data-computed-watch-methods-filters.md\":\"fd8b7dac\",\"fe-framework_vue_vue-tutorial_vue-22-vue-scope.md\":\"04768285\",\"fe-framework_vue_vue-tutorial_vue-23-js-nexttick.md\":\"327f8d6a\",\"fe-framework_vue_vue-tutorial_vue-24-component.md\":\"e80ebf31\",\"fe-framework_vue_vue-tutorial_vue-25-component-introduce.md\":\"d4fdd2fd\",\"fe-framework_vue_vue-tutorial_vue-26-component-prop.md\":\"efd090ed\",\"fe-framework_vue_vue-tutorial_vue-27-component-event.md\":\"738a3074\",\"fe-framework_vue_vue-tutorial_vue-28-component-slot.md\":\"00ff905a\",\"fe-framework_vue_vue-tutorial_vue-29-component-ref.md\":\"1ba45f41\",\"fe-framework_vue_vue-tutorial_vue-3-template-插值-v-html.md\":\"ba8ae2ab\",\"fe-framework_vue_vue-tutorial_vue-30-component-组件间通信6种方法.md\":\"700f75e9\",\"fe-framework_vue_vue-tutorial_vue-31-component-异步组件-工厂函数.md\":\"0bcc50d2\",\"fe-framework_vue_vue-tutorial_vue-32-component-transition.md\":\"da80e820\",\"fe-framework_vue_vue-tutorial_vue-33-component-keep-alive.md\":\"84297e92\",\"fe-framework_vue_vue-tutorial_vue-34-component-is.md\":\"267e3058\",\"fe-framework_vue_vue-tutorial_vue-36-component-provide-inject.md\":\"1a79ce90\",\"fe-framework_vue_vue-tutorial_vue-4-template-v-if-and-v-show.md\":\"a22c0e24\",\"fe-framework_vue_vue-tutorial_vue-5-template-v-for.md\":\"7dc1ba18\",\"fe-framework_vue_vue-tutorial_vue-6-template-v-bind.md\":\"f1f7d4b9\",\"fe-framework_vue_vue-tutorial_vue-7-template-v-on-and-modifier.md\":\"3a690cef\",\"fe-framework_vue_vue-tutorial_vue-8-template-v-model.md\":\"51365663\",\"fe-framework_vue_vue-tutorial_vue-9-template-render-jsx.md\":\"be6c3b03\",\"fe-framework_vue_vue-tutorial_vue-practice-2-jsx.md\":\"31312716\",\"fe-framework_vue_vue-tutorial_vue-practice-3-watch-selector.md\":\"b95fcf13\",\"fe-framework_vue_vue-vuex_vuex-1-index.md\":\"cd80f8bb\",\"fe-framework_vue_vue-vuex_vuex-2-usage.md\":\"cdfc88fb\",\"fe-framework_vue-technology-source-code_index.md\":\"dcc91c7c\",\"fe-framework_vue-technology-source-code_vue-router-source-code-1-install.md\":\"53deee37\",\"fe-framework_vue-technology-source-code_vue-router-source-code-2-init.md\":\"dc3aaced\",\"fe-framework_vue-technology-source-code_vue-router-source-code-3-matcher.md\":\"9d54c275\",\"fe-framework_vue-technology-source-code_vue-router-source-code-4-history.md\":\"fc1d962c\",\"fe-framework_vue-technology-source-code_vue-router-source-code-5-router-link.md\":\"8b771c25\",\"fe-framework_vue-technology-source-code_vue-router-source-code-6-router-view.md\":\"1e6ed502\",\"fe-framework_vue-technology-source-code_vue-source-code-0-index.md\":\"ecd2946a\",\"fe-framework_vue-technology-source-code_vue-source-code-1-reactivity-1-detection-chnage.md\":\"0c0ae44b\",\"fe-framework_vue-technology-source-code_vue-source-code-1-reactivity-2-collect-dependency.md\":\"48486439\",\"fe-framework_vue-technology-source-code_vue-source-code-1-reactivity-3-dispatch-update.md\":\"73d8e253\",\"fe-framework_vue-technology-source-code_vue-source-code-1-reactivity-4-summary.md\":\"5959d284\",\"fe-framework_vue-technology-source-code_vue-source-code-2-compile-0.md\":\"7421f28b\",\"fe-framework_vue-technology-source-code_vue-source-code-2-compile-1-parse.md\":\"606dadc6\",\"fe-framework_vue-technology-source-code_vue-source-code-2-compile-2-optimize.md\":\"ce4a3caf\",\"fe-framework_vue-technology-source-code_vue-source-code-2-compile-3-generate.md\":\"2d6fcfd9\",\"fe-framework_vue-technology-source-code_vue-source-code-3-virtual-dom-1-create-vnode.md\":\"33d0eef4\",\"fe-framework_vue-technology-source-code_vue-source-code-3-virtual-dom-2-diff.md\":\"a049f9cb\",\"fe-framework_vue-technology-source-code_vue-source-code-4-component-1-extend.md\":\"bf603980\",\"fe-framework_vue-technology-source-code_vue-source-code-4-component-2-createcomponent.md\":\"2d400673\",\"fe-framework_vue-technology-source-code_vue-source-code-4-component-3-slot.md\":\"8809b502\",\"fe-framework_vue-technology-source-code_vue-source-code-4-component-4-async.md\":\"05e2422c\",\"fe-framework_vue-technology-source-code_vue-source-code-4-component-5-keep-alive.md\":\"4c76e225\",\"fe-framework_vue-technology-source-code_vue-source-code-5-initialize-1-constructor.md\":\"ec76d665\",\"fe-framework_vue-technology-source-code_vue-source-code-5-initialize-2-mergeoptions.md\":\"51e769c5\",\"fe-framework_vue-technology-source-code_vue-source-code-5-initialize-3-options.md\":\"e2f5e245\",\"fe-framework_vue-technology-source-code_vue-source-code-6-extension-1-lifecycle.md\":\"acbce8c7\",\"fe-framework_vue-technology-source-code_vue-source-code-6-extension-2-event.md\":\"d77789c6\",\"fe-framework_vue-technology-source-code_vue-source-code-6-extension-3-nexttick.md\":\"839c4364\",\"fe-framework_vue-technology-source-code_vue-source-code-6-extension-4-directive.md\":\"cfcb4707\",\"fe-framework_vue-technology-source-code_vue-source-code-6-extension-5-filter.md\":\"c6f0bfe8\",\"fe-framework_vue-technology-source-code_vue-ssr-source-code.md\":\"d83c7721\",\"fe-framework_vue-technology-source-code_vuex-source-code-1-install.md\":\"1599248f\",\"fe-framework_vue-technology-source-code_vuex-source-code-2-instance.md\":\"e34c3457\",\"fe-framework_vue-technology-source-code_vuex-source-code-3-api.md\":\"842d0a97\",\"fe-framework_vue-technology-source-code_vuex-source-code-4-register.md\":\"1e397fbe\",\"fe-framework_vue-technology-source-code_vuex-source-code-5-plugin.md\":\"4431da33\",\"fe-language_css_index.md\":\"745b38bb\",\"fe-language_es_async-0-history.md\":\"be234b91\",\"fe-language_es_async-1-promise.md\":\"17ed459b\",\"fe-language_es_async-2-generator-iterator.md\":\"3acce902\",\"fe-language_es_async-3-async-await.md\":\"8e9faca6\",\"fe-language_es_async-4-js-callback-promise-generator-async.md\":\"7e7f44a8\",\"fe-language_es_base-0-index.md\":\"22e95af6\",\"fe-language_es_base-1-expression-operators.md\":\"121750c0\",\"fe-language_es_base-2-variant.md\":\"d777cf57\",\"fe-language_es_base-3-statement.md\":\"d2e325d1\",\"fe-language_es_base-4-strict.md\":\"ceca963a\",\"fe-language_es_built-in-array.md\":\"24b44809\",\"fe-language_es_built-in-boolean.md\":\"7119b68d\",\"fe-language_es_built-in-date.md\":\"debd017f\",\"fe-language_es_built-in-error.md\":\"94db9221\",\"fe-language_es_built-in-globalthis.md\":\"1450e75f\",\"fe-language_es_built-in-map.md\":\"bba88087\",\"fe-language_es_built-in-number.md\":\"b58089b9\",\"fe-language_es_built-in-object.md\":\"f2d8f58d\",\"fe-language_es_built-in-regexp.md\":\"a3051330\",\"fe-language_es_built-in-set.md\":\"f0782cfb\",\"fe-language_es_built-in-string.md\":\"77e65add\",\"fe-language_es_built-in-weakmap-weakset.md\":\"291359c8\",\"fe-language_es_built-in-index.md\":\"f18f16a5\",\"fe-language_es_es-next-index.md\":\"8c212ce0\",\"fe-language_es_fn-0-index.md\":\"049e03d8\",\"fe-language_es_fn-1-intro.md\":\"a08ce184\",\"fe-language_es_fn-2-base.md\":\"8248af98\",\"fe-language_es_fn-3-runtime.md\":\"b87d188d\",\"fe-language_es_fn-4-senior.md\":\"23400a10\",\"fe-language_es_index.md\":\"aa475f2e\",\"fe-language_es_intro-1-software.md\":\"3edd513f\",\"fe-language_es_intro-2-es-history.md\":\"c9948af6\",\"fe-language_es_misc-1-error.md\":\"60b24c74\",\"fe-language_es_misc-2-module.md\":\"111834b7\",\"fe-language_es_module-0-history.md\":\"55286b14\",\"fe-language_es_module-1-commonjs.md\":\"fce08adf\",\"fe-language_es_module-2-amd-requirejs.md\":\"e2cf5e9d\",\"fe-language_es_module-3-umd.md\":\"2bb91367\",\"fe-language_es_module-4-es-module.md\":\"932f93ec\",\"fe-language_es_oop-0-index.md\":\"0a8dce13\",\"fe-language_es_oop-0-object-history.md\":\"355b0769\",\"fe-language_es_oop-1-object-create.md\":\"e90ba795\",\"fe-language_es_oop-2-object-property.md\":\"79de32de\",\"fe-language_es_oop-3-prototype.md\":\"10be9e2b\",\"fe-language_es_oop-4-constructor.md\":\"670a9f65\",\"fe-language_es_oop-5-class.md\":\"818b16d3\",\"fe-language_es_oop-6-inherit.md\":\"e6c1cf4b\",\"fe-language_es_type-0-index.md\":\"51103605\",\"fe-language_es_type-1-null-undefined-boolean.md\":\"0ce17641\",\"fe-language_es_type-2-number.md\":\"e1c51313\",\"fe-language_es_type-3-string.md\":\"aa0ae742\",\"fe-language_es_type-4-symbol.md\":\"73afdf46\",\"fe-language_es_type-5-bigint.md\":\"5459a172\",\"fe-language_es_type-6-object.md\":\"034ba934\",\"fe-language_es_type-7-checking.md\":\"5b65fc6e\",\"fe-language_es_type-8-primitive-wrapper.md\":\"a6487e79\",\"fe-language_es_type-9-conversion.md\":\"e7ead275\",\"fe-language_html_0-introduce.md\":\"edebe401\",\"fe-language_html_1-grammar.md\":\"aa883c73\",\"fe-language_html_10-text-content-semantics.md\":\"66b37ade\",\"fe-language_html_11-a.md\":\"a7d29fb9\",\"fe-language_html_12-img.md\":\"37b33a4a\",\"fe-language_html_13-table.md\":\"9d007daa\",\"fe-language_html_14-form.md\":\"130177f2\",\"fe-language_html_15-template.md\":\"548397cb\",\"fe-language_html_2-content-model.md\":\"a7b5f3d9\",\"fe-language_html_3-doc-structure.md\":\"50b3bc94\",\"fe-language_html_4-doctype.md\":\"580c6c22\",\"fe-language_html_5-html.md\":\"ee93ff9c\",\"fe-language_html_6-head.md\":\"398618d9\",\"fe-language_html_7-body.md\":\"0ca64e11\",\"fe-language_html_8-layout-structural-semantics.md\":\"5597e0ce\",\"fe-language_html_9-text-structural-semantics.md\":\"e2fe947a\",\"fe-language_html_index.md\":\"af11e8f9\",\"fe-language_html_outerhtml-innerthml-outertext-innertext-textcontent.md\":\"2e1d3476\",\"fe-language_ts_0-introts.md\":\"4b5d9957\",\"fe-language_ts_1-type-declaration-1.1-basic-type.md\":\"8902d85b\",\"fe-language_ts_1-type-declaration-1.2-function.md\":\"b7c30671\",\"fe-language_ts_1-type-declaration-1.3-class.md\":\"848e7ac9\",\"fe-language_ts_1-type-declaration-1.5-decorators.md\":\"ab9bea29\",\"fe-language_ts_2-type-inference.md\":\"3e21b088\",\"fe-language_ts_3-type-checking.md\":\"bd8d5b66\",\"fe-language_ts_4-type-programming.md\":\"772d240c\",\"fe-language_ts_declaration.md\":\"887eb1d6\",\"fe-language_ts_index.md\":\"f787f8b8\",\"fe-language_ts_install.md\":\"67fad4bd\",\"fe-language_ts_module.md\":\"3cf668f5\",\"fe-language_ts_practice-enum.md\":\"45189e8c\",\"fe-language_ts_practice-ts-node.md\":\"688d40cc\",\"fe-language_ts_practice-ts-vue.md\":\"0134520f\",\"fe-language_ts_tsconfig.md\":\"fb4a25ca\",\"fe-language_ts_x-advancedtype.md\":\"3194bdbc\",\"fe-language_ts_x-basetype.md\":\"5444ae42\",\"fe-language_ts_x-generics.md\":\"b7e03025\",\"fe-language_ts_x-interface.md\":\"eac8dbb8\",\"fe-language_ts_x-types.md\":\"38cc9f64\",\"fe-technology_backend-for-frontend_index.md\":\"d249b64e\",\"fe-technology_micro-frontend_intro-micro-fe.md\":\"ac4c31ee\",\"fe-technology_micro-frontend_lerna.md\":\"c1aad6d4\",\"fe-technology_micro-frontend_monorepo.md\":\"b6b165d9\",\"fe-technology_responsive-web-design_index.md\":\"bde259ea\",\"fe-technology_visualize_canvas_index.md\":\"998b2ec1\",\"fe-technology_visualize_svg_index.md\":\"c52036ab\",\"fe-technology_visualize_webgl_index.md\":\"1a5835bf\",\"network_eventsource.md\":\"7a92ae6f\",\"network_websocket.md\":\"55e22926\",\"network_xmlhttprequest.md\":\"9bda2811\",\"network_axios_1-instance.md\":\"157d860c\",\"network_axios_2-request-promise.md\":\"b3d56225\",\"network_axios_3-adapter.md\":\"0d0d41ac\",\"network_axios_4-interceptor.md\":\"4bd46990\",\"network_axios_5-transform-data.md\":\"ffa82e84\",\"network_axios_6-cancel-token.md\":\"cb620579\",\"network_axios_index.md\":\"a16d35d0\",\"network_fetch_index.md\":\"2a5b8f3c\",\"network_graphql_index.md\":\"43c5a140\",\"network_protocol_http-authentication.md\":\"7c8f75f4\",\"network_protocol_http-authorization.md\":\"bc5d9855\",\"network_protocol_http-cache.md\":\"64007058\",\"network_protocol_http-cookie.md\":\"11c4236f\",\"network_protocol_http-cors.md\":\"c532776b\",\"network_protocol_http-intro.md\":\"683a8cc0\",\"network_protocol_http-session-connect-message.md\":\"7d5553b6\",\"network_protocol_http-uri-mime.md\":\"a37c4ed5\",\"network_protocol_index.md\":\"88e2edcd\",\"network_protocol_ip-dns.md\":\"e7b9a90e\",\"network_protocol_tcp-udp.md\":\"b7daaed0\",\"network_restful_index.md\":\"d45da3dc\",\"server_bash_index.md\":\"114003c7\",\"server_connect_index.md\":\"efe0d605\",\"server_express_index.md\":\"f73b9f0c\",\"server_koa_index.md\":\"f13c1f2e\",\"server_nest_index.md\":\"edfed9a3\",\"server_nginx_index.md\":\"aa335266\",\"server_node_bit-byte-stream-buffer.md\":\"ae916d45\",\"server_node_buffer.md\":\"dfcd55fe\",\"server_node_concept.md\":\"bfa67b75\",\"server_node_eventloop.md\":\"6a8f745a\",\"server_node_fs.md\":\"2e2c6526\",\"server_node_global.md\":\"f3e418cc\",\"server_node_http.md\":\"9f8ee510\",\"server_node_index.md\":\"d12d2610\",\"server_node_introduce.md\":\"cefc0a00\",\"server_node_module.md\":\"1e17d2a6\",\"server_node_npm.md\":\"51f1cd95\",\"server_node_npx.md\":\"cfaab2a3\",\"server_node_nrm.md\":\"535651c8\",\"server_node_nvm.md\":\"c7554a18\",\"server_node_path.md\":\"3af07502\",\"server_node_pnpm.md\":\"c6d537fc\",\"server_node_querystring.md\":\"a5cb7c37\",\"server_node_stream.md\":\"7a5281a9\",\"server_node_url.md\":\"bbd95dee\",\"server_node_yarn.md\":\"433f5b5f\",\"software_algorithm_index.md\":\"c1d578b9\",\"software_architectural-pattern_index.md\":\"d09a6060\",\"software_data-structure_index.md\":\"99976ee6\",\"tools_git_git-flow.md\":\"f30edf34\",\"tools_git_index.md\":\"ec0923d7\",\"tools_git_install.md\":\"06e79a73\",\"tools_git_usage.md\":\"fc8b43f8\",\"tools_node-tree-cli.md\":\"5f64e1e6\",\"tools_powershell.md\":\"c67f4ab7\",\"tools_vim_concept.md\":\"d04c9e70\",\"tools_vim_index.md\":\"f4d21efc\",\"tools_vim_install.md\":\"b0d82bbb\",\"tools_vim_shortcuts.md\":\"18632150\",\"tools_vscode.md\":\"54658102\",\"tools_window-terminal.md\":\"19a57761\",\"index.md\":\"d687abbf\"}")</script>
    <script type="module" async src="/assets/app.fa011131.js"></script>
    
  </body>
</html>